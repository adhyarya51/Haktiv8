"use strict";this.default_r_tvffkgi=this.default_r_tvffkgi||{};(function(_){var window=this;
try{
_.IIe=function(a,b){return a.orgMap$.pipe(_.A(c=>c.get(b)?{type:0,organization:c.get(b)}:{type:1}))};
_.JIe=class{constructor(a,b,c){this.iamPermissionsService=a;this.orgNamespaceService=b;this.projectService=c;this.orgMap$=_.dce(this.orgNamespaceService).pipe(_.ag({refCount:!0,bufferSize:1}))}getProject(a){const b=new _.Dj(a,0);return this.iamPermissionsService.preFetchPermissions(["resourcemanager.projects.get"],[b]).pipe(_.A(()=>this.iamPermissionsService.can("resourcemanager.projects.get",b)),_.E(c=>c?this.projectService.getProject(a).pipe(_.A(d=>({type:0,project:d})),_.wf(d=>{d.errorExperience=
6;return _.y({type:2,error:d})})):_.y({type:1})))}};_.JIe.\u0275fac=function(a){return new (a||_.JIe)(_.l(_.GA),_.l(_.$O),_.l(_.Pv))};_.JIe.\u0275prov=_.h({token:_.JIe,factory:_.JIe.\u0275fac,providedIn:"root"});var OIe;
_.bR=class{constructor(a){this.scopeService=a}transform(a){switch(a.resourceType){case 2:return _.IIe(this.scopeService,a.id).pipe(_.A(b=>{const c=b.type;switch(c){case 0:return{type:0,display:b.organization.name};case 1:return{type:2,display:a.id};default:_.Oc(c,"invalid get organization result type")}}));case 0:return this.scopeService.getProject(a.id).pipe(_.A(b=>{const c=b.type;switch(c){case 0:return b.project.getDisplayName()?{type:0,display:b.project.getDisplayName()}:{type:1,display:a.id};case 1:return{type:2,
display:a.id};case 2:return{type:3,display:a.id};default:_.Oc(c,"invalid get project result type")}}));default:_.Oc(a.resourceType,"invalid tag key parent resource type")}}};_.bR.\u0275fac=function(a){return new (a||_.bR)(_.D(_.JIe,16))};_.bR.\u0275pipe=_.Gd({name:"tagKeyParentDisplayResult",type:_.bR,pure:!0});_.bR.\u0275prov=_.h({token:_.bR,factory:_.bR.\u0275fac,providedIn:"root"});
_.cR=class{constructor(a){this.tagKeyParentDisplayResultPipe=a}transform(a){return this.tagKeyParentDisplayResultPipe.transform(a).pipe(_.A(b=>b.display))}};_.cR.\u0275fac=function(a){return new (a||_.cR)(_.D(_.bR,16))};_.cR.\u0275pipe=_.Gd({name:"tagKeyParentDisplay",type:_.cR,pure:!0});_.cR.\u0275prov=_.h({token:_.cR,factory:_.cR.\u0275fac,providedIn:"root"});_.KIe=class{transform(a,b){return!b||!(a.id===b.id&&a.resourceType===b.resourceType)}};_.KIe.\u0275fac=function(a){return new (a||_.KIe)};
_.KIe.\u0275pipe=_.Gd({name:"exposeTagKeyParent",type:_.KIe,pure:!0});_.LIe=class{transform(a){return _.Oe(()=>a.valueChanges.pipe(_.dg(a.value))).pipe(_.A(b=>null==b?void 0:b.description))}};_.LIe.\u0275fac=function(a){return new (a||_.LIe)};_.LIe.\u0275pipe=_.Gd({name:"tagControlDescription",type:_.LIe,pure:!0});
_.MIe=class{constructor(a,b){this.exposeTagKeyParentPipe=a;this.tagControlDescriptionPipe=b}transform(a,b){return _.Ie([a.tagKeyParent$,this.tagControlDescriptionPipe.transform(a)]).pipe(_.A(([c,d])=>(c=this.exposeTagKeyParentPipe.transform(c,b)?c:void 0)||d?{description:d,tagKeyParent:c}:void 0))}};_.MIe.\u0275fac=function(a){return new (a||_.MIe)(_.D(_.KIe,16),_.D(_.LIe,16))};_.MIe.\u0275pipe=_.Gd({name:"tagKeyAdditionalInfo",type:_.MIe,pure:!0});
_.NIe=class{transform(a,b){return null==b?void 0:b(a)}};_.NIe.\u0275fac=function(a){return new (a||_.NIe)};_.NIe.\u0275pipe=_.Gd({name:"tagOptionDisabledReason",type:_.NIe,pure:!0});OIe=[_.KIe,_.NIe,_.LIe,_.MIe,_.cR,_.bR];_.dR=class{};_.dR.\u0275fac=function(a){return new (a||_.dR)};_.dR.\u0275mod=_.q({type:_.dR});_.dR.\u0275inj=_.k({providers:OIe});var PIe;_.eR=class{transform(a){return null==a?void 0:a.replace(/ /g,"\u00a0")}};_.eR.\u0275fac=function(a){return new (a||_.eR)};_.eR.\u0275pipe=_.Gd({name:"toNonBreakingSpaces",type:_.eR,pure:!0});PIe=[_.eR];_.fR=class{};_.fR.\u0275fac=function(a){return new (a||_.fR)};_.fR.\u0275mod=_.q({type:_.fR});_.fR.\u0275inj=_.k({providers:PIe});_.QIe=class{transform(a){switch(a.getResourceType()){case 0:case 43:case 2:return!0;default:return!1}}};_.QIe.\u0275fac=function(a){return new (a||_.QIe)};_.QIe.\u0275pipe=_.Gd({name:"canFetchAncestry",type:_.QIe,pure:!0});var RIe=[_.QIe],SIe=class{};SIe.\u0275fac=function(a){return new (a||SIe)};SIe.\u0275mod=_.q({type:SIe});SIe.\u0275inj=_.k({providers:RIe});var TIe=class{};TIe.\u0275fac=function(a){return new (a||TIe)};TIe.\u0275mod=_.q({type:TIe});TIe.\u0275inj=_.k({imports:[_.XL,_.Qr,_.DC,SIe]});_.gR=class{};_.gR.\u0275fac=function(a){return new (a||_.gR)};_.gR.\u0275mod=_.q({type:_.gR});_.gR.\u0275inj=_.k({imports:[_.Dz,_.YPd,_.Qr,_.fR,_.kB,SIe,TIe,_.eM,_.dR]});
}catch(e){_._DumpException(e)}
try{
var OOf,POf,QOf,ROf,TOf,SOf,VOf,cPf,ePf,fPf,gPf,hPf,iPf,jPf,kPf,lPf,mPf,nPf,oPf,pPf,qPf,rPf,sPf,tPf,uPf,vPf,wPf,xPf,EPf,FPf,GPf,HPf,IPf,KPf,MPf,OPf,PPf,QPf,RPf,SPf,UPf,VPf,WPf,XPf,YPf,ZPf,$Pf,aQf,cQf,dQf,eQf,fQf,iQf,jQf,kQf,mQf,nQf,oQf,pQf,qQf,sQf,tQf,uQf,vQf,xQf,AQf,BQf,DQf,EQf,FQf,GQf,HQf,JQf,KQf,yQf,LQf,MQf,NQf,OQf,PQf,QQf,RQf,SQf,TQf,UQf,VQf,WQf,XQf,YQf,ZQf,$Qf,aRf,bRf,cRf,dRf,eRf,fRf,gRf,iRf,jRf,lRf,mRf,nRf,oRf,qRf,sRf,tRf,uRf,wRf,xRf,yRf,DRf,ERf,FRf,HRf,JRf,KRf,$Of,XOf,CPf;
_.NOf=function(a){return 0===a.length?!1:_.Obe.test(a)};_.iW=function(a){const b=_.Cj(a);a=_.Bj(a);return{id:b,resourceType:a}};OOf=function(a){a&1&&(_.K(0,"cfc-help-button",7),_.P(1,0),_.L())};POf=function(a){a&1&&(_.K(0,"cfc-help-button",8),_.P(1,1),_.L())};
QOf=function(a){a&1&&(_.N(0)(1,4),_.H(2,OOf,2,0,"cfc-help-button",5)(3,POf,2,0,"cfc-help-button",6),_.O()());a&2&&(a=_.S(2),_.B(),_.I("ngSwitch",a.tagKeyParent.resourceType),_.B(),_.I("ngSwitchCase",a.IamResourceType.ORGANIZATIONS),_.B(),_.I("ngSwitchCase",a.IamResourceType.PROJECTS))};ROf=function(a,b){a&1&&(_.N(0)(1),_.U(2),_.O(),_.H(3,QOf,4,3,"ng-container",3),_.O());a&2&&(a=b.ngIf,b=_.S(),_.B(2),_.V("\u00a0",a.display,""),_.B(),_.I("ngIf",b.showInaccessibleTooltip&&a.type===b.TagKeyParentDisplayResultType.KEY_PARENT_INACCESSIBLE))};
TOf=function(a,b){var c=Object,d=c.assign,e=a.errors;b=!e||1>Object.keys(e).length?{}:b?{[b]:Object.assign({},a.errors)}:Object.assign({},a.errors);return d.call(c,b,a.controls?SOf(a):{})};SOf=function(a){return Object.keys(a.controls).map(b=>TOf(a.controls[b],b)).reduce((b,c)=>Object.assign(b,c),{})};_.UOf=function(a){a=TOf(a);return!a||1>Object.keys(a).length?null:a};VOf=function(a){return a.statusChanges.pipe(_.dg(a.status),_.We(b=>"PENDING"!==b),_.A(()=>_.UOf(a)),_.Gf(1))};
_.WOf=function(a){return!!a.controls.key&&!!a.controls.value};_.YOf=function(a){switch(a.tagFormGroupType){case 0:return _.jW(a);case 1:return a.get("valueId");case 2:return XOf(a);default:_.Oc(a.tagFormGroupType,"Invalid tag form group type")}};_.aPf=function(a){if(a instanceof _.ZOf){let b;return null==(b=a.value)?void 0:b.name}if(!(a instanceof $Of))return a.value?`tagValues/${a.value}`:void 0};_.bPf=function(a){return _.aPf(_.YOf(a))};
cPf=function(a){if(a instanceof _.ZOf){var b;return null==(b=a.value)?void 0:b.namespacedName}if(a instanceof $Of){b=a.tagParent;const c=a.tagKeyShortName;a=a.value;a=b&&c&&a?{shortName:a,namespacedName:`${b}/${c}/${a}`}:null;return null==a?void 0:a.namespacedName}};
_.dPf=function(a){a:{switch(a.tagFormGroupType){case 0:var b;var c=null==(b=_.jW(a).value)?void 0:b.shortName;break a;case 1:break;case 2:let d;c=null!=(d=XOf(a).value)?d:void 0;break a;default:_.Oc(a.tagFormGroupType,"Invalid tag form group type")}c=void 0}a:{switch(a.tagFormGroupType){case 0:b=_.kW(a).value;break a;case 1:b=null;break a;case 2:b=a.getTagKey();break a;default:_.Oc(a.tagFormGroupType,"Invalid tag form group type")}b=void 0}a:{switch(a.tagFormGroupType){case 0:a=_.kW(a).getTagKeyParent();
break a;case 1:case 2:break;default:_.Oc(a.tagFormGroupType,"Invalid tag form group type")}a=void 0}if(c&&b&&a)return{shortName:c,keyShortName:b.shortName,keyName:b.name,keyNamespacedName:b.namespacedName,keyParent:a}};
ePf=function(a){const b=[],c=[],d=new Map;for(const f of a)switch(a=f.tagFormGroupType,a){case 1:b.push(f);break;case 2:c.push(f);break;case 0:a=f;var e=_.kW(a).getTagKeyParent();e=_.pbe(e);d.has(e)||d.set(e,[]);d.get(e).push(a);break;default:_.Oc(a,"Invalid tag form group type")}return{manualEntryGroups:b,namespacedManualEntryGroups:c,keyParentFormGroups:[...d.entries()].map(([f,g])=>({tagKeyParent:_.iW(f),formGroups:g}))}};
fPf=function(a){a&1&&(_.K(0,"mat-option",9),_.U(1),_.W(2,"toNonBreakingSpaces"),_.L());a&2&&(a=_.S(3),_.I("value",a.value),_.B(),_.V(" ",_.X(2,2,a.value.shortName)," "))};gPf=function(a){a&1&&(_.N(0),_.H(1,fPf,3,4,"mat-option",8),_.M(2,"mat-option"),_.O());a&2&&(a=_.S(2),_.B(),_.I("ngIf",a.value))};hPf=function(a){a&1&&(_.K(0,"mat-option",13),_.U(1),_.L());a&2&&(a=_.S(5),_.I("ve",a.ve.TagDropdownEmptyMessage)("veImpression",!0)("disabled",!0),_.B(),_.V(" ",a.emptyStateText," "))};
iPf=function(a){a&1&&_.Lg(0,18);a&2&&(a=_.S().ngVar,_.I("tagFormReason",a))};
jPf=function(a,b){a&1&&(_.K(0,"mat-option",16),_.H(1,iPf,1,1,"ng-template",null,3,_.zh),_.M(3,"cfc-select-rich-option",17),_.W(4,"toNonBreakingSpaces"),_.L());if(a&2){a=b.ngVar;b=_.hh(2);const c=_.S().$implicit,d=_.S(6);_.I("cfcDisable",c.name!==(null==d.value?null:d.value.name)&&void 0!==a)("ve",d.ve.TagDropdownOption)("veClick",!0)("cfcDisableTooltip",b)("cfcDisableTooltipRich",!0)("cfcDisableTooltipPosition",d.disabledTooltipPosition)("value",c);_.B(3);_.I("primary",_.X(4,9,c.shortName))("secondary",
c.description)}};kPf=function(a,b){a&1&&(_.N(0),_.H(1,jPf,5,11,"mat-option",15),_.W(2,"tagOptionDisabledReason"),_.O());a&2&&(a=b.$implicit,b=_.S(6),_.B(),_.I("ngVar",_.vh(2,1,a,b.disabledOptionsMatcher)))};lPf=function(a){a&1&&_.H(0,kPf,3,4,"ng-container",14);a&2&&(a=_.S(2).ngIf,_.I("ngForOf",a.values))};mPf=function(a){a&1&&(_.N(0),_.H(1,hPf,2,4,"mat-option",12)(2,lPf,1,1,"ng-template",null,2,_.zh),_.O());if(a&2){a=_.hh(3);const b=_.S().ngIf;_.B();_.I("ngIf",0===b.values.length)("ngIfElse",a)}};
nPf=function(a){a&1&&(_.K(0,"mat-option",13),_.U(1),_.L());a&2&&(a=_.S(4),_.I("ve",a.ve.TagDropdownLoadingMessage)("veImpression",!0)("disabled",!0),_.B(),_.V(" ",a.loadingText," "))};oPf=function(a){a&1&&(_.K(0,"mat-option",13),_.M(1,"cfc-icon",19),_.U(2),_.L());if(a&2){a=_.S().ngIf;const b=_.S(3);_.I("ve",b.ve.TagDropdownLoadingFailedMessage)("veImpression",!0)("disabled",!0);_.B(2);_.V(" ",a.error.displayMessage," ")}};
pPf=function(a,b){a&1&&(_.N(0)(1,6),_.H(2,mPf,4,2,"ng-container",7)(3,nPf,2,4,"mat-option",11)(4,oPf,3,4,"mat-option",11),_.O()());a&2&&(a=b.ngIf,b=_.S(3),_.B(),_.I("ngSwitch",a.status),_.B(),_.I("ngSwitchCase",b.OptionsStatus.LOADED),_.B(),_.I("ngSwitchCase",b.OptionsStatus.LOADING),_.B(),_.I("ngSwitchCase",b.OptionsStatus.FAILED))};qPf=function(a){a&1&&(_.N(0),_.H(1,pPf,5,4,"ng-container",10),_.W(2,"async"),_.O());a&2&&(a=_.S(2),_.B(),_.I("ngIf",_.X(2,1,a.optionsData$)))};
rPf=function(a,b){if(a&1){const c=_.t();_.K(0,"cfc-select",5,1);_.R("focus",function(){_.v(c);_.S().focus.emit();return _.x(void 0)})("blur",function(){const d=_.v(c).ngIf,e=_.S();1===d.dropdownState&&e.blur.emit();return _.x(void 0)})("onClosed",function(){_.v(c);_.S().dropdownState$.next(1);return _.x(void 0)})("onOpen",function(){_.v(c);const d=_.S();return _.x(d.displayOptions())})("valueChange",function(d){_.v(c);const e=_.S();return _.x(e.updateValue(d))});_.N(2,6);_.H(3,gPf,3,1,"ng-container",
7)(4,qPf,3,3,"ng-container",7);_.O();_.L()}if(a&2){a=b.ngIf;b=_.S();const c=_.hh(3);_.I("formControl",b.ngControl.control)("hasFilter",!0)("comparisonConfig",b.COMPARISON_CONFIG)("cfcDisable",!!b.disabledReason)("cfcDisableTooltip",c)("cfcDisableTooltipRich",!0)("cfcDisableTooltipPosition",b.disabledTooltipPosition)("ve",b.dropdownVe)("veClick",!0)("aria-label",b.ariaLabelText);_.B(2);_.I("ngSwitch",a.dropdownState);_.B();_.I("ngSwitchCase",b.DropDownState.CLOSED);_.B();_.I("ngSwitchCase",b.DropDownState.OPEN)}};
sPf=function(a){a&1&&_.Lg(0,18);a&2&&(a=_.S(),_.I("tagFormReason",a.disabledReason))};tPf=function(a,b){a&1&&(_.K(0,"mat-option",14),_.U(1),_.L());if(a&2){let c;a=b.$implicit;_.I("value",a);_.B();_.V(" ",null!==(c=a.displayName)&&void 0!==c?c:a.id," ")}};uPf=function(a){a&1&&(_.K(0,"cm-error",15),_.P(1,5),_.L())};vPf=function(a,b){return a.displayName&&b.displayName?a.displayName.localeCompare(b.displayName):a.displayName||b.displayName?a.displayName?1:-1:a.id.localeCompare(b.id)};
wPf=function(a){return a.map(b=>{let c;return null==(c=b.key)?void 0:c.parent}).map(b=>_.iW(b)).filter(b=>2===b.resourceType).map(b=>_.Cj(_.pbe(b)))};xPf=function(a){a=_.LGa(a);return null===a||"0"===a?void 0:a};_.yPf=function(a){return[...(new Set(a.filter(b=>!!b).map(b=>b)))]};EPf=function(a,b){return a?new _.zPf({metadata:{}},new _.APf({tagKeyParent:a}),new _.ZOf({tagValueDropdownDisabledReason:new _.BPf},{disabled:!0,value:void 0})):b?new CPf:new _.DPf({metadata:{}},new _.Sl(null))};
FPf=function(a){var b=new Map;for(const c of a){a=_.bPf(c);if(!a)continue;b.has(a)||b.set(a,{name:a,count:0});a=b.get(a);a.count++;let d;a.shortNameRepresentation=null!=(d=a.shortNameRepresentation)?d:_.dPf(c)}b=new Map([...b.values()].filter(c=>1<c.count).map(c=>[c.name,c]));return 0===b.size?null:{duplicateTagValues:b}};GPf=function(a,b){if(a&&(a=a.duplicateTagValues)&&(b=_.aPf(b)))return a.get(b)};
HPf=function(a){var b=new Map;for(const c of a){a=cPf(_.YOf(c));if(!a)continue;b.has(a)||b.set(a,{namespacedName:a,count:0});a=b.get(a);a.count++;let d;a.shortNameRepresentation=null!=(d=a.shortNameRepresentation)?d:_.dPf(c)}b=new Map([...b.values()].filter(c=>1<c.count).map(c=>[c.namespacedName,c]));return 0===b.size?null:{duplicateNamespacedTagValues:b}};IPf=function(a,b){if(a&&(a=a.duplicateNamespacedTagValues)&&(b=cPf(b)))return a.get(b)};
KPf=function(a){if(a&1){const b=_.t();_.K(0,"cfc-menu-item",7);_.W(1,"isDropdownChangeDisabled");_.R("click",function(){_.v(b);const c=_.S(2);return _.x(JPf(c,c.tagFormGroup))});_.L()}a&2&&(a=_.S(2),_.I("ve",a.ve.TagsEditOptionsSwitchOrganizationMenuItem)("veClick",!0)("cfcDisable",_.X(1,4,a.tagFormGroup))("cfcDisableTooltip",a.MSG_SWITCH_ORGS_NOT_AVAILABLE))};
MPf=function(a){if(a&1){const b=_.t();_.K(0,"cfc-menu-section")(1,"cfc-menu-item",5);_.W(2,"isDropdownChangeDisabled");_.R("click",function(){_.v(b);const c=_.S();return _.x(LPf(c,c.tagFormGroup))});_.L();_.H(3,KPf,2,6,"cfc-menu-item",6);_.L()}a&2&&(a=_.S(),_.B(),_.I("ve",a.ve.TagsEditOptionsManualEntryMenuItem)("veClick",!0)("cfcDisable",_.X(2,5,a.tagFormGroup))("cfcDisableTooltip",a.MSG_MANUAL_ENTRY_NOT_AVAILABLE),_.B(2),_.I("ngIf",1<a.organizations.length))};
OPf=function(a){if(a&1){const b=_.t();_.K(0,"cfc-menu-section")(1,"cfc-menu-item",8);_.R("click",function(){_.v(b);const c=_.S();return _.x(NPf(c,c.tagFormGroup))});_.L()()}a&2&&(a=_.S(),_.B(),_.I("ve",a.ve.TagsEditOptionsSelectFromListMenuItem)("veClick",!0)("cfcDisable",0===a.organizations.length))};PPf=function(a){a&1&&_.Lg(0,17);a&2&&(a=_.S(2),_.I("tagFormReason",a.addDisabledReason))};
QPf=function(a){a&1&&(_.K(0,"cfc-form-stack-description"),_.Lg(1,18),_.L());a&2&&(a=_.S(2),_.B(),_.I("ngTemplateOutlet",a.formStackDescription.templateRef))};RPf=function(a){a&1&&_.Lg(0,17);a&2&&(a=_.S().$implicit,_.I("tagFormReason",a.deleteDisabledReason))};SPf=function(a){a&1&&(_.K(0,"cm-error",28),_.P(1,4),_.L())};
UPf=function(a){if(a&1){const b=_.t();_.K(0,"cfc-form-stack-input-wrapper")(1,"mat-form-field")(2,"mat-label");_.M(3,"cfc-form-stack-field-label",25);_.L();_.K(4,"input",26);_.R("blur",function(){_.v(b);_.S(3).onTouched();return _.x(void 0)});_.L();_.H(5,SPf,2,0,"cm-error",27);_.L()()}a&2&&(_.B(5),_.I("cfcDebounceErrorFor",_.qh(1,TPf)))};VPf=function(a,b){a&1&&(_.K(0,"div"),_.M(1,"tag-key-parent-display",35),_.L());a&2&&(a=b.ngIf,_.B(),_.I("tagKeyParent",a))};
WPf=function(a){a&1&&(_.K(0,"span",36),_.U(1),_.L());a&2&&(a=_.S().ngIf,_.B(),_.V(" ",a.description," "))};XPf=function(a,b){a&1&&(_.K(0,"mat-hint",33),_.H(1,VPf,2,1,"div",15)(2,WPf,2,1,"span",34),_.L());a&2&&(a=b.ngIf,_.B(),_.I("ngIf",a.tagKeyParent),_.B(),_.I("ngIf",a.description))};YPf=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,5),_.L());a&2&&(a=_.S(5),_.I("ve",a.ve.TagsEditKeyRequiredError)("veImpression",!0))};
ZPf=function(a){if(a&1){const b=_.t();_.K(0,"mat-form-field")(1,"mat-label");_.M(2,"cfc-form-stack-field-label",29);_.L();_.K(3,"tag-key-dropdown",30);_.W(4,"async");_.R("blur",function(){_.v(b);_.S(4).onTouched();return _.x(void 0)});_.L();_.H(5,XPf,3,2,"mat-hint",31);_.W(6,"tagKeyAdditionalInfo");_.W(7,"async");_.H(8,YPf,2,2,"cm-error",32);_.L()}if(a&2){a=_.S(2).$implicit;const b=_.S().ngIf,c=_.S();_.B(3);_.I("disabledOptionsMatcher",_.X(4,4,c.keyDisabledOptionsMatcher$))("optionsFilterPredicate",
c.tagKeyOptionsFilterPredicate);_.B(2);_.I("ngIf",_.X(7,9,_.vh(6,6,_.kW(a),b.defaultTagKeyParent)));_.B(3);_.I("cfcDebounceErrorFor","required")}};$Pf=function(a){a&1&&(_.K(0,"mat-form-field")(1,"mat-label"),_.M(2,"cfc-form-stack-field-label",38),_.L(),_.M(3,"input",39),_.L());a&2&&(_.B(3),_.I("cfcDisable",!0))};aQf=function(a){a&1&&(_.K(0,"cm-error",28),_.P(1,6),_.L())};
cQf=function(a){if(a&1){const b=_.t();_.K(0,"mat-form-field")(1,"mat-label");_.M(2,"cfc-form-stack-field-label",40);_.L();_.K(3,"input",41);_.R("blur",function(){_.v(b);_.S(4).onTouched();return _.x(void 0)});_.L();_.H(4,aQf,2,0,"cm-error",27);_.L()}a&2&&(_.B(4),_.I("cfcDebounceErrorFor",_.qh(1,bQf)))};
dQf=function(a){a&1&&(_.K(0,"cfc-form-stack-input-wrapper",21),_.H(1,ZPf,9,11,"mat-form-field",22)(2,$Pf,4,1,"mat-form-field",22)(3,cQf,5,2,"mat-form-field",22),_.L());if(a&2){a=_.S().$implicit;const b=_.S(2);_.I("ngSwitch",a.tagFormGroupType);_.B();_.I("ngSwitchCase",b.TagFormGroupType.DROPDOWN);_.B();_.I("ngSwitchCase",b.TagFormGroupType.MANUAL);_.B();_.I("ngSwitchCase",b.TagFormGroupType.MANUAL_NAMESPACED)}};
eQf=function(a,b){a&1&&(_.K(0,"mat-hint",33),_.U(1),_.L());a&2&&(a=b.ngIf,_.B(),_.V(" ",a," "))};fQf=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,7),_.L());a&2&&(a=_.S(4),_.I("ve",a.ve.TagsEditValueRequiredError)("veImpression",!0))};iQf=function(a){a&1&&(_.K(0,"cm-error",37),_.Lg(1,46),_.L());if(a&2){a=_.S(2).$implicit;const b=_.S(2),c=_.hh(3);_.I("ve",b.ve.TagsEditDuplicateValueError)("veImpression",!0);_.B();_.I("ngTemplateOutlet",c)("ngTemplateOutletContext",_.rh(4,gQf,hQf(b,_.jW(a))))}};
jQf=function(a){a&1&&(_.K(0,"cm-error",37),_.Lg(1,46),_.L());if(a&2){a=_.S().$implicit;const b=_.S(2).$implicit;_.I("ve",a.errorVeId)("veImpression",!0);_.B();_.I("ngTemplateOutlet",a.templateRef)("ngTemplateOutletContext",_.rh(4,gQf,_.jW(b).getError(a.valueDropdownCustomErrorName)))}};kQf=function(a,b){a&1&&(_.N(0,47),_.H(1,jQf,2,6,"cm-error",32),_.O());a&2&&(a=b.$implicit,_.B(),_.I("cfcDebounceErrorFor",a.valueDropdownCustomErrorName))};
mQf=function(a){if(a&1){const b=_.t();_.K(0,"mat-form-field")(1,"mat-label");_.M(2,"cfc-form-stack-field-label",42);_.L();_.K(3,"tag-value-dropdown",43);_.R("blur",function(){_.v(b);_.S(3).onTouched();return _.x(void 0)});_.L();_.H(4,eQf,2,1,"mat-hint",31);_.W(5,"tagControlDescription");_.W(6,"async");_.H(7,fQf,2,2,"cm-error",32)(8,iQf,2,6,"cm-error",44)(9,kQf,2,1,"ng-container",45);_.L()}if(a&2){let b;a=_.S().$implicit;const c=_.S(2);_.B(3);_.I("errorStateMatcher",c.tagValueErrorMatcher);_.B();_.I("ngIf",
_.X(6,7,_.X(5,5,_.jW(a))));_.B(3);_.I("cfcDebounceErrorFor","required");_.B();_.I("cfcDebounceErrorIf",void 0!==hQf(c,_.jW(a)));_.B();_.I("ngForOf",null!==(b=c.valueDropdownCustomErrors)&&void 0!==b?b:_.qh(9,lQf))}};nQf=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,9),_.L());a&2&&(a=_.S(4),_.I("ve",a.ve.TagsEditValuePositiveIntegerError)("veImpression",!0))};
oQf=function(a){a&1&&(_.K(0,"cm-error",37),_.Lg(1,46),_.L());if(a&2){a=_.S(2).$implicit;const b=_.S(2),c=_.hh(3);_.I("ve",b.ve.TagsEditDuplicateValueError)("veImpression",!0);_.B();_.I("ngTemplateOutlet",c)("ngTemplateOutletContext",_.rh(4,gQf,hQf(b,a.get("valueId"))))}};
pQf=function(a){a&1&&(_.K(0,"cm-error",37),_.Lg(1,46),_.L());if(a&2){a=_.S().$implicit;const b=_.S(2).$implicit;_.I("ve",a.errorVeId)("veImpression",!0);_.B();_.I("ngTemplateOutlet",a.templateRef)("ngTemplateOutletContext",_.rh(4,gQf,b.get("valueId").getError(a.valueManualEntryCustomErrorName)))}};qQf=function(a,b){a&1&&(_.N(0,47),_.H(1,pQf,2,6,"cm-error",32),_.O());a&2&&(a=b.$implicit,_.B(),_.I("cfcDebounceErrorFor",a.valueManualEntryCustomErrorName))};
sQf=function(a){if(a&1){const b=_.t();_.K(0,"mat-form-field")(1,"mat-label");_.M(2,"cfc-form-stack-field-label",48);_.L();_.K(3,"input",49);_.R("blur",function(){_.v(b);_.S(3).onTouched();return _.x(void 0)});_.L();_.H(4,nQf,2,2,"cm-error",32)(5,oQf,2,6,"cm-error",44)(6,qQf,2,1,"ng-container",45);_.K(7,"span",50);_.P(8,8);_.L()()}if(a&2){let b;a=_.S().$implicit;const c=_.S(2);_.B(3);_.I("ve",c.ve.TagsEditManualEntryInput)("veInputText",!0)("errorStateMatcher",c.tagValueErrorMatcher);_.B();_.I("cfcDebounceErrorFor",
_.qh(6,rQf));_.B();_.I("cfcDebounceErrorIf",void 0!==hQf(c,a.get("valueId")));_.B();_.I("ngForOf",null!==(b=c.valueManualEntryCustomErrors)&&void 0!==b?b:_.qh(7,lQf))}};tQf=function(a){a&1&&(_.K(0,"cm-error",28),_.P(1,10),_.L())};uQf=function(a){a&1&&(_.K(0,"cm-error",37),_.Lg(1,46),_.L());if(a&2){a=_.S(2).$implicit;const b=_.S(2),c=_.hh(3);_.I("ve",b.ve.TagsEditDuplicateValueError)("veImpression",!0);_.B();_.I("ngTemplateOutlet",c)("ngTemplateOutletContext",_.rh(4,gQf,hQf(b,XOf(a))))}};
vQf=function(a){if(a&1){const b=_.t();_.K(0,"mat-form-field")(1,"mat-label");_.M(2,"cfc-form-stack-field-label",51);_.L();_.K(3,"input",52);_.R("blur",function(){_.v(b);_.S(3).onTouched();return _.x(void 0)});_.L();_.H(4,tQf,2,0,"cm-error",27)(5,uQf,2,6,"cm-error",44);_.L()}if(a&2){a=_.S().$implicit;const b=_.S(2);_.B(3);_.I("errorStateMatcher",b.tagValueErrorMatcher);_.B();_.I("cfcDebounceErrorFor",_.qh(3,bQf));_.B();_.I("cfcDebounceErrorIf",void 0!==hQf(b,XOf(a)))}};
xQf=function(a,b){a&1&&(_.K(0,"cfc-form-stack-input-wrapper",53),_.Lg(1,46),_.L());if(a&2){a=b.$implicit;var c=_.S();b=c.$implicit;c=c.index;_.I("disableResizing",a.tagsEditorFormStackInputDisableResizing);_.B();_.I("ngTemplateOutlet",a.templateRef)("ngTemplateOutletContext",_.sh(3,wQf,c,b))}};
AQf=function(a){if(a&1){const b=_.t();_.K(0,"cfc-form-stack-input-wrapper",54)(1,"tags-editor-options",55);_.W(2,"async");_.R("manualEntryRequested",function(){_.v(b);const c=_.S().index,d=_.S(2);var e=1===d.manualInputFormat&&_.Xc(lW);e=d.tagFormGroupCreator(void 0,e);yQf(e);d.formStackFormArray.setControl(c,e);d.changeDetectorRef.detectChanges();d.onTouched();return _.x(void 0)})("keyValueDropdownRequested",function(){_.v(b);const c=_.S().index,d=_.S().ngIf,e=_.S();return _.x(zQf(e,c,d.defaultTagKeyParent))});
_.L()()}if(a&2){let b;a=_.S().$implicit;const c=_.S(2);_.I("disableResizing",!0);_.B();_.I("tagFormGroup",a)("organizations",null!==(b=_.X(2,3,c.tagKeyOrganizationsInternal$))&&void 0!==b?b:_.qh(5,lQf))}};
BQf=function(a,b){a&1&&(_.K(0,"cfc-form-stack-row",19),_.H(1,RPf,1,1,"ng-template",null,3,_.zh)(3,UPf,6,2,"cfc-form-stack-input-wrapper",15)(4,dQf,4,4,"cfc-form-stack-input-wrapper",20),_.K(5,"cfc-form-stack-input-wrapper",21),_.H(6,mQf,10,10,"mat-form-field",22)(7,sQf,9,8,"mat-form-field",22)(8,vQf,6,4,"mat-form-field",22),_.L(),_.H(9,xQf,2,6,"cfc-form-stack-input-wrapper",23)(10,AQf,3,6,"cfc-form-stack-input-wrapper",24),_.L());if(a&2){let c;a=b.$implicit;b=b.index;const d=_.hh(2),e=_.S(2);_.I("deleteButtonDisabled",
!!a.deleteDisabledReason)("deleteDisabledTooltipMessage",d)("formGroupName",b);_.B(3);_.I("ngIf",a.tagFormGroupType===e.TagFormGroupType.MANUAL_NAMESPACED);_.B();_.I("ngIf",e.showKeyInput);_.B();_.I("ngSwitch",a.tagFormGroupType);_.B();_.I("ngSwitchCase",e.TagFormGroupType.DROPDOWN);_.B();_.I("ngSwitchCase",e.TagFormGroupType.MANUAL);_.B();_.I("ngSwitchCase",e.TagFormGroupType.MANUAL_NAMESPACED);_.B();_.I("ngForOf",null!==(c=e.additionalFormStackInputs)&&void 0!==c?c:_.qh(11,lQf));_.B();_.I("ngIf",
!e.hideEditorOptions)}};
DQf=function(a){if(a&1){const b=_.t();_.K(0,"form",13)(1,"cfc-form-stack",14,1);_.R("onRowAddition",function(){_.v(b);_.S().onTouched();return _.x(void 0)})("onRowAdditionRequested",function(){const c=_.v(b).ngIf,d=_.S();return _.x(CQf(d,c.defaultTagKeyParent))})("onRowRemoval",function(){_.v(b);_.S().onTouched();return _.x(void 0)});_.H(3,PPf,1,1,"ng-template",null,2,_.zh)(5,QPf,2,1,"cfc-form-stack-description",15)(6,BQf,11,12,"cfc-form-stack-row",16);_.L()()}if(a&2){a=_.hh(4);const b=_.S();_.I("formGroup",
b.mainFormGroup);_.B();_.I("externalTitleId",b.externalTitleId)("ve",b.ve.TagsEditFormStack)("veImpression",!0)("addDisabled",!!b.addDisabledReason)("addDisabledTooltipMessage",a);_.B(4);_.I("ngIf",b.formStackDescription);_.B();_.I("ngForOf",b.formStackFormArray.controls)}};EQf=function(a,b){a&1&&(_.P(0,11),_.W(1,"duplicateValueName"));a&2&&(a=b.error,_.B(),_.Sg(_.X(1,1,a)),_.Tg(0))};FQf=function(a){return a.map(b=>{if(void 0!==b.key&&void 0!==b.value){let c;return null==(c=b.key)?void 0:c.name}}).filter(_.Dl)};
GQf=function(a){return a.map(b=>{if(void 0!==b.key&&void 0!==b.value){let c;return null==(c=b.key)?void 0:c.namespacedName}if(b.parent&&b.keyShortName&&b.valueShortName)return`${b.parent}/${b.keyShortName}`}).filter(_.Dl)};HQf=function(a){const b=FPf(a.controls.map(c=>c));a=HPf(a.controls.map(c=>c));return _.Xc(lW)?Object.assign({},b,a):b};JQf=function(){return a=>{const b=_.Lbe.test(a.value),c=_.Mbe.test(a.value),d=IQf.test(a.value);return b||c||d?null:{invalidParent:{value:a.value}}}};
KQf=function(){return a=>a.value&&_.NOf(a.value)?null:{invalidShortName:{value:a.value}}};
yQf=function(a){switch(a.tagFormGroupType){case 0:_.kW(a).addValidators(_.Mo);_.jW(a).addValidators(_.Mo);_.kW(a).updateValueAndValidity();_.jW(a).updateValueAndValidity();break;case 1:let b;null==(b=a.get("valueId"))||b.addValidators([_.Mo,_.tk("[1-9][0-9]{0,18}")]);a.updateValueAndValidity();break;case 2:let c;null==(c=a.get("parent"))||c.addValidators([_.Mo,JQf()]);let d;null==(d=a.get("keyShortName"))||d.addValidators([_.Mo,KQf()]);let e;null==(e=a.get("valueShortName"))||e.addValidators([_.Mo,
KQf()]);a.updateValueAndValidity();break;default:_.Oc(a.tagFormGroupType,"Invalid tag form group type")}};LQf=function(a){const b=a.getResourceType();switch(b){case 0:case 2:return{resourceType:b,id:a.getResourceId()}}};MQf=function(a){a&1&&(_.N(0),_.P(1,3),_.O())};NQf=function(a){a&1&&(_.N(0),_.P(1,4),_.O())};OQf=function(a){a&1&&_.Lg(0)};PQf=function(a){a&1&&_.Lg(0)};QQf=function(a){a&1&&(_.N(0),_.P(1,5),_.O())};RQf=function(a){a&1&&(_.N(0),_.P(1,6),_.O())};
SQf=function(a){a&1&&(_.N(0),_.P(1,7),_.O())};TQf=function(a){a&1&&(_.N(0),_.P(1,8),_.O())};UQf=function(a){a&1&&(_.N(0),_.P(1,9),_.O())};VQf=function(a){a&1&&(_.N(0),_.P(1,10),_.O())};WQf=function(a){a&1&&(_.K(0,"cm-error",29),_.H(1,UQf,2,0,"ng-container",15)(2,VQf,2,0,"ng-container",15),_.L());if(a&2){a=_.S(2).ngIf;const b=_.S();_.I("ngSwitch",a.resourceType);_.B();_.I("ngSwitchCase",b.ResourceType.ORGANIZATIONS);_.B();_.I("ngSwitchCase",b.ResourceType.PROJECTS)}};
XQf=function(a){a&1&&(_.N(0),_.P(1,11),_.O())};YQf=function(a){a&1&&(_.N(0),_.P(1,12),_.O())};ZQf=function(a){a&1&&(_.K(0,"cm-error",29),_.H(1,XQf,2,0,"ng-container",15)(2,YQf,2,0,"ng-container",15),_.L());if(a&2){a=_.S(2).ngIf;const b=_.S();_.I("ngSwitch",a.resourceType);_.B();_.I("ngSwitchCase",b.ResourceType.ORGANIZATIONS);_.B();_.I("ngSwitchCase",b.ResourceType.PROJECTS)}};$Qf=function(a){a&1&&(_.N(0),_.U(1,"organizations/"),_.O())};aRf=function(a){a&1&&(_.N(0),_.U(1,"projects/"),_.O())};
bRf=function(a){a&1&&(_.K(0,"p",23),_.H(1,QQf,2,0,"ng-container",15)(2,RQf,2,0,"ng-container",15),_.L(),_.K(3,"form",24)(4,"mat-form-field")(5,"mat-label",25),_.H(6,SQf,2,0,"ng-container",15)(7,TQf,2,0,"ng-container",15),_.L(),_.M(8,"input",26),_.W(9,"tagKeyParentIdPlaceholder"),_.H(10,WQf,3,3,"cm-error",27)(11,ZQf,3,3,"cm-error",27),_.K(12,"span",28),_.H(13,$Qf,2,0,"ng-container",15)(14,aRf,2,0,"ng-container",15),_.L()()());if(a&2){a=_.S().ngIf;const b=_.S();_.I("ngSwitch",a.resourceType);_.B();
_.I("ngSwitchCase",b.ResourceType.ORGANIZATIONS);_.B();_.I("ngSwitchCase",b.ResourceType.PROJECTS);_.B();_.I("formGroup",b.form);_.B(2);_.I("ngSwitch",a.resourceType);_.B();_.I("ngSwitchCase",b.ResourceType.ORGANIZATIONS);_.B();_.I("ngSwitchCase",b.ResourceType.PROJECTS);_.B();_.I("placeholder",_.X(9,15,a.resourceType))("ve",b.ve.TagKeyParentManualEntryInput)("veInputText",!0);_.B(2);_.I("cfcDebounceErrorFor","required");_.B();_.I("cfcDebounceErrorFor","invalidKeyParentIdFormat");_.B();_.I("ngSwitch",
a.resourceType);_.B();_.I("ngSwitchCase",b.ResourceType.ORGANIZATIONS);_.B();_.I("ngSwitchCase",b.ResourceType.PROJECTS)}};
cRf=function(a,b){if(a&1){const c=_.t();_.N(0);_.K(1,"h1",14);_.H(2,MQf,2,0,"ng-container",15)(3,NQf,2,0,"ng-container",15);_.L();_.K(4,"div",16)(5,"mat-tab-group",17);_.R("selectedIndexChange",function(d){_.v(c);const e=_.S();return _.x(e.onTabChange(d))});_.K(6,"mat-tab",18);_.H(7,OQf,1,0,"ng-container",19);_.L();_.K(8,"mat-tab",20);_.H(9,PQf,1,0,"ng-container",19);_.L()();_.H(10,bRf,15,17,"ng-template",null,0,_.zh);_.L();_.K(12,"div",21)(13,"button",22);_.R("click",function(){_.v(c);const d=_.S();
return _.x(d.onCancel())});_.P(14,1);_.L();_.K(15,"button",22);_.R("click",function(){const d=_.v(c).ngIf,e=_.S();return _.x(e.onSave(d.resourceType))});_.P(16,2);_.L()();_.O()}if(a&2){a=b.ngIf;b=_.hh(11);const c=_.S();_.B();_.I("ngSwitch",a.resourceType);_.yg("cdkFocusInitial",!0);_.B();_.I("ngSwitchCase",c.ResourceType.ORGANIZATIONS);_.B();_.I("ngSwitchCase",c.ResourceType.PROJECTS);_.B(2);_.I("selectedIndex",a.tabIndex);_.B();_.I("ve",c.ve.TagKeyParentManualEntryOrganizationIdTab)("veClick",!0);
_.B();_.I("ngTemplateOutlet",b);_.B();_.I("ve",c.ve.TagKeyParentManualEntryProjectIdTab)("veClick",!0);_.B();_.I("ngTemplateOutlet",b);_.B(4);_.I("ve",c.ve.TagKeyParentManualEntryDialogCancel)("veClick",!0);_.B(2);_.I("ve",c.ve.TagKeyParentManualEntryDialogSave)("veClick",!0)}};dRf=function(a){return b=>{if(!b.value)return null;let c=!1;switch(a){case 2:c=_.Lbe.test(b.value);break;case 0:c=_.Mbe.test(b.value);break;default:_.Oc(a,"invalid tag key parent resource type")}return c?null:{invalidKeyParentIdFormat:!0}}};
eRf=function(a){a&1&&_.Lg(0,14);a&2&&(a=_.S(),_.I("ngTemplateOutlet",a.formStackDescription.templateRef))};fRf=function(a,b){a&1&&_.M(0,"tag-key-parent-display",19);a&2&&_.I("tagKeyParent",b.ngIf)("showInaccessibleTooltip",!0)};gRf=function(a){a&1&&(_.K(0,"span"),_.P(1,7),_.L())};iRf=function(a,b){a&1&&_.Lg(0,21);if(a&2){a=b.group;b=b.index;const c=_.S().$implicit;_.I("ngTemplateOutlet",c.templateRef)("ngTemplateOutletContext",_.sh(2,hRf,b,a))}};
jRf=function(a,b){a&1&&_.H(0,iRf,1,5,"ng-template",20);a&2&&_.I("tagsEditorFormStackInputDisableResizing",b.$implicit.tagsEditorFormStackInputDisableResizing)};lRf=function(a,b){a&1&&_.Lg(0,21);a&2&&(a=b.error,b=_.S().$implicit,_.I("ngTemplateOutlet",b.templateRef)("ngTemplateOutletContext",_.rh(2,kRf,a)))};mRf=function(a,b){a&1&&_.H(0,lRf,1,4,"ng-template",22);a&2&&(a=b.$implicit,_.I("valueDropdownCustomErrorName",a.valueDropdownCustomErrorName)("errorVeId",a.errorVeId))};
nRf=function(a,b){a&1&&_.Lg(0,21);a&2&&(a=b.error,b=_.S().$implicit,_.I("ngTemplateOutlet",b.templateRef)("ngTemplateOutletContext",_.rh(2,kRf,a)))};oRf=function(a,b){a&1&&_.H(0,nRf,1,4,"ng-template",23);a&2&&(a=b.$implicit,_.I("valueManualEntryCustomErrorName",a.valueManualEntryCustomErrorName)("errorVeId",a.errorVeId))};
qRf=function(a,b){a&1&&(_.N(0),_.K(1,"fieldset",15)(2,"legend",16),_.H(3,fRf,1,2,"tag-key-parent-display",17),_.W(4,"toTagKeyParent"),_.H(5,gRf,2,0,"ng-template",null,2,_.zh),_.L(),_.K(7,"tags-editor",18,3),_.W(9,"duplicateTagValueMatcher"),_.W(10,"async"),_.W(11,"toTagKeyParent"),_.W(12,"observableOf"),_.W(13,"observableOf"),_.W(14,"showTagKey"),_.H(15,jRf,1,1,null,12)(16,mRf,1,2,null,12)(17,oRf,1,2,null,12),_.L()(),_.O());if(a&2){let c,d,e,f;a=b.$implicit;b=b.index;const g=_.hh(6),n=_.S();_.B(2);
_.Xg("id","edit-tags-title-",b,"");_.B();_.I("ngIf",_.X(4,21,a))("ngIfElse",g);_.B(4);_.Xg("externalTitleId","edit-tags-title-",b,"");_.I("formControlName",b)("hideEditorOptions",!0)("addDisabledReason",n.addDisabledReason)("duplicateTagValueMatcher",null!==(c=_.X(10,26,_.vh(9,23,n.tagEditorsFormArray,n.manualInputFormat)))&&void 0!==c?c:void 0)("tagFormGroupCreator",n.tagFormGroupCreator)("defaultTagKeyParent$",_.X(12,30,_.X(11,28,a)))("tagKeyOptionsFilterPredicate",n.tagKeyOptionsFilterPredicate)("tagKeyOrganizations$",
_.X(13,32,_.qh(36,pRf)))("showKeyInput",_.X(14,34,a))("disallowDuplicateKeyReason",n.disallowDuplicateKeyReason)("disabledTagKeyOptionsMatcher",n.disabledTagKeyOptionsMatcher)("manualInputFormat",n.manualInputFormat);_.B(8);_.I("ngForOf",null!==(d=n.additionalFormStackInputs)&&void 0!==d?d:_.qh(37,pRf));_.B();_.I("ngForOf",null!==(e=n.valueDropdownCustomErrors)&&void 0!==e?e:_.qh(38,pRf));_.B();_.I("ngForOf",null!==(f=n.valueManualEntryCustomErrors)&&void 0!==f?f:_.qh(39,pRf))}};
sRf=function(a,b){if(a&1){const c=_.t();_.K(0,"cfc-split-button",24)(1,"button",25);_.R("click",function(){_.v(c);const d=_.S();return _.x(rRf(d))});_.P(2,8);_.L()()}if(a&2){a=b.ngIf;b=_.S();const c=_.hh(7),d=_.hh(9);_.I("menuTemplate",d)("menuTemplateData",a)("raised",!0);_.B();_.I("ve",b.ve.TagsEditorV2PurviewPickerButton)("veClick",!0)("cfcDisable",!!b.addDisabledReason)("cfcDisableTooltip",c)("cfcDisableTooltipRich",!0)}};tRf=function(a){a&1&&_.Lg(0,26);a&2&&(a=_.S(),_.I("tagFormReason",a.addDisabledReason))};
uRf=function(a){a&1&&_.Lg(0,26);a&2&&(a=_.S().$implicit,_.I("tagFormReason",a.disabledReason))};
wRf=function(a,b){if(a&1){const c=_.t();_.N(0);_.K(1,"cfc-menu-item",37);_.R("click",function(){const d=_.v(c).$implicit,e=_.S(3);return _.x(vRf(e,d.tagKeyParent))});_.L();_.H(2,uRf,1,1,"ng-template",null,6,_.zh);_.O()}a&2&&(a=b.$implicit,b=_.hh(3),_.B(),_.I("label",a.itemLabel)("note",a.itemNote)("ve",a.veId)("veClick",!0)("cfcDisable",!!a.disabledReason)("cfcDisableTooltip",b)("cfcDisableTooltipRich",!0))};
xRf=function(a){a&1&&(_.K(0,"cfc-menu-section",36),_.H(1,wRf,4,7,"ng-container",12),_.L());a&2&&(a=_.S().$implicit,_.I("hasSeparator",!0),_.B(),_.I("ngForOf",a.currentScopeItems))};yRf=function(a){a&1&&_.Lg(0,26);a&2&&(a=_.S().$implicit,_.I("tagFormReason",a.manualEntry.disabledReason))};
DRf=function(a,b){if(a&1){const c=_.t();_.K(0,"cfc-menu",27);_.H(1,xRf,2,2,"cfc-menu-section",28);_.K(2,"cfc-menu-section",29);_.M(3,"cfc-menu-item",30);_.L()();_.K(4,"cfc-menu",31,4)(6,"cfc-menu-section",32)(7,"cfc-menu-item",33);_.R("click",function(){_.v(c);const d=_.S();return _.x(zRf(d,d.ResourceType.ORGANIZATIONS))});_.L();_.K(8,"cfc-menu-item",34);_.R("click",function(){_.v(c);const d=_.S();return _.x(zRf(d,d.ResourceType.PROJECTS))});_.L();_.K(9,"cfc-menu-item",35);_.R("click",function(){_.v(c);
const d=_.S();d.tagEditorsFormArray.push(1===d.manualInputFormat&&d.namespacedNamesEnabled?new ARf([d.tagFormGroupCreator(void 0,!0)]):new BRf([d.tagFormGroupCreator(void 0,!1)]));CRf(d);return _.x(void 0)});_.L()()();_.H(10,yRf,1,1,"ng-template",null,5,_.zh)}if(a&2){a=b.$implicit;b=_.hh(5);const c=_.hh(11),d=_.S(),e=_.hh(7);_.B();_.I("ngIf",0<a.currentScopeItems.length);_.B(2);_.I("cfcMenuTriggerFor",b);_.B(4);_.I("ve",d.ve.TagsEditorV2OrganizationIdMenuItem)("veClick",!0)("cfcDisable",!!d.addDisabledReason)("cfcDisableTooltip",
e)("cfcDisableTooltipRich",!0);_.B();_.I("ve",d.ve.TagsEditorV2ProjectIdMenuItem)("veClick",!0)("cfcDisable",!!d.addDisabledReason)("cfcDisableTooltip",e)("cfcDisableTooltipRich",!0);_.B();_.I("ve",d.ve.TagsEditorV2ManualEntryMenuItem)("veClick",!0)("cfcDisable",!!a.manualEntry.disabledReason)("cfcDisableTooltip",c)("cfcDisableTooltipRich",!0)}};ERf=function(a){var b=a.controls.map(c=>c).map(c=>c.value).flat();a=FPf(b);b=HPf(b);return _.Xc(lW)?Object.assign({},a,b):a};
FRf=function(a,b){return a.config.request("GetNamespacedTagKey",'query GetNamespacedTagKey($name: String!) @Signature(bytes: "2/O70ZvDo+jomOkgRdOH9M0yv9evp2/dX7zyYXiXMDWo8=") { tagKeyService { getNamespacedTagKey(name: $name) { createTime description name namespacedName parent purpose purposeData { key value } shortName } } }',b,void 0)};
_.GRf=function(a,b){return FRf(a.tagsGraphqlClient,{name:b}).pipe(_.Mf(),_.A(c=>{let d;return a.wrap(null==c?void 0:null==(d=c.tagKeyService)?void 0:d.getNamespacedTagKey)}),_.WO())};HRf=function(a,b){return a.namespacedKeyCache.get(b,{onCacheMiss:()=>_.GRf(a.keyService,b).pipe(_.A(c=>{if(c instanceof _.Aae)throw c;return c}))})};_.IRf={type:1,path:"/resource-manager/docs/tags/tags-overview"};
JRf={DISPLAY_NAME_FOUND:0,DISPLAY_NAME_NOT_FOUND:1,KEY_PARENT_INACCESSIBLE:2,ERROR_RETRIEVING_KEY_PARENT:3,0:"DISPLAY_NAME_FOUND",1:"DISPLAY_NAME_NOT_FOUND",2:"KEY_PARENT_INACCESSIBLE",3:"ERROR_RETRIEVING_KEY_PARENT"};_.mW=class{constructor(){this.showInaccessibleTooltip=!1;this.TagKeyParentDisplayResultType=JRf;this.IamResourceType=_.B0a}ngOnInit(){}};_.mW.\u0275fac=function(a){return new (a||_.mW)};
_.mW.\u0275cmp=_.m({type:_.mW,selectors:[["tag-key-parent-display"]],inputs:{tagKeyParent:"tagKeyParent",showInaccessibleTooltip:"showInaccessibleTooltip"},decls:4,vars:6,consts:()=>[" You do not have permission to view the organization name. "," You do not have permission to view the project name. ",[3,"resourceType"],[4,"ngIf"],[3,"ngSwitch"],["class","cfc-button-small","ariaLabel","Help with the tag organization","dialogAriaLabel","More info about the tag organization",4,"ngSwitchCase"],["class",
"cfc-button-small","ariaLabel","Help with the tag project","dialogAriaLabel","More info about the tag project",4,"ngSwitchCase"],["ariaLabel","Help with the tag organization","dialogAriaLabel","More info about the tag organization",1,"cfc-button-small"],["ariaLabel","Help with the tag project","dialogAriaLabel","More info about the tag project",1,"cfc-button-small"]],template:function(a,b){a&1&&(_.M(0,"cfc-resource-icon",2),_.H(1,ROf,4,2,"ng-container",3),_.W(2,"tagKeyParentDisplayResult"),_.W(3,
"async"));a&2&&(_.I("resourceType",b.tagKeyParent.resourceType),_.B(),_.I("ngIf",_.X(3,4,_.X(2,2,b.tagKeyParent))))},dependencies:[_.Cr,_.Dr,_.Er,_.iB,_.dM,_.Ir,_.bR],encapsulation:2});KRf={DROPDOWN:0,MANUAL:1,MANUAL_NAMESPACED:2,0:"DROPDOWN",1:"MANUAL",2:"MANUAL_NAMESPACED"};_.APf=class extends _.Sl{constructor(a,b){super(b);this.tagKeyParent$=new _.Sh(a.tagKeyParent);this.tagKeyDropdownReadonlyReason=a.tagKeyDropdownReadonlyReason}getTagKeyParent(){return this.tagKeyParent$.value}};_.BPf=class{toStringReason(){return"No tag key selected."}};
_.ZOf=class extends _.Sl{constructor(a,b){super(b);this.tagKeyId=a.tagKeyId;this.tagKeyNamespacedName=a.tagKeyNamespacedName;this.tagValueDropdownDisabledReason$=this.tagValueDropdownDisabledReasonSubject$=new _.Sh(a.tagValueDropdownDisabledReason);this.tagValueDropdownReadonlyReason=a.tagValueDropdownReadonlyReason}};_.kW=function(a){return a.get("key")};_.jW=function(a){return a.get("value")};
_.zPf=class extends _.Al{constructor(a,b,c){super({key:b,value:c});this.tagFormGroupType=0;this.metadata=a.metadata;this.deleteDisabledReason=a.deleteDisabledReason;_.kW(this).valueChanges.subscribe(d=>{let e;var f=_.jW(this),g=null==(e=_.ZO(null==d?void 0:d.name))?void 0:e.resourceId;d=null==d?void 0:d.namespacedName;if(g!==f.tagKeyId||d!==f.tagKeyNamespacedName)f.tagKeyId=g,f.tagKeyNamespacedName=d,g||d?(f.tagValueDropdownDisabledReasonSubject$.next(void 0),f.enable()):(f.tagValueDropdownDisabledReasonSubject$.next(new _.BPf),
f.disable()),f.setValue(null)})}};_.DPf=class extends _.Al{constructor(a,b){super({valueId:b});this.tagFormGroupType=1;this.metadata=a.metadata}};$Of=class extends _.Sl{constructor(){var a={};super();this.tagParent=a.tagParent;this.tagKeyShortName=a.tagKeyShortName}};XOf=function(a){return a.get("valueShortName")};
CPf=class extends _.Al{constructor(){var a=new _.Sl(null),b=new _.Sl(null),c=new $Of;super({parent:a,keyShortName:b,valueShortName:c});this.tagFormGroupType=2;this.metadata={};this.get("parent").valueChanges.subscribe(d=>{XOf(this).tagParent=null!=d?d:void 0});this.get("keyShortName").valueChanges.subscribe(d=>{XOf(this).tagKeyShortName=null!=d?d:void 0})}getTagKey(){const a=this.get("parent").value,b=this.get("keyShortName").value;return a&&b?{shortName:b,namespacedName:`${a}/${b}`,purpose:"PURPOSE_UNSPECIFIED",
purposeData:[]}:null}};var LRf={LOADED:0,LOADING:1,FAILED:2,0:"LOADED",1:"LOADING",2:"FAILED"};var MRf=new _.Ld("TagsDropdownService"),NRf=class extends Error{constructor(a){super();this.displayMessage=a;Object.setPrototypeOf(this,NRf.prototype)}};_.PRf=class{constructor(a){this.viewContainerRef=a}set tagFormReason(a){this.viewContainerRef.clear();a&&(a.createComponent?a.createComponent(this.viewContainerRef):this.viewContainerRef.createComponent(ORf).instance.reason=a.toStringReason())}};_.PRf.\u0275fac=function(a){return new (a||_.PRf)(_.D(_.ah))};_.PRf.\u0275dir=_.Fd({type:_.PRf,selectors:[["ng-container","tagFormReason",""]],inputs:{tagFormReason:"tagFormReason"}});var ORf=class{ngOnInit(){}};ORf.\u0275fac=function(a){return new (a||ORf)};
ORf.\u0275cmp=_.m({type:ORf,selectors:[["tag-form-reason-default"]],inputs:{reason:"reason"},decls:1,vars:1,template:function(a,b){a&1&&_.U(0);a&2&&_.jh(b.reason)},encapsulation:2});_.nW=class{};_.nW.\u0275fac=function(a){return new (a||_.nW)};_.nW.\u0275mod=_.q({type:_.nW});_.nW.\u0275inj=_.k({});var lW=new _.kr("45620049");var QRf=["select"],RRf=a=>({dropdownState:a}),SRf={OPEN:0,CLOSED:1,0:"OPEN",1:"CLOSED"},TRf={emptyValue:"",compareWith:a=>{if(a&&!Array.isArray(a)){let b;return _.Xc(lW)?a.namespacedName:null!=(b=a.name)?b:""}return""}},URf=class extends _.yx{constructor(a,b){super();this.tagsDropdownService=a;this.ngControl=b;this.ve={TagDropdownEmptyMessage:148265,TagDropdownLoadingFailedMessage:148267,TagDropdownLoadingMessage:148266,TagDropdownOption:148264};this.emptyStateText="No entries";this.loadingText="Loading...";
this.focus=new _.tr;this.blur=new _.tr;this.valueChange=new _.tr;this.dropdownState$=new _.Sh(1);this.DropDownState=SRf;this.OptionsStatus=LRf;this.optionsData$=this.dropdownState$.pipe(_.We(c=>0===c),_.E(()=>this.loadOptions()));this.COMPARISON_CONFIG=TRf;b.valueAccessor=this}ngOnInit(){}ngAfterViewInit(){}writeValue(a){this.value=a}updateValue(a){this.value=a;this.valueChange.emit(a)}onContainerClick(){this.select.onContainerClick()}displayOptions(){this.dropdownState$.next(0)}loadOptions(){return this.tagsDropdownService.loadOptions().pipe(_.A(a=>
a.filter(b=>{let c,d;const e=_.Xc(lW)?(null==(c=this.value)?void 0:c.namespacedName)===b.namespacedName:(null==(d=this.value)?void 0:d.name)===b.name;let f,g;return(null!=(g=null==(f=this.optionsFilterPredicate)?void 0:f.call(this,b))?g:!0)||e})),_.A(a=>({status:0,values:[...a].sort((b,c)=>b.shortName.localeCompare(c.shortName))})),_.dg({status:1}),_.wf(a=>{a=a instanceof NRf?a:new NRf("Failed to load");return _.y({status:2,error:a})}))}};
URf.\u0275fac=function(a){return new (a||URf)(_.D(MRf),_.D(_.Uw,2))};
URf.\u0275cmp=_.m({type:URf,selectors:[["tag-dropdown-base"]],viewQuery:function(a,b){a&1&&_.ch(QRf,5);if(a&2){let c;_.fh(c=_.gh())&&(b.select=c.first)}},inputs:{disabledOptionsMatcher:"disabledOptionsMatcher",optionsFilterPredicate:"optionsFilterPredicate",emptyStateText:"emptyStateText",loadingText:"loadingText",disabledReason:"disabledReason",dropdownVe:"dropdownVe",disabledTooltipPosition:"disabledTooltipPosition",ariaLabelText:"ariaLabelText"},outputs:{focus:"focus",blur:"blur",valueChange:"valueChange"},
features:[_.wg],decls:4,vars:5,consts:[["disabledReasonTemplate",""],["select",""],["displayOptions",""],["disabledOptionReasonTemplate",""],[3,"formControl","hasFilter","comparisonConfig","cfcDisable","cfcDisableTooltip","cfcDisableTooltipRich","cfcDisableTooltipPosition","ve","veClick","aria-label","focus","blur","onClosed","onOpen","valueChange",4,"ngIf"],[3,"focus","blur","onClosed","onOpen","valueChange","formControl","hasFilter","comparisonConfig","cfcDisable","cfcDisableTooltip","cfcDisableTooltipRich",
"cfcDisableTooltipPosition","ve","veClick","aria-label"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"value",4,"ngIf"],[3,"value"],[4,"ngIf"],[3,"ve","veImpression","disabled",4,"ngSwitchCase"],[3,"ve","veImpression","disabled",4,"ngIf","ngIfElse"],[3,"ve","veImpression","disabled"],[4,"ngFor","ngForOf"],["class","cfc-max-width-base cfc-break-word-wrap",3,"cfcDisable","ve","veClick","cfcDisableTooltip","cfcDisableTooltipRich","cfcDisableTooltipPosition","value",4,"ngVar"],[1,"cfc-max-width-base","cfc-break-word-wrap",
3,"cfcDisable","ve","veClick","cfcDisableTooltip","cfcDisableTooltipRich","cfcDisableTooltipPosition","value"],[3,"primary","secondary"],[3,"tagFormReason"],["icon","status-error"]],template:function(a,b){a&1&&(_.H(0,rPf,5,13,"cfc-select",4),_.W(1,"async"),_.H(2,sPf,1,1,"ng-template",null,0,_.zh));a&2&&_.I("ngIf",_.rh(3,RRf,_.X(1,1,b.dropdownState$)))},dependencies:[_.Ox,_.Ny,_.Br,_.Cr,_.Dr,_.Er,_.Vy,_.qz,_.tu,_.rz,_.Ww,_.gx,_.mz,_.lz,_.Wt,_.pz,_.VB,_.PRf,_.Ir,_.eR,_.NIe],encapsulation:2,changeDetection:0});
var VRf=class{};VRf.\u0275fac=function(a){return new (a||VRf)};VRf.\u0275mod=_.q({type:VRf});VRf.\u0275inj=_.k({imports:[_.Dz,_.Qr,_.Zz,_.fR,_.Cu,_.sz,_.rx,_.XB,_.dR,_.nW]});var WRf=["tagDropdownBase"],XRf=0,YRf=class{constructor(a){this.tagKeyValueCache=a}loadOptions(){let a;const b=null==(a=this.ngControl)?void 0:a.control;return _.bce(this.tagKeyValueCache,b.getTagKeyParent()).pipe(_.A(c=>c.map(d=>({description:d.description,name:d.resourceName,shortName:d.shortName,purpose:d.purpose,purposeData:d.purposeData,namespacedName:d.namespacedName}))),_.wf(c=>403===c.statusCode?_.ye(new NRf("Insufficient permission to list keys")):_.ye(c)))}};
YRf.\u0275fac=function(a){return new (a||YRf)(_.l(_.cce))};YRf.\u0275prov=_.h({token:YRf,factory:YRf.\u0275fac});
var ZRf=class extends _.zx{constructor(a,b,c,d){super("tag-key-dropdown",c,XRf++,null);this.defaultErrorStateMatcher=a;this.parentFormGroup=b;this.ngControl=c;this.formFieldId=this.id;this.ve={TagKeyDropdownVe:148230};this.focus=new _.tr;this.blur=new _.tr;c.valueAccessor=this;d.ngControl=c}ngAfterViewInit(){}ngDoCheck(){this.updateErrorState()}getErrorStateMatcher(){let a;return null!=(a=this.errorStateMatcher)?a:this.defaultErrorStateMatcher}getParentForm(){return this.parentFormGroup}onContainerClick(){this.tagDropdownBase.onContainerClick()}writeValue(a){this.setValue(a)}updateKey(a){this.setValue(a)}};
ZRf.\u0275fac=function(a){return new (a||ZRf)(_.D(_.Qt),_.D(_.zk),_.D(_.Uw,2),_.D(YRf))};
ZRf.\u0275cmp=_.m({type:ZRf,selectors:[["tag-key-dropdown"]],viewQuery:function(a,b){a&1&&_.ch(WRf,5);if(a&2){let c;_.fh(c=_.gh())&&(b.tagDropdownBase=c.first)}},hostVars:1,hostBindings:function(a,b){a&2&&_.yg("id",b.formFieldId)},inputs:{disabledOptionsMatcher:"disabledOptionsMatcher",optionsFilterPredicate:"optionsFilterPredicate",disabledTooltipPosition:"disabledTooltipPosition"},outputs:{focus:"focus",blur:"blur"},features:[_.oh([{provide:_.Vv,useExisting:ZRf,multi:!0},{provide:MRf,useExisting:YRf},
YRf]),_.wg],decls:3,vars:8,consts:()=>[["tagDropdownBase",""],["emptyStateText","No keys available","ariaLabelText","Tag key",3,"focus","blur","valueChange","disabledOptionsMatcher","optionsFilterPredicate","formControl","dropdownVe","disabledReason","disabledTooltipPosition"]],template:function(a,b){if(a&1){const c=_.t();_.K(0,"tag-dropdown-base",1,0);_.W(2,"readonlyReason");_.R("focus",function(){_.v(c);b.focus.emit();b.focused=!0;b.stateChanges.next();return _.x(void 0)})("blur",function(){_.v(c);
b.blur.emit();b.focused=!1;b.stateChanges.next();return _.x(void 0)})("valueChange",function(d){_.v(c);return _.x(b.updateKey(d))});_.L()}a&2&&_.I("disabledOptionsMatcher",b.disabledOptionsMatcher)("optionsFilterPredicate",b.optionsFilterPredicate)("formControl",b.ngControl.control)("dropdownVe",b.ve.TagKeyDropdownVe)("disabledReason",_.X(2,6,b.ngControl))("disabledTooltipPosition",b.disabledTooltipPosition)},dependencies:()=>[_.Ww,_.gx,URf,$Rf],encapsulation:2,changeDetection:0});var $Rf=class{transform(a){return a.control.tagKeyDropdownReadonlyReason}};
$Rf.\u0275fac=function(a){return new (a||$Rf)};$Rf.\u0275pipe=_.Gd({name:"readonlyReason",type:$Rf,pure:!0});var aSf=class{};aSf.\u0275fac=function(a){return new (a||aSf)};aSf.\u0275mod=_.q({type:aSf});aSf.\u0275inj=_.k({imports:[_.Dz,_.Qr,_.rx,_.XB,VRf]});var bSf=["tagDropdownBase"],cSf=0,dSf=function(a,b){return a.tagKeyValueCache.valuesForKey(b).pipe(_.A(c=>c.map(d=>({description:d.description,name:d.resourceName,shortName:d.shortName,namespacedName:d.namespacedName}))),_.wf(c=>403===c.statusCode?_.ye(new NRf("Insufficient permission to list values")):_.ye(c)))},eSf=class{constructor(a){this.tagKeyValueCache=a}loadOptions(){var a;const b=null==(a=this.ngControl)?void 0:a.control;return(a=b.tagKeyId)?dSf(this,a):HRf(this.tagKeyValueCache,b.tagKeyNamespacedName).pipe(_.E(c=>
c.id?dSf(this,c.id):_.ye(new NRf("Unable to fetch values for the selected key"))),_.wf(c=>403===c.statusCode?_.ye(new NRf("Permission `resourcemanager.tagKeys.get` is required to populate the tag values")):_.ye(new NRf("Unable to fetch values for the selected key"))))}};eSf.\u0275fac=function(a){return new (a||eSf)(_.l(_.cce))};eSf.\u0275prov=_.h({token:eSf,factory:eSf.\u0275fac});
var fSf=class extends _.zx{constructor(a,b,c,d){super("tag-value-dropdown",c,cSf++,null);this.defaultErrorStateMatcher=a;this.parentFormGroup=b;this.ngControl=c;this.formFieldId=this.id;this.ve={TagValueDropdownVe:148231};this.focus=new _.tr;this.blur=new _.tr;c.valueAccessor=this;d.ngControl=c}ngAfterViewInit(){}ngDoCheck(){this.updateErrorState()}getErrorStateMatcher(){let a;return null!=(a=this.errorStateMatcher)?a:this.defaultErrorStateMatcher}getParentForm(){return this.parentFormGroup}onContainerClick(){this.tagDropdownBase.onContainerClick()}writeValue(a){this.setValue(a)}updateValue(a){this.setValue(a)}};
fSf.\u0275fac=function(a){return new (a||fSf)(_.D(_.Qt),_.D(_.zk),_.D(_.Uw,2),_.D(eSf))};
fSf.\u0275cmp=_.m({type:fSf,selectors:[["tag-value-dropdown"]],viewQuery:function(a,b){a&1&&_.ch(bSf,5);if(a&2){let c;_.fh(c=_.gh())&&(b.tagDropdownBase=c.first)}},hostVars:1,hostBindings:function(a,b){a&2&&_.yg("id",b.formFieldId)},inputs:{disabledTooltipPosition:"disabledTooltipPosition"},outputs:{focus:"focus",blur:"blur"},features:[_.oh([{provide:_.Vv,useExisting:fSf,multi:!0},{provide:MRf,useExisting:eSf},eSf]),_.wg],decls:4,vars:8,consts:()=>[["tagDropdownBase",""],["emptyStateText","No values available",
"ariaLabelText","Tag value",3,"focus","blur","valueChange","formControl","dropdownVe","disabledReason","disabledTooltipPosition"]],template:function(a,b){if(a&1){const c=_.t();_.K(0,"tag-dropdown-base",1,0);_.W(2,"disabledReason");_.W(3,"async");_.R("focus",function(){_.v(c);b.focus.emit();b.focused=!0;b.stateChanges.next();return _.x(void 0)})("blur",function(){_.v(c);b.blur.emit();b.focused=!1;b.stateChanges.next();return _.x(void 0)})("valueChange",function(d){_.v(c);return _.x(b.updateValue(d))});
_.L()}a&2&&_.I("formControl",b.ngControl.control)("dropdownVe",b.ve.TagValueDropdownVe)("disabledReason",_.X(3,6,_.X(2,4,b.ngControl)))("disabledTooltipPosition",b.disabledTooltipPosition)},dependencies:()=>[_.Ww,_.gx,URf,_.Ir,gSf],encapsulation:2,changeDetection:0});var gSf=class{transform(a){const b=a.control;return b.tagValueDropdownDisabledReason$.pipe(_.A(c=>null!=c?c:b.tagValueDropdownReadonlyReason))}};gSf.\u0275fac=function(a){return new (a||gSf)};
gSf.\u0275pipe=_.Gd({name:"disabledReason",type:gSf,pure:!0});var hSf=class{};hSf.\u0275fac=function(a){return new (a||hSf)};hSf.\u0275mod=_.q({type:hSf});hSf.\u0275inj=_.k({imports:[_.Dz,_.Qr,_.rx,_.XB,VRf]});var iSf=class{constructor(a,b,c){this.dialogRef=b;this.formBuilder=c;this.organizations=[];b=void 0;a.currentOrgId&&(b=a.organizations.find(e=>e.id===a.currentOrgId),b||(b={id:a.currentOrgId},this.organizations.push(b)));this.organizations.push(...a.organizations);this.organizations.sort(vPf);let d;this.form=this.formBuilder.group({currentOrg:null!=(d=b)?d:null})}onSave(){this.form.updateValueAndValidity();this.form.markAllAsTouched();if(this.form.valid){var a;this.dialogRef.close(null==(a=this.form.get("currentOrg"))?
void 0:a.value)}}onCancel(){this.dialogRef.close()}};iSf.\u0275fac=function(a){return new (a||iSf)(_.D(_.Jt),_.D(_.It),_.D(_.px))};
iSf.\u0275cmp=_.m({type:iSf,selectors:[["tags-org-selector"]],decls:17,vars:5,consts:()=>[" Select organization\n"," Tag keys from the selected organization will be displayed in the key dropdown. ","Organization ","Cancel","Save"," An organization is required",["matDialogTitle","","tabindex","-1"],["matDialogContent",""],[1,"cfc-spacing-2",3,"formGroup"],["formControlName","currentOrg",3,"isRequired"],[3,"value",4,"ngFor","ngForOf"],["matError","",4,"cfcDebounceErrorFor"],["matDialogActions",""],
["mat-button","","color","primary",3,"click"],[3,"value"],["matError",""]],template:function(a,b){a&1&&(_.K(0,"h1",6),_.P(1,0),_.L(),_.K(2,"div",7)(3,"p"),_.P(4,1),_.L(),_.K(5,"form",8)(6,"mat-form-field")(7,"mat-label"),_.P(8,2),_.L(),_.K(9,"cfc-select",9),_.H(10,tPf,2,2,"mat-option",10),_.L(),_.H(11,uPf,2,0,"cm-error",11),_.L()()(),_.K(12,"div",12)(13,"button",13),_.R("click",function(){return b.onCancel()}),_.P(14,3),_.L(),_.K(15,"button",13),_.R("click",function(){return b.onSave()}),_.P(16,4),
_.L()());a&2&&(_.yg("cdkFocusInitial",!0),_.B(5),_.I("formGroup",b.form),_.B(4),_.I("isRequired",!0),_.B(),_.I("ngForOf",b.organizations),_.B(),_.I("cfcDebounceErrorFor","required"))},dependencies:[_.Br,_.Jx,_.UE,_.vx,_.Su,_.sx,_.Mt,_.Ot,_.Nt,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Qv,_.bx,_.Ww,_.Xw,_.zk,_.ix,_.mz,_.lz,_.Wt,_.pz],encapsulation:2});var jSf=class{};jSf.\u0275fac=function(a){return new (a||jSf)};jSf.\u0275mod=_.q({type:jSf});jSf.\u0275inj=_.k({imports:[_.Qr,_.Kx,_.WE,_.wx,_.au,_.Cx,_.rx,_.XB]});var kSf;kSf=function(a,b){switch(b.getResourceType()){case 2:return _.y([new _.NGa(b.getResourceId(),b.getResourceType())]);case 0:case 43:return _.UCc(a.crmResourceService,b);default:return _.y([])}};_.lSf=function(a,b){return 0!==b.length?_.Ie(b.map(c=>{a:switch(c.getResourceType()){case 2:case 0:case 43:c=kSf(a,c).pipe(_.A(xPf));break a;default:c=a.orgIdForPurview$}return c})):_.y([])};
_.mSf=function(a){return _.dce(a.orgNamespaceService).pipe(_.A(b=>{const c=new Map;for(const [d,e]of b.entries())b=d,c.set(b,{id:b,displayName:e.name});return c}))};_.nSf=function(a,b=[],c=[]){const d=wPf(c);return _.Ie([_.lSf(a,b),_.mSf(a)]).pipe(_.A(([e,f])=>{e=[..._.yPf(e),...d];for(const g of e)f.has(g)||f.set(g,{id:g});return Array.from(f.values())}))};
_.oSf=class{constructor(a,b,c){this.crmResourceService=a;this.purviewService=b;this.orgNamespaceService=c;this.orgIdForPurview$=this.purviewService.latestPurviewObservable.pipe(_.E(d=>d.reference?kSf(this,d.reference):_.y([])),_.A(xPf))}};_.oSf.\u0275fac=function(a){return new (a||_.oSf)(_.l(_.HA),_.l(_.go),_.l(_.$O))};_.oSf.\u0275prov=_.h({token:_.oSf,factory:_.oSf.\u0275fac,providedIn:"root"});var JPf=function(a,b){const c=_.kW(b).getTagKeyParent();a.dialog.open(iSf,{data:{currentOrgId:2===c.resourceType?c.id:void 0,organizations:a.organizations}}).afterClosed().pipe(_.F(a.destroy),_.Gf(1)).subscribe(d=>{if(d){d={id:d.id,resourceType:2};var e=_.kW(b),f=e.tagKeyParent$.value;if(f.id!==d.id||f.resourceType!==d.resourceType)e.tagKeyParent$.next(d),e.setValue(null)}})},LPf=function(a,b){_.kW(b).value?a.confirmDialogService.confirm({header:"Switch to manual entry?",body:"The selected key/value entries will not be preserved.",
confirmButtonVeId:a.ve.TagsEditOptionsManualEntryDialogConfirm,cancelButtonVeId:a.ve.TagsEditOptionsManualEntryDialogCancel}).pipe(_.F(a.destroy),_.Gf(1),_.E(c=>c.afterClosed())).subscribe(c=>{(null==c?0:c.confirmed)&&a.manualEntryRequested.emit()}):a.manualEntryRequested.emit()},NPf=function(a,b){b instanceof _.zPf||(_.Rb(!(b instanceof CPf)),(b.controls.valueId.value?a.confirmDialogService.confirmation({header:"Switch to selecting from a list?",body:"The manually entered tag value will not be preserved.",
confirmButtonVeId:a.ve.TagsEditOptionsSelectFromListDialogConfirm,cancelButtonVeId:a.ve.TagsEditOptionsSelectFromListDialogCancel}).pipe(_.A(c=>c.confirmed)):_.y(!0)).pipe(_.F(a.destroy),_.We(c=>c),_.Gf(1)).subscribe(()=>{a.keyValueDropdownRequested.emit()}))},pSf=class{constructor(a,b){this.confirmDialogService=a;this.dialog=b;this.organizations=[];this.manualEntryRequested=new _.tr;this.keyValueDropdownRequested=new _.tr;this.ve={TagsEditOptionsButton:148343,TagsEditOptionsManualEntryDialogCancel:148348,
TagsEditOptionsManualEntryDialogConfirm:148347,TagsEditOptionsManualEntryMenuItem:148344,TagsEditOptionsSelectFromListDialogCancel:148350,TagsEditOptionsSelectFromListDialogConfirm:148349,TagsEditOptionsSelectFromListMenuItem:148346,TagsEditOptionsSwitchOrganizationMenuItem:148345};this.TagFormGroupType=KRf;this.destroy=new _.Vf(1);this.MSG_MANUAL_ENTRY_NOT_AVAILABLE="Manual entry is not available since the tags cannot be modified";this.MSG_SWITCH_ORGS_NOT_AVAILABLE="Switching organizations is not available since the tags cannot be modified"}ngOnInit(){}ngOnChanges(){}ngOnDestroy(){this.destroy.next();
this.destroy.complete()}};pSf.\u0275fac=function(a){return new (a||pSf)(_.D(_.yD),_.D(_.Kt))};
pSf.\u0275cmp=_.m({type:pSf,selectors:[["tags-editor-options"]],inputs:{tagFormGroup:"tagFormGroup",organizations:"organizations"},outputs:{manualEntryRequested:"manualEntryRequested",keyValueDropdownRequested:"keyValueDropdownRequested"},features:[_.Qd],decls:6,vars:6,consts:()=>[["optionsMenu",""],["mat-icon-button","","type","button","cfcTooltip","Options","aria-label","Open options menu for this row.",3,"cfcMenuTriggerFor","ve","veClick"],["icon","more","size","small"],[3,"ngSwitch"],[4,"ngSwitchCase"],
["label","Manual entry",3,"click","ve","veClick","cfcDisable","cfcDisableTooltip"],["label","Switch organization",3,"ve","veClick","cfcDisable","cfcDisableTooltip","click",4,"ngIf"],["label","Switch organization",3,"click","ve","veClick","cfcDisable","cfcDisableTooltip"],["label","Select from list","cfcDisableTooltip","Not available since there are no organizations to list tags from",3,"click","ve","veClick","cfcDisable"]],template:function(a,b){a&1&&(_.K(0,"button",1),_.M(1,"cfc-icon",2),_.L(),_.K(2,
"cfc-menu",3,0),_.H(4,MPf,4,7,"cfc-menu-section",4)(5,OPf,2,3,"cfc-menu-section",4),_.L());a&2&&(a=_.hh(3),_.I("cfcMenuTriggerFor",a)("ve",b.ve.TagsEditOptionsButton)("veClick",!0),_.B(2),_.I("ngSwitch",b.tagFormGroup.tagFormGroupType),_.B(2),_.I("ngSwitchCase",b.TagFormGroupType.DROPDOWN),_.B(),_.I("ngSwitchCase",b.TagFormGroupType.MANUAL))},dependencies:()=>[_.Ox,_.Ny,_.Cr,_.Dr,_.Er,_.Sy,_.tu,_.vx,_.Uu,_.sx,_.Az,_.Ry,_.zz,_.Hz,_.Ly,qSf],encapsulation:2});
var qSf=class{transform(a){return!(!_.kW(a).tagKeyDropdownReadonlyReason&&!_.jW(a).tagValueDropdownReadonlyReason)||!!a.deleteDisabledReason}};qSf.\u0275fac=function(a){return new (a||qSf)};qSf.\u0275pipe=_.Gd({name:"isDropdownChangeDisabled",type:qSf,pure:!0});var rSf,sSf,lQf,TPf,bQf,gQf,rQf,wQf;rSf=["formStack"];sSf=a=>({defaultTagKeyParent:a});lQf=()=>[];TPf=()=>["required","invalidParent"];bQf=()=>["required","invalidShortName"];gQf=a=>({error:a});rQf=()=>["required","pattern"];wQf=(a,b)=>({index:a,group:b});_.tSf=class{constructor(a){this.templateRef=a;this.tagsEditorFormStackInputDisableResizing=!1}};_.tSf.\u0275fac=function(a){return new (a||_.tSf)(_.D(_.$g))};_.tSf.\u0275dir=_.Fd({type:_.tSf,selectors:[["","tagsEditorFormStackInput",""]],inputs:{tagsEditorFormStackInputDisableResizing:"tagsEditorFormStackInputDisableResizing"}});
_.uSf=class{constructor(a){this.templateRef=a}};_.uSf.\u0275fac=function(a){return new (a||_.uSf)(_.D(_.$g))};_.uSf.\u0275dir=_.Fd({type:_.uSf,selectors:[["ng-template","valueDropdownCustomErrorName",""]],inputs:{valueDropdownCustomErrorName:"valueDropdownCustomErrorName",errorVeId:"errorVeId"}});_.vSf=class{constructor(a){this.templateRef=a}};_.vSf.\u0275fac=function(a){return new (a||_.vSf)(_.D(_.$g))};
_.vSf.\u0275dir=_.Fd({type:_.vSf,selectors:[["ng-template","valueManualEntryCustomErrorName",""]],inputs:{valueManualEntryCustomErrorName:"valueManualEntryCustomErrorName",errorVeId:"errorVeId"}});_.oW=class{constructor(a){this.templateRef=a}};_.oW.\u0275fac=function(a){return new (a||_.oW)(_.D(_.$g))};_.oW.\u0275dir=_.Fd({type:_.oW,selectors:[["","tagsEditorFormStackDescription",""]]});
var wSf=class{transform(a){return a.name?a.shortNameRepresentation?_.nk("{valueId} ({keyShortName}:{valueShortName})",{valueId:a.name,keyShortName:a.shortNameRepresentation.keyShortName,valueShortName:a.shortNameRepresentation.shortName}):a.name:a.namespacedName}};wSf.\u0275fac=function(a){return new (a||wSf)};wSf.\u0275pipe=_.Gd({name:"duplicateValueName",type:wSf,pure:!0,standalone:!0});
var IQf=/^[1-9][0-9]{0,18}$/,hQf=function(a,b){return a.duplicateTagValueMatcher?a.duplicateTagValueMatcher(b):1===a.manualInputFormat&&_.Xc(lW)?IPf(a.formStackFormArray.errors,b):GPf(a.formStackFormArray.errors,b)},zQf=function(a,b,c){xSf(a,c).pipe(_.F(a.destroy$),_.Gf(1)).subscribe({next:d=>{a.formStackFormArray.setControl(b,d);a.changeDetectorRef.detectChanges()},error:d=>{a.errorService.handleError(d,"Failed to switch to selecting from list")}})},CQf=function(a,b){ySf(a,b).pipe(_.F(a.destroy$),
_.Gf(1)).subscribe(c=>{a.formStackFormArray.push(c);a.changeDetectorRef.detectChanges()})},zSf=function(a){return{isErrorState:(b,c)=>a.defaultErrorStateMatcher.isErrorState(b,c)?!0:!!hQf(a,b)}},xSf=function(a,b){return ySf(a,b).pipe(_.E(c=>c instanceof _.zPf?_.y(c):_.ye({errorExperience:5})))},ASf=function(a){return a.tagKeyOrganizationsInternal$.pipe(_.Jf(),_.E(b=>0===b.length?_.y(void 0):a.dialog.open(iSf,{data:{organizations:b},disableClose:!0}).afterClosed().pipe(_.We(_.Dl),_.A(c=>({id:c.id,
resourceType:2})))),_.Gf(1))},ySf=function(a,b){return(b?_.y(b):ASf(a)).pipe(_.A(c=>{const d=1===a.manualInputFormat&&_.Xc(lW);c=a.tagFormGroupCreator(c,d);yQf(c);return c}),_.Gf(1))},BSf=class extends _.yx{set defaultTagKeyParent$(a){this.defaultTagKeyParentStreamSubject$.next(a)}set tagKeyOrganizations$(a){this.tagKeyOrganizationsStreamSubject$.next(a)}set disallowDuplicateKeyReason(a){this.disallowDuplicateKeyReason$.next(a)}set disabledTagKeyOptionsMatcher(a){this.disabledTagKeyOptionsMatcher$.next(a)}constructor(a,
b,c,d,e,f){super();this.changeDetectorRef=a;this.dialog=b;this.defaultErrorStateMatcher=c;this.errorService=d;this.formBuilder=e;this.tagParentIdentifierService=f;this.destroy$=new _.Vf;this.ve={TagsEditDuplicateValueError:148336,TagsEditKeyRequiredError:148334,TagsEditValuePositiveIntegerError:148337,TagsEditValueRequiredError:148335,TagsEditFormStack:148353,TagsEditManualEntryInput:148354};this.tagFormGroupCreator=EPf;this.defaultTagKeyParentStreamSubject$=new _.Sh(this.tagParentIdentifierService.orgIdForPurview$.pipe(_.A(g=>
g?{id:g,resourceType:2}:void 0)));this.defaultTagKeyParentInternal$=this.defaultTagKeyParentStreamSubject$.pipe(_.E(g=>g),_.ag({refCount:!0,bufferSize:1}));this.tagKeyOrganizationsStreamSubject$=new _.Sh(_.nSf(this.tagParentIdentifierService));this.tagKeyOrganizationsInternal$=this.tagKeyOrganizationsStreamSubject$.pipe(_.E(g=>g),_.ag({refCount:!0,bufferSize:1}));this.disallowDuplicateKeyReason$=new _.Sh;this.disabledTagKeyOptionsMatcher$=new _.Sh;this.hideEditorOptions=!1;this.showKeyInput=!0;this.manualInputFormat=
0;this.formStackFormArray=this.formBuilder.array([],[HQf]);this.mainFormGroup=this.formBuilder.group({formStackFormArray:this.formStackFormArray});this.selectedKeyNames$=_.Oe(()=>{let g;return this.formStackFormArray.valueChanges.pipe(_.A(FQf),_.dg(FQf(null!=(g=this.formStackFormArray.value)?g:[])),_.ag({refCount:!0,bufferSize:1}))});this.selectedKeyNamespacedNames$=_.Oe(()=>{let g;return this.formStackFormArray.valueChanges.pipe(_.A(GQf),_.dg(GQf(null!=(g=this.formStackFormArray.value)?g:[])),_.ag({refCount:!0,
bufferSize:1}))});this.duplicateTagKeysDisabledMatcher$=_.Ie([this.selectedKeyNames$,this.selectedKeyNamespacedNames$,this.disallowDuplicateKeyReason$]).pipe(_.A(([g,n,p])=>{if(void 0!==p){var r=new Set(g),u=new Set(n);return w=>1===this.manualInputFormat&&_.Xc(lW)?u.has(w.namespacedName)?p:void 0:w.name&&r.has(w.name)?p:void 0}}));this.keyDisabledOptionsMatcher$=_.Ie([this.duplicateTagKeysDisabledMatcher$,this.disabledTagKeyOptionsMatcher$]).pipe(_.A(([g,n])=>p=>{let r;return null!=(r=null==g?void 0:
g(p))?r:null==n?void 0:n(p)}));this.TagFormGroupType=KRf;this.tagValueErrorMatcher=zSf(this);this.setUpOnChangeEventEmitter()}ngOnDestroy(){this.destroy$.next();this.destroy$.complete()}markAllAsTouched(){this.mainFormGroup.markAllAsTouched();this.changeDetectorRef.detectChanges()}writeValue(a){this.onValueChangesSubscription.unsubscribe();this.onValueChangesSubscription=void 0;this.formStackFormArray.clear({emitEvent:!1});for(const b of a)yQf(b),this.formStackFormArray.push(b,{emitEvent:!1});this.formStackFormArray.updateValueAndValidity();
this.setUpOnChangeEventEmitter();this.changeDetectorRef.detectChanges()}setUpOnChangeEventEmitter(){this.onValueChangesSubscription=this.formStackFormArray.valueChanges.pipe(_.F(this.destroy$)).subscribe(()=>{this.onChange(this.formStackFormArray.controls)})}validate(){return VOf(this.mainFormGroup).pipe(_.A(a=>a?{errors:!0}:null))}};BSf.\u0275fac=function(a){return new (a||BSf)(_.D(_.vr),_.D(_.Kt),_.D(_.Qt),_.D(_.tA),_.D(_.px),_.D(_.oSf))};
BSf.\u0275cmp=_.m({type:BSf,selectors:[["tags-editor"]],contentQueries:function(a,b,c){a&1&&(_.eh(c,_.oW,7),_.eh(c,_.tSf,4),_.eh(c,_.uSf,4),_.eh(c,_.vSf,4));if(a&2){let d;_.fh(d=_.gh())&&(b.formStackDescription=d.first);_.fh(d=_.gh())&&(b.additionalFormStackInputs=d);_.fh(d=_.gh())&&(b.valueDropdownCustomErrors=d);_.fh(d=_.gh())&&(b.valueManualEntryCustomErrors=d)}},viewQuery:function(a,b){a&1&&_.ch(rSf,5);if(a&2){let c;_.fh(c=_.gh())&&(b.formStack=c.first)}},inputs:{tagFormGroupCreator:"tagFormGroupCreator",
defaultTagKeyParent$:"defaultTagKeyParent$",tagKeyOrganizations$:"tagKeyOrganizations$",disallowDuplicateKeyReason:"disallowDuplicateKeyReason",disabledTagKeyOptionsMatcher:"disabledTagKeyOptionsMatcher",externalTitleId:"externalTitleId",hideEditorOptions:"hideEditorOptions",addDisabledReason:"addDisabledReason",duplicateTagValueMatcher:"duplicateTagValueMatcher",tagKeyOptionsFilterPredicate:"tagKeyOptionsFilterPredicate",showKeyInput:"showKeyInput",manualInputFormat:"manualInputFormat"},features:[_.oh([{provide:_.Qw,
useExisting:_.wd(()=>BSf),multi:!0},{provide:_.Sw,useExisting:_.wd(()=>BSf),multi:!0}]),_.wg],decls:4,vars:5,consts:()=>[["duplicateTagValueError",""],["formStack",""],["addDisabledReasonTemplate",""],["deleteDisabledReason",""]," The tag parent must be a valid organization ID, project ID, or project number. "," Tag key required "," The tag key must be 1-256 characters, beginning with an alphanumeric character, and must not contain quotes ('), double quotes (\"), slashes (/), or backslashes (\\). ",
" Tag value required","tagValues/"," The tag value must be a valid numeric ID "," The tag value must be 1-256 characters, beginning with an alphanumeric character, and must not contain quotes ('), double quotes (\"), slashes (/), or backslashes (\\). "," \ufffd0\ufffd cannot be specified more than once\n",["class","cfc-max-width-full",3,"formGroup",4,"ngIf"],[1,"cfc-max-width-full",3,"formGroup"],["addButtonMessage","Add Tag","formArrayName","formStackFormArray",1,"cfc-space-first",3,"onRowAddition",
"onRowAdditionRequested","onRowRemoval","externalTitleId","ve","veImpression","addDisabled","addDisabledTooltipMessage"],[4,"ngIf"],[3,"deleteButtonDisabled","deleteDisabledTooltipMessage","formGroupName",4,"ngFor","ngForOf"],[3,"tagFormReason"],[3,"ngTemplateOutlet"],[3,"deleteButtonDisabled","deleteDisabledTooltipMessage","formGroupName"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"disableResizing",4,"ngFor","ngForOf"],["class","cfc-space-above-minus-5",3,"disableResizing",4,"ngIf"],
["label","Parent"],["matInput","","placeholder","Organization ID, project ID, or project number","required","","formControlName","parent",3,"blur"],["matError","",4,"cfcDebounceErrorFor"],["matError",""],["label","Key"],["disabledTooltipPosition","left","formControlName","key","required","",3,"blur","disabledOptionsMatcher","optionsFilterPredicate"],["class","cfc-space-below-minus-3 cfc-break-word-wrap",4,"ngIf"],["matError","",3,"ve","veImpression",4,"cfcDebounceErrorFor"],[1,"cfc-space-below-minus-3",
"cfc-break-word-wrap"],["class","tags-key-description",4,"ngIf"],[3,"tagKeyParent"],[1,"tags-key-description"],["matError","",3,"ve","veImpression"],["label","Key"],["matInput","","cfcDisableTooltip","The key does not need to be provided since the tag value ID\n                                    uniquely identifies a key-value pair","disabledTooltipPosition","left",3,"cfcDisable"],["label","Key"],["matInput","","placeholder","Key short name","required","","formControlName","keyShortName",3,"blur"],
["label","Value"],["formControlName","value","required","","disabledTooltipPosition","right",3,"blur","errorStateMatcher"],["matError","",3,"ve","veImpression",4,"cfcDebounceErrorIf"],["ngProjectAs","mat-error",5,["mat-error"],4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["ngProjectAs","mat-error",5,["mat-error"]],["label","Value"],["matInput","","placeholder","[tagvalue ID]","required","","formControlName","valueId",3,"blur","ve","veInputText","errorStateMatcher"],["matTextPrefix",
""],["label","Value"],["matInput","","placeholder","Value short name","required","","formControlName","valueShortName",3,"blur","errorStateMatcher"],[3,"disableResizing"],[1,"cfc-space-above-minus-5",3,"disableResizing"],[3,"manualEntryRequested","keyValueDropdownRequested","tagFormGroup","organizations"]],template:function(a,b){a&1&&(_.H(0,DQf,7,8,"form",12),_.W(1,"async"),_.H(2,EQf,2,3,"ng-template",null,0,_.zh));a&2&&_.I("ngIf",_.rh(3,sSf,_.X(1,1,b.defaultTagKeyParentInternal$)))},dependencies:[_.Ox,
_.Ny,_.Br,_.Cr,_.Hr,_.Dr,_.Er,_.Jx,_.Ey,_.GE,_.vE,_.HE,_.BE,_.DE,_.Gx,_.Hx,_.Ex,_.Xv,_.Sv,_.Rv,_.Qv,_.Tv,_.Bx,_.Ax,_.xx,_.mW,_.bx,_.wk,_.Ww,_.Xw,_.kx,_.zk,_.ix,_.hx,_.yk,_.PRf,ZRf,fSf,pSf,_.Ir,wSf,_.LIe,_.MIe],encapsulation:2,changeDetection:0});_.pW=class{};_.pW.\u0275fac=function(a){return new (a||_.pW)};_.pW.\u0275mod=_.q({type:_.pW});_.pW.\u0275inj=_.k({imports:[_.Dz,_.Qr,_.Kx,_.Zz,_.IE,_.WE,_.Cu,_.wx,_.au,_.Ix,_.Cx,_.WL,_.Sz,_.SE,_.gR,_.rx,_.dR,_.nW,aSf,jSf,hSf,_.Rz]});var CSf=class{};CSf.\u0275fac=function(a){return new (a||CSf)};CSf.\u0275mod=_.q({type:CSf});CSf.\u0275inj=_.k({imports:[_.tM]});
var DSf=class{constructor(a,b){this.scopeService=a;this.purviewPickerService=b}openPurviewPicker(a){const b=this;return _.Ge(function*(){var c=a.currentOrganizationId?yield _.ze(_.IIe(b.scopeService,a.currentOrganizationId).pipe(_.A(f=>0===f.type?f.organization:null))):null;const d=a.currentProjectId?yield _.ze(b.scopeService.getProject(a.currentProjectId).pipe(_.A(f=>0===f.type?f.project:null))):null;let e;if(c=null==(e=yield _.ze(_.qM(b.purviewPickerService,function(f){f=LQf(f);return!f||2===f.resourceType&&
"0"===f.id?_.y("This resource cannot contain tags"):a.currentTagKeyParentTreeResourceIds.has(_.pbe(f))?_.y("Resource has already been selected"):_.y(null)},null!=d?d:c,c,!0)))?void 0:e.resource)return LQf(c)})}};DSf.\u0275fac=function(a){return new (a||DSf)(_.l(_.JIe),_.l(_.sM))};DSf.\u0275prov=_.h({token:DSf,factory:DSf.\u0275fac,providedIn:CSf});var ESf=class{constructor(a,b,c){this.dialogRef=b;this.formBuilder=c;this.ResourceType=_.B0a;this.resourceType$=new _.Vf(1);this.destroy$=new _.Vf;this.ve={TagKeyParentManualEntryDialogCancel:161943,TagKeyParentManualEntryDialogSave:161944,TagKeyParentManualEntryInput:161940,TagKeyParentManualEntryOrganizationIdTab:161941,TagKeyParentManualEntryProjectIdTab:161942};this.tabIndex$=this.resourceType$.pipe(_.A(d=>{switch(d){case 2:return 0;case 0:return 1;default:_.Oc(d,"invalid tag key parent resource type")}}));
this.templateData$=this.tabIndex$.pipe(_.jg(this.resourceType$),_.A(([d,e])=>({tabIndex:d,resourceType:e})));this.form=this.formBuilder.group({tagKeyParentId:""});this.resourceType$.pipe(_.F(this.destroy$)).subscribe(d=>{let e;null==(e=this.form.get("tagKeyParentId"))||e.setValue("",{emitEvent:!1});let f;null==(f=this.form.get("tagKeyParentId"))||f.setValidators([_.Mo,dRf(d)]);let g;null==(g=this.form.get("tagKeyParentId"))||g.updateValueAndValidity()});this.resourceType$.next(a.resourceType)}ngOnDestroy(){this.destroy$.next();
this.destroy$.complete()}onSave(a){this.form.updateValueAndValidity();this.form.markAllAsTouched();if(this.form.valid){var b;this.dialogRef.close({id:null==(b=this.form.get("tagKeyParentId"))?void 0:b.value,resourceType:a})}}onTabChange(a){switch(a){case 0:this.resourceType$.next(2);break;case 1:this.resourceType$.next(0);break;default:_.Oc(a,"invalid tab index type")}}onCancel(){this.dialogRef.close()}};ESf.\u0275fac=function(a){return new (a||ESf)(_.D(_.Jt),_.D(_.It),_.D(_.nx))};
ESf.\u0275cmp=_.m({type:ESf,selectors:[["tag-key-parent-manual-entry"]],decls:2,vars:3,consts:()=>[["tabContent",""],"Cancel"," Save "," Enter organization ID "," Enter project ID "," Enter the ID of an organization to select tag keys from it. "," Enter the ID of a project to select tag keys from it. "," Organization ID "," Project ID "," An organization ID is required. "," A project ID is required. "," The format of the organization ID is invalid. "," The format of the project ID is invalid. ",[4,
"ngIf"],["matDialogTitle","","tabindex","-1",3,"ngSwitch"],[4,"ngSwitchCase"],["matDialogContent",""],[1,"cfc-width-full","cfc-mat-tab-expand-content",3,"selectedIndexChange","selectedIndex"],["label","Organization ID",3,"ve","veClick"],[4,"ngTemplateOutlet"],["label","Project ID",3,"ve","veClick"],["matDialogActions",""],["mat-button","","color","primary",3,"click","ve","veClick"],[1,"cfc-space-above-minus-1",3,"ngSwitch"],[1,"cfc-spacing-2",3,"formGroup"],[3,"ngSwitch"],["matInput","","required",
"","formControlName","tagKeyParentId",3,"placeholder","ve","veInputText"],["matError","",3,"ngSwitch",4,"cfcDebounceErrorFor"],["matTextPrefix","",3,"ngSwitch"],["matError","",3,"ngSwitch"]],template:function(a,b){a&1&&(_.H(0,cRf,17,15,"ng-container",13),_.W(1,"async"));a&2&&_.I("ngIf",_.X(1,1,b.templateData$))},dependencies:()=>[_.Ox,_.Ny,_.vx,_.Su,_.sx,_.Cr,_.Hr,_.Dr,_.Er,_.Jx,_.Mt,_.Ot,_.Nt,_.Gx,_.Hx,_.Ex,_.Xv,_.Sv,_.Qv,_.Tv,_.Bx,_.Ax,_.xx,_.jw,_.ew,_.fw,_.bw,_.bx,_.wk,_.Ww,_.Xw,_.kx,_.zk,_.ix,
_.Ir,FSf],encapsulation:2});var FSf=class{transform(a){switch(a){case 0:return"[project ID]";case 2:return"[organization ID]";default:_.Oc(a,"invalid tag key parent resource type")}}};FSf.\u0275fac=function(a){return new (a||FSf)};FSf.\u0275pipe=_.Gd({name:"tagKeyParentIdPlaceholder",type:FSf,pure:!0});var GSf,pRf,hRf,kRf,rRf,vRf,zRf,JSf,HSf,CRf,KSf;GSf=["tagsEditor"];pRf=()=>[];hRf=(a,b)=>({index:a,group:b});kRf=a=>({error:a});rRf=function(a){return _.Ge(function*(){const b=yield _.ze(a.currentTagKeyParentTreeResourceIds$);var c=yield _.ze(a.currentOrgId$);const d=yield _.ze(a.currentProjectId$);(c=yield a.purviewPickerService.openPurviewPicker({currentTagKeyParentTreeResourceIds:b,currentOrganizationId:c,currentProjectId:d}))&&HSf(a,c,b)})};
vRf=function(a,b){a.tagEditorsFormArray.push(new ISf(b,[a.tagFormGroupCreator(b)]));CRf(a)};zRf=function(a,b){a.dialog.open(ESf,{data:{resourceType:b},disableClose:!0,width:"400px"}).afterClosed().pipe(_.F(a.destroy$),_.We(_.Dl),_.jg(a.currentTagKeyParentTreeResourceIds$)).subscribe(([c,d])=>{HSf(a,c,d)})};JSf=function(a,b){return a.scopeService.getProject(b).pipe(_.A(c=>{switch(c.type){case 0:return c.project.projectNumber;case 1:case 2:return b;default:return b}}))};
HSf=function(a,b,c){(0===b.resourceType?JSf(a,b.id).pipe(_.A(d=>Object.assign({},b,{id:null!=d?d:b.id}))):_.y(b)).pipe(_.Jf(),_.F(a.destroy$)).subscribe(d=>{if(c.has(_.pbe(d))){var e=a.snackbarService,f=e.open;a:{d=d.resourceType;switch(d){case 2:d="Organization already added";break a;case 0:d="Project already added";break a;default:_.Oc(d,"invalid tag key parent resource type")}d=void 0}f.call(e,d)}else vRf(a,d)})};
CRf=function(a){a.changeDetectorRef.detectChanges();a.onTouched();_.Gv(a.zoneHelper,()=>{let b;if(null!=(b=a.tagsEditors)){let c;null==(c=b.last.formStack)||c.rows.last.focusFirstFocusableElement()}})};KSf=function(a){const b=a.tagEditorsFormArray.controls,c=b.filter(d=>0<d.value.length);if(c.length!==b.length){a.tagEditorsFormArray.clear({emitEvent:!1});for(const d of c)a.tagEditorsFormArray.push(d,{emitEvent:!1});a.tagEditorsFormArray.updateValueAndValidity();a.changeDetectorRef.detectChanges()}};
_.qW=class extends _.yx{set addDisabledReason(a){this.addDisabledReason$.next(a)}get addDisabledReason(){return this.addDisabledReason$.getValue()}set currentOrganizationId(a){this.currentOrgIdStreamSubject$.next(_.y(a))}set currentProjectId(a){this.currentProjectIdStreamSubject$.next(_.y(a))}constructor(a,b,c,d,e,f,g,n,p){super();this.changeDetectorRef=a;this.dialog=b;this.formBuilder=c;this.purviewPickerService=d;this.purviewService=e;this.scopeService=f;this.snackbarService=g;this.tagParentIdentifierService=
n;this.zoneHelper=p;this.ve={TagsEditorV2Form:160407,TagsEditorV2KeyParentButton:160732,TagsEditorV2PurviewPickerButton:162143,TagsEditorV2ManualEntryMenuItem:162212,TagsEditorV2OrganizationIdMenuItem:162225,TagsEditorV2ProjectIdMenuItem:162226,TagsEditorV2CurrentOrganizationMenuItem:164759,TagsEditorV2CurrentProjectMenuItem:164760};this.destroy$=new _.Vf;this.tagFormGroupCreator=EPf;this.addDisabledReason$=new _.Sh;this.currentOrgIdStreamSubject$=new _.Sh(this.tagParentIdentifierService.orgIdForPurview$);
this.currentOrgId$=this.currentOrgIdStreamSubject$.pipe(_.E(r=>r),_.ag({refCount:!0,bufferSize:1}));this.currentProjectIdStreamSubject$=new _.Sh(_.IA(this.purviewService).pipe(_.A(r=>r?r.id:void 0)));this.currentProjectId$=this.currentProjectIdStreamSubject$.pipe(_.E(r=>r),_.ag({refCount:!0,bufferSize:1}));this.currentProjectNumberOrId$=this.currentProjectId$.pipe(_.E(r=>void 0===r?_.y(void 0):JSf(this,r)));this.manualInputFormat=0;this.namespacedNamesEnabled=_.Xc(lW);this.tagEditorsFormArray=this.formBuilder.array([],
[ERf]);this.mainFormGroup=this.formBuilder.group({tagEditorsFormArray:this.tagEditorsFormArray});this.ResourceType=_.B0a;this.hasManualEntry$=_.Oe(()=>this.tagEditorsFormArray.valueChanges.pipe(_.dg(this.tagEditorsFormArray.value),_.A(()=>this.tagEditorsFormArray.controls.map(r=>r).some(r=>1===r.tagFormGroupType||2===r.tagFormGroupType))));this.currentTagKeyParentTreeResourceIds$=_.Oe(()=>this.tagEditorsFormArray.valueChanges.pipe(_.dg(this.tagEditorsFormArray.value),_.A(()=>new Set(this.tagEditorsFormArray.controls.map(r=>
this.toTagKeyParentPipe.transform(r)).filter(_.Dl).map(_.pbe)))));this.menuData$=_.Ie([this.hasManualEntry$,this.addDisabledReason$,this.currentProjectNumberOrId$,this.currentOrgId$,this.currentTagKeyParentTreeResourceIds$]).pipe(_.A(([r,u,w,z,C])=>{r=r?{toStringReason:()=>"Manual tag entry selected"}:u;const G=[];if(z){const J=C.has(_.Aj(z,2));G.push({tagKeyParent:{id:z,resourceType:2},disabledReason:J?{toStringReason:()=>"Current organization selected"}:u,itemLabel:"Select current organization",
itemNote:"Select tags from the current organization",veId:this.ve.TagsEditorV2CurrentOrganizationMenuItem})}w&&(z=C.has(_.Aj(w,0)),G.push({tagKeyParent:{id:w,resourceType:0},disabledReason:z?{toStringReason:()=>"Current project selected"}:u,itemLabel:"Select current project",itemNote:"Select tags from the current project",veId:this.ve.TagsEditorV2CurrentProjectMenuItem}));return{manualEntry:{disabledReason:r},currentScopeItems:G}}));this.toTagKeyParentPipe=new LSf;this.setUpOnChangeEventEmitter()}ngOnDestroy(){this.destroy$.next();
this.destroy$.complete()}markAllAsTouched(){let a;null==(a=this.tagsEditors)||a.forEach(b=>{b.markAllAsTouched()})}validate(){const a=[];let b;null==(b=this.tagsEditors)||b.forEach(c=>{a.push(c.validate())});a.push(VOf(this.tagEditorsFormArray));return _.Ie(a).pipe(_.A(c=>c.every(d=>null===d)?null:{errors:!0}))}writeValue(a){this.onValueChangesSubscription.unsubscribe();this.onValueChangesSubscription=void 0;const {manualEntryGroups:b,keyParentFormGroups:c,namespacedManualEntryGroups:d}=ePf(a),e=
[];c.forEach(({tagKeyParent:f,formGroups:g})=>{e.push(new ISf(f,g))});0<b.length&&e.push(new BRf(b));0<d.length&&e.push(new ARf(d));this.tagEditorsFormArray.clear({emitEvent:!1});for(const f of e)this.tagEditorsFormArray.push(f,{emitEvent:!1});this.tagEditorsFormArray.updateValueAndValidity();this.setUpOnChangeEventEmitter();this.changeDetectorRef.detectChanges()}setUpOnChangeEventEmitter(){this.onValueChangesSubscription=this.tagEditorsFormArray.valueChanges.pipe(_.F(this.destroy$)).subscribe(()=>
{const a=[];this.tagEditorsFormArray.controls.forEach(b=>{a.push(...b.value)});this.onChange(a);KSf(this)})}};_.qW.\u0275fac=function(a){return new (a||_.qW)(_.D(_.vr),_.D(_.Kt),_.D(_.px),_.D(DSf),_.D(_.go),_.D(_.JIe),_.D(_.UA),_.D(_.oSf),_.D(_.Hv))};
_.qW.\u0275cmp=_.m({type:_.qW,selectors:[["tags-editor-v2"]],contentQueries:function(a,b,c){a&1&&(_.eh(c,_.oW,7),_.eh(c,_.tSf,4),_.eh(c,_.uSf,4),_.eh(c,_.vSf,4));if(a&2){let d;_.fh(d=_.gh())&&(b.formStackDescription=d.first);_.fh(d=_.gh())&&(b.additionalFormStackInputs=d);_.fh(d=_.gh())&&(b.valueDropdownCustomErrors=d);_.fh(d=_.gh())&&(b.valueManualEntryCustomErrors=d)}},viewQuery:function(a,b){a&1&&_.ch(GSf,5);if(a&2){let c;_.fh(c=_.gh())&&(b.tagsEditors=c)}},inputs:{tagFormGroupCreator:"tagFormGroupCreator",
disallowDuplicateKeyReason:"disallowDuplicateKeyReason",disabledTagKeyOptionsMatcher:"disabledTagKeyOptionsMatcher",addDisabledReason:"addDisabledReason",currentOrganizationId:"currentOrganizationId",currentProjectId:"currentProjectId",tagKeyOptionsFilterPredicate:"tagKeyOptionsFilterPredicate",manualInputFormat:"manualInputFormat"},features:[_.oh([{provide:_.Qw,useExisting:_.wd(()=>_.qW),multi:!0},{provide:_.Sw,useExisting:_.wd(()=>_.qW),multi:!0}]),_.wg],decls:10,vars:8,consts:()=>[["addDisabledReasonTemplate",
""],["menu",""],["manualEntryHeader",""],["tagsEditor",""],["manualEntryMenu",""],["manuallyEnteredTagsDisabledReasonTemplate",""],["currentScopeDisabledReasonTemplate",""]," Manual Entry "," Select scope ",[3,"ngTemplateOutlet",4,"ngIf"],[1,"cfc-max-width-full",3,"formGroup","ve","veImpression"],["formArrayName","tagEditorsFormArray"],[4,"ngFor","ngForOf"],["class","cfc-space-below-minus-2 cfc-align-right",3,"menuTemplate","menuTemplateData","raised",4,"ngIf"],[3,"ngTemplateOutlet"],["data-test-id",
"tags-editor-v2-fieldset",1,"cfc-border-primary","cfc-gutter-minus-2","cfc-space-below-minus-2"],["data-test-id","tags-editor-v2-fieldset-legend",1,"cfc-text-title-4",3,"id"],[3,"tagKeyParent","showInaccessibleTooltip",4,"ngIf","ngIfElse"],[3,"externalTitleId","formControlName","hideEditorOptions","addDisabledReason","duplicateTagValueMatcher","tagFormGroupCreator","defaultTagKeyParent$","tagKeyOptionsFilterPredicate","tagKeyOrganizations$","showKeyInput","disallowDuplicateKeyReason","disabledTagKeyOptionsMatcher",
"manualInputFormat"],[3,"tagKeyParent","showInaccessibleTooltip"],["tagsEditorFormStackInput","",3,"tagsEditorFormStackInputDisableResizing"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"valueDropdownCustomErrorName","errorVeId"],[3,"valueManualEntryCustomErrorName","errorVeId"],[1,"cfc-space-below-minus-2","cfc-align-right",3,"menuTemplate","menuTemplateData","raised"],["type","button","data-test-id","tags-editor-v2-purview-picker-button","id","tags-editor-purview-picker-button","mat-button",
"",3,"click","ve","veClick","cfcDisable","cfcDisableTooltip","cfcDisableTooltipRich"],[3,"tagFormReason"],["ariaLabelledby","tags-editor-purview-picker-button","menuPanelClass","cfc-width-small"],["header","Current Scope",3,"hasSeparator",4,"ngIf"],["header","Manual Entry"],["label","Manually Enter IDs","id","tags-editor-manual-entry-menu-item","note","Manually enter the IDs of organizations, projects or tags",3,"cfcMenuTriggerFor"],["ariaLabelledby","tags-editor-manual-entry-menu-item"],["header",
"Manually Enter IDs"],["label","Organization",3,"click","ve","veClick","cfcDisable","cfcDisableTooltip","cfcDisableTooltipRich"],["label","Project",3,"click","ve","veClick","cfcDisable","cfcDisableTooltip","cfcDisableTooltipRich"],["label","Tags",3,"click","ve","veClick","cfcDisable","cfcDisableTooltip","cfcDisableTooltipRich"],["header","Current Scope",3,"hasSeparator"],[3,"click","label","note","ve","veClick","cfcDisable","cfcDisableTooltip","cfcDisableTooltipRich"]],template:function(a,b){a&1&&
(_.H(0,eRf,1,1,"ng-container",9),_.K(1,"form",10)(2,"div",11),_.H(3,qRf,18,40,"ng-container",12)(4,sRf,3,8,"cfc-split-button",13),_.W(5,"async"),_.L()(),_.H(6,tRf,1,1,"ng-template",null,0,_.zh)(8,DRf,12,17,"ng-template",null,1,_.zh));a&2&&(_.I("ngIf",b.formStackDescription),_.B(),_.I("formGroup",b.mainFormGroup)("ve",b.ve.TagsEditorV2Form)("veImpression",!0),_.B(2),_.I("ngForOf",b.tagEditorsFormArray.controls),_.B(),_.I("ngIf",_.X(5,6,b.menuData$)))},dependencies:()=>[_.Ox,_.Ny,_.Br,_.Cr,_.Hr,_.vx,
_.Su,_.sx,_.by,_.Sy,_.Az,_.Ry,_.zz,_.Hz,_.mW,_.bx,_.Ww,_.Xw,_.zk,_.ix,_.yk,_.Uz,_.uSf,_.vSf,_.tSf,BSf,_.PRf,_.Ir,MSf,NSf,OSf,LSf],encapsulation:2,changeDetection:0});
var ISf=class extends _.XE{constructor(a,b){super(b);this.keyParent=a;this.tagFormGroupType=0}getTagKeyParent(){return this.keyParent}},BRf=class extends _.XE{constructor(){super(...arguments);this.tagFormGroupType=1}},ARf=class extends _.XE{constructor(){super(...arguments);this.tagFormGroupType=2}},LSf=class{transform(a){if(a instanceof ISf)return a.getTagKeyParent()}};LSf.\u0275fac=function(a){return new (a||LSf)};LSf.\u0275pipe=_.Gd({name:"toTagKeyParent",type:LSf,pure:!0});
var MSf=class{transform(a){return a instanceof ISf||a instanceof ARf}};MSf.\u0275fac=function(a){return new (a||MSf)};MSf.\u0275pipe=_.Gd({name:"showTagKey",type:MSf,pure:!0,standalone:!0});var OSf=class{transform(a){return _.y(a)}};OSf.\u0275fac=function(a){return new (a||OSf)};OSf.\u0275pipe=_.Gd({name:"observableOf",type:OSf,pure:!0});var NSf=class{transform(a,b){return a.statusChanges.pipe(_.A(()=>c=>1===b?IPf(a.errors,c):GPf(a.errors,c)))}};NSf.\u0275fac=function(a){return new (a||NSf)};
NSf.\u0275pipe=_.Gd({name:"duplicateTagValueMatcher",type:NSf,pure:!0});_.rW=class{};_.rW.\u0275fac=function(a){return new (a||_.rW)};_.rW.\u0275mod=_.q({type:_.rW});_.rW.\u0275inj=_.k({imports:[_.Dz,_.Qr,_.wx,_.Zz,_.WE,_.au,_.Sz,_.gR,_.rx,_.zF,_.MC,_.dR,_.pW,CSf,_.nW]});
}catch(e){_._DumpException(e)}
try{
var gmk,hmk,imk,jmk,kmk,lmk,mmk,nmk,omk,pmk,qmk,rmk,umk,vmk,wmk,xmk,ymk,smk,zmk;gmk=function(a){a&1&&(_.N(0),_.U(1),_.O());a&2&&(a=_.S(),_.B(),_.V(" ",a.label," "))};hmk=function(a){if(a&1){const b=_.t();_.K(0,"cfc-tree-node-expander",10);_.R("onExpanderClick",function(){_.v(b);const c=_.S();return _.x(c.toggleCollapsed())});_.L()}a&2&&(a=_.S(),_.I("state",a.isCollapsed()?1:2))};
imk=function(a){if(a&1){const b=_.t();_.K(0,"cfc-message",11)(1,"cfc-message-text");_.P(2,0);_.L();_.K(3,"cfc-message-actions")(4,"button",12);_.R("click",function(){_.v(b);const c=_.S();return _.x(c.toggleCollapsed())});_.P(5,1);_.L()()()}};
jmk=function(a){if(a&1){const b=_.t();_.K(0,"button",13);_.R("click",function(){_.v(b);const c=_.S();return _.x(c.deleteNode(c.node))});_.M(1,"cfc-icon",14);_.L()}a&2&&(a=_.S(),_.Bg("focused",a.isFocused),_.I("cfcTooltip",a.deleteTooltipText)("cfcTooltipRich",!1),_.yg("aria-label",a.getDeleteRowAriaLabel()))};
kmk=function(a,b){a&1&&(_.K(0,"div",18),_.M(1,"div",19)(2,"cfc-tree-editor-node",20),_.L());a&2&&(a=b.$implicit,b=_.S(2),_.B(),_.Bg("withchildren",a.nodeType!==b.TreeEditorNodeType.LEAF)("highlighted",b.isHighlighted()),_.B(),_.I("addLabel",b.addLabel)("deleteTooltipText",b.deleteTooltipText)("node",a)("nodeTemplate",b.nodeTemplate))};
lmk=function(a){if(a&1){const b=_.t();_.K(0,"div",18);_.M(1,"div",21);_.K(2,"div",22);_.U(3);_.L();_.K(4,"cfc-tree-editor-add-button",23);_.R("focusin",function(c){_.v(b);var d=_.S(2);d.treeEditor.highlightedRowID=d.node.rowID;c.stopPropagation();return _.x(void 0)})("focusout",function(c){_.v(b);const d=_.S(2);return _.x(d.onFocusOut(c))})("onAdd",function(){_.v(b);const c=_.S(2);return _.x(c.addChild(c.node))});_.L()()}a&2&&(a=_.S(2),_.B(),_.Bg("highlighted",a.isHighlighted()),_.B(2),_.jh(a.nextNodeNumber),
_.B(),_.I("label",a.addLabel)("ariaLabel",_.nk("Add node {ROW_ID}",{ROW_ID:a.nextNodeNumber}))("showLabel",a.isHighlighted()))};mmk=function(a){a&1&&(_.K(0,"div",15),_.H(1,kmk,3,8,"div",16)(2,lmk,5,6,"div",17),_.L());a&2&&(a=_.S(),_.Bg("highlighted",a.isHighlighted()),_.B(),_.I("ngForOf",a.node.children)("ngForTrackBy",a.trackByRowID),_.B(),_.I("ngIf",a.canHaveChildren()))};
nmk=function(a){a&1&&_.M(0,"div",5);if(a&2){a=_.S().$implicit;const b=_.S();_.Bg("withchildren",a.nodeType!==b.TreeEditorNodeType.LEAF)("highlighted",b.isHighlighted())}};omk=function(a,b){a&1&&(_.K(0,"div",2),_.H(1,nmk,1,4,"div",3),_.M(2,"cfc-tree-editor-node",4),_.L());a&2&&(a=b.$implicit,b=_.S(),_.B(),_.I("ngIf",!0),_.B(),_.I("addLabel",b.addNodeLabel)("deleteTooltipText",b.deleteNodeTooltipText)("node",a)("nodeTemplate",b.nodeTemplateRef))};
pmk=function(a){a&1&&(_.K(0,"div",9),_.U(1),_.L());a&2&&(a=_.S(2),_.B(),_.V(" ",a.nextNodeNumber," "))};
qmk=function(a){if(a&1){const b=_.t();_.K(0,"div",2);_.M(1,"div",6);_.H(2,pmk,2,1,"div",7);_.K(3,"cfc-tree-editor-add-button",8);_.R("focusin",function(){_.v(b);const c=_.S();return _.x(c.highlightedRowID="root")})("onAdd",function(){_.v(b);const c=_.S();return _.x(c.addChild())});_.L()()}a&2&&(a=_.S(),_.B(),_.Bg("highlighted",a.isHighlighted()),_.B(),_.I("ngIf",a.nodeComponents&&0<a.nodeComponents.length),_.B(),_.I("label",a.addNodeLabel)("ariaLabel",_.nk("Add node {ROW_ID}",{ROW_ID:a.nextNodeNumber}))("showLabel",
a.isHighlighted()))};_.tmk=function(a,b,c,d){const e=a.array([]);d=d||e;for(const f of b)e.push(rmk(a,f,c,d));if(c.uniqueNodeControlName)for(const f of e.controls)a=f.get("value"),smk(a,e,d,c.uniqueNodeControlName,c.uniquenessConstraint||0);return e};rmk=function(a,b,c,d){d=_.tmk(a,b.children||[],c,d);b=c.createFormGroup(a,b.value);return a.group({value:b,children:d})};umk=function(a,b){b=[b];a.validator&&b.unshift(a.validator);a.setValidators(b);a.updateValueAndValidity()};
vmk=function(a,b){return c=>c.value?1===a.controls.map(d=>d.get("value").get(b).value).filter(d=>d===c.value).length?null:{cfcTreeEditorNotUnique:!0}:null};wmk=function(a,b){return c=>{if(!c.value)return null;const d=[...a.controls];for(;0<d.length;){var e=d.pop();const f=e.get("value").get(b);if(c!==f&&f.value===c.value)return{cfcTreeEditorNotUnique:!0};e=e.get("children");d.push(...e.controls)}return null}};
xmk=function(a,b,c){a.controls.map(d=>d.get("value")).map(d=>d.get(b)).forEach(d=>{(!c||c&&d!==c)&&d.updateValueAndValidity({emitEvent:!1})})};ymk=function(a,b,c){for(a=[...a.controls];0<a.length;){var d=a.pop();const e=d.get("value").get(b);(!c||c&&e!==c)&&e.updateValueAndValidity({emitEvent:!1});d=d.get("children");a.push(...d.controls)}};
smk=function(a,b,c,d,e){const f=a.get(d);if(!f)throw Error("Bu`"+d);0===e?(umk(f,vmk(b,d)),f.valueChanges.subscribe(()=>{setTimeout(()=>{xmk(b,d,f)})})):(umk(f,wmk(c,d)),f.valueChanges.subscribe(()=>{setTimeout(()=>{ymk(c,d,f)})}))};zmk={OBJECT:"OBJECT",ARRAY:"ARRAY",LEAF:"LEAF"};var Amk=class{constructor(){this.onAdd=new _.tr}ngOnInit(){}addChild(){this.onAdd.emit()}focus(){this.button.focus()}};Amk.\u0275fac=function(a){return new (a||Amk)};
Amk.\u0275cmp=_.m({type:Amk,selectors:[["cfc-tree-editor-add-button"]],viewQuery:function(a,b){a&1&&_.ch(_.Su,5);if(a&2){let c;_.fh(c=_.gh())&&(b.button=c.first)}},inputs:{label:"label",showLabel:"showLabel",ariaLabel:"ariaLabel"},outputs:{onAdd:"onAdd"},decls:3,vars:5,consts:[["mat-button","","type","button","cfcTooltipPosition","right",1,"cfc-color-secondary","cfc-tree-editor-add-child",3,"click","cfcTooltip","cfcTooltipDisabled","cfcTooltipRich"],["icon","create","size","small"],[4,"ngIf"]],template:function(a,
b){a&1&&(_.K(0,"button",0),_.R("click",function(){return b.addChild()}),_.M(1,"cfc-icon",1),_.H(2,gmk,2,1,"ng-container",2),_.L());if(a&2){let c;_.I("cfcTooltip",b.label)("cfcTooltipDisabled",b.showLabel)("cfcTooltipRich",!1);_.yg("aria-label",null!==(c=b.ariaLabel)&&void 0!==c?c:b.label);_.B(2);_.I("ngIf",b.showLabel)}},dependencies:[_.Ox,_.Cr,_.tu,_.vx,_.Su,_.sx,_.Ly],encapsulation:2});var Bmk=a=>({$implicit:a}),Cmk=new _.Ld("TreeEditor"),Dmk=class{constructor(a,b,c){this.treeEditor=a;this.liveAnnouncer=b;this.elementRef=c;this.rowIdWithoutPrefix="";this.TreeEditorNodeType=zmk;this.isFocused=!1;this.nodeComponents=new _.bh}ngOnInit(){this.rowIdWithoutPrefix=this.node.rowID.substring(5)}deleteNode(a){this.liveAnnouncer.announce("Node removed.");this.treeEditor.deleteNode(a)}addChild(a){this.treeEditor.addChild(a.group,a)}canHaveChildren(){return"LEAF"!==this.node.nodeType}isCollapsed(){return this.treeEditor.isCollapsed(this.node)}toggleCollapsed(){this.treeEditor.setCollapsed(this.node,
!this.isCollapsed())}trackByRowID(a,b){return b.rowID}onFocusIn(a){this.isFocused=!0;const b=this.node.rowID.substring(0,this.node.rowID.lastIndexOf("."));this.treeEditor.highlightedRowID=b;a.stopPropagation()}onFocusOut(a){this.isFocused=!1;this.treeEditor.highlightedRowID=void 0;a.stopPropagation()}isHighlighted(){return this.node.rowID===this.treeEditor.highlightedRowID}getDeleteRowAriaLabel(){return _.nk("Delete resource. Row {ROW_ID}",{ROW_ID:this.rowIdWithoutPrefix})}get nextNodeNumber(){return`${this.rowIdWithoutPrefix}.${this.nodeComponents.length+
1}`}focusFirstFocusableElement(){let a;null==(a=_.Bi(this.elementRef.nativeElement,!0)[0])||a.focus()}};Dmk.\u0275fac=function(a){return new (a||Dmk)(_.D(Cmk),_.D(_.st),_.D(_.ne))};
Dmk.\u0275cmp=_.m({type:Dmk,selectors:[["cfc-tree-editor-node"]],viewQuery:function(a,b){a&1&&(_.ch(Amk,5),_.ch(Dmk,5));if(a&2){let c;_.fh(c=_.gh())&&(b.addButton=c.first);_.fh(c=_.gh())&&(b.nodeComponents=c)}},hostBindings:function(a,b){a&1&&_.R("focusin",function(c){return b.onFocusIn(c)})("focusout",function(c){return b.onFocusOut(c)})},inputs:{nodeTemplate:"nodeTemplate",node:"node",addLabel:"addLabel",deleteTooltipText:"deleteTooltipText"},decls:9,vars:11,consts:()=>[" One or more collapsed fields need your attention. Expand for details. ",
" Show ",["fxLayout","row","role","group",1,"cfc-tree-editor-node"],["class","cfc-tree-editor-expander",3,"state","onExpanderClick",4,"ngIf"],[1,"cfc-tree-editor-node-index",3,"id"],["fxFlex","0 0 auto",1,"cfc-tree-editor-node-outlet"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["type","error",4,"ngIf"],["mat-icon-button","","type","button","class","cfc-tree-editor-delete","cfcTooltipPosition","right",3,"focused","cfcTooltip","cfcTooltipRich","click",4,"ngIf"],["class","cfc-tree-editor-vertical-guide-line",
3,"highlighted",4,"ngIf"],[1,"cfc-tree-editor-expander",3,"onExpanderClick","state"],["type","error"],["mat-raised-button","",3,"click"],["mat-icon-button","","type","button","cfcTooltipPosition","right",1,"cfc-tree-editor-delete",3,"click","cfcTooltip","cfcTooltipRich"],["icon","delete","size","small"],[1,"cfc-tree-editor-vertical-guide-line"],["fxLayout","row",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row",4,"ngIf"],["fxLayout","row"],[1,"cfc-tree-editor-horizontal-guide"],[3,"addLabel",
"deleteTooltipText","node","nodeTemplate"],[1,"cfc-tree-editor-add-child-horizontal-guide"],[1,"cfc-tree-editor-add-child-index"],[3,"focusin","focusout","onAdd","label","ariaLabel","showLabel"]],template:function(a,b){a&1&&(_.K(0,"div",2),_.H(1,hmk,1,1,"cfc-tree-node-expander",3),_.K(2,"div",4),_.U(3),_.L(),_.K(4,"div",5),_.Lg(5,6),_.H(6,imk,6,0,"cfc-message",7),_.L(),_.H(7,jmk,2,5,"button",8),_.L(),_.H(8,mmk,3,5,"div",9));if(a&2){_.yg("aria-labelledby",b.rowIdWithoutPrefix);_.B();_.I("ngIf",b.canHaveChildren());
_.B();_.I("id",b.rowIdWithoutPrefix);_.B();_.jh(b.rowIdWithoutPrefix);_.B(2);a=_.I("ngTemplateOutlet",b.nodeTemplate);var c={parentNodeType:b.node.parentNodeType,id:b.node.rowID,formGroup:b.node.group.get("value"),indexInParent:b.node.indexInParent,isTopLevel:!b.node.parent,level:b.node.level};a("ngTemplateOutletContext",_.rh(9,Bmk,c));_.B();_.I("ngIf",b.isCollapsed()&&!b.node.group.get("children").valid);_.B();_.I("ngIf",b.node.canBeDeleted);_.B();_.I("ngIf",!b.isCollapsed())}},dependencies:[_.Ox,
_.Br,_.Cr,_.Hr,_.oK,_.qK,_.tu,_.vx,_.Su,_.Uu,_.sx,_.uu,_.wu,_.vu,_.Ly,_.aSd,Dmk,Amk],styles:['.cfc-tree-editor-add-child-index[_ngcontent-%COMP%]{color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66));font:var(--cm-sys-type-title-small,400 18px/24px "Roboto");padding-top:4px}.cfc-tree-editor-vertical-guide-line[_ngcontent-%COMP%]{border-left-width:1px;border-style:solid;-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%}.cfc-tree-editor-vertical-guide-line.highlighted[_ngcontent-%COMP%]{-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{width:24px;min-width:24px;margin-right:4px;border-top:var(--cm-sys-color-hairline,rgba(0,0,0,.12)) solid 1px}.cfc-tree-editor-add-child-horizontal-guide.highlighted[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.highlighted[_ngcontent-%COMP%]{border-top-color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}.cfc-tree-editor-add-child-horizontal-guide.withchildren[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.withchildren[_ngcontent-%COMP%]{width:4px;min-width:4px}.cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{margin-top:27px}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%]{margin-top:16px}.cfc-tree-editor-node-index[_ngcontent-%COMP%]{color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66));font:var(--cm-sys-type-title-small,400 18px/24px "Roboto");padding-top:16px;padding-right:4px}.cm-button.cfc-tree-editor-delete[_ngcontent-%COMP%]{--cm-icon-button-color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66));opacity:0;margin-top:8px}.cm-button.cfc-tree-editor-delete.focused[_ngcontent-%COMP%]{opacity:1}.cfc-tree-editor-node[_ngcontent-%COMP%]:hover   .cfc-tree-editor-delete[_ngcontent-%COMP%]{opacity:1}.cfc-tree-editor-expander[_ngcontent-%COMP%]{margin-top:16px}.cfc-tree-editor-vertical-guide-line[_ngcontent-%COMP%]{margin-left:8px}.cfc-tree-editor-node-outlet[_ngcontent-%COMP%]{margin-top:4px}']});var Fmk,Gmk,Hmk;_.Emk=class{constructor(a){this.template=a}};_.Emk.\u0275fac=function(a){return new (a||_.Emk)(_.D(_.$g))};_.Emk.\u0275dir=_.Fd({type:_.Emk,selectors:[["","cfcTreeEditorTemplate",""]]});
Fmk=function(a,b){b.get("value").valueChanges.pipe(_.F(a.destroy),_.dg(b.get("value").value),_.A(c=>({value:c,canHaveChildren:a.canHaveChildren(a.manager.getNodeType(c))})),_.Ff((c,d)=>c.canHaveChildren===d.canHaveChildren),_.Sf()).subscribe(([,c])=>{if(!a.isDeletingNode)if(c.canHaveChildren)a.addChild(b,void 0,c.value);else{for(c=b.get("children");c.length;)c.removeAt(0);_.ua(a.collapsedNodes,b)}});for(const c of b.get("children").controls)Fmk(a,c)};
Gmk=function(a,b){setTimeout(()=>{if(b){for(var c=[],d=b;d;)c.push(d.indexInParent),d=d.parentNode;if(0!==c.length){for(d=a.nodeComponents.get(c.pop());0<c.length;)d=d.nodeComponents.get(c.pop());d&&d.nodeComponents.get(d.nodeComponents.length-1).focusFirstFocusableElement()}}else(c=a.nodeComponents.get(a.nodeComponents.length-1))&&c.focusFirstFocusableElement()})};
Hmk=function(a,b,c,d,e,f,g){return c.controls.map((n,p)=>{const r=`${b}${p+1}`;p={rowID:r,children:[],group:n,nodeType:a.manager.getNodeType(n.get("value").value),parent:f,parentNodeType:d,indexInParent:p,canBeDeleted:!0,level:e,parentNode:g};p.children.push(...Hmk(a,`${r}.`,n.get("children"),a.manager.getNodeType(n.get("value").value),e+1,n,p));return p})};
_.Imk=class{constructor(a,b){this.fb=a;this.cdref=b;this.addNodeLabel="Add node";this.deleteNodeTooltipText="Delete node";this.nodeComponents=new _.bh;this.TreeEditorNodeType=zmk;this.collapsedNodes=[];this.destroy=new _.Yf;this.isDeletingNode=!1}ngOnInit(){for(const a of this.nodesFormArray.controls)Fmk(this,a);this.nodesFormArray.valueChanges.pipe(_.F(this.destroy)).subscribe(()=>{this.nodes=Hmk(this,"root.",this.nodesFormArray,"OBJECT",0)});this.nodes=Hmk(this,"root.",this.nodesFormArray,"OBJECT",
0)}addChild(a,b,c){var d=a?a.value:void 0;c&&(d.value=c);c=this.manager.createChild(a?d:void 0);a=a?a.get("children"):this.nodesFormArray;c=rmk(this.fb,{value:c},this.manager,this.nodesFormArray);Fmk(this,c);a.push(c);this.manager.uniqueNodeControlName&&(d=this.manager.uniquenessConstraint||0,smk(c.get("value"),a,this.nodesFormArray,this.manager.uniqueNodeControlName,d));Gmk(this,b);this.cdref.detectChanges()}setCollapsed(a,b){a=a.group;b?_.Eaa(this.collapsedNodes,a):_.ua(this.collapsedNodes,a)}isCollapsed(a){return _.ta(this.collapsedNodes,
a.group)}deleteNode(a){this.isDeletingNode=!0;const b=a.parent?a.parent.get("children"):this.nodesFormArray;b.removeAt(a.indexInParent);this.manager.uniqueNodeControlName&&(0===(this.manager.uniquenessConstraint||0)?xmk(b,this.manager.uniqueNodeControlName):ymk(this.nodesFormArray,this.manager.uniqueNodeControlName));this.isDeletingNode=!1;this.moveFocusOnDelete(a);this.cdref.detectChanges()}ngAfterContentInit(){this.nodeTemplateRef=this.nodeTemplate.template;this.cdref.detectChanges()}ngOnDestroy(){this.destroy.next()}trackByRowID(a,
b){return b.rowID}isHighlighted(){return"root"===this.highlightedRowID}get nextNodeNumber(){return this.nodeComponents.length+1}moveFocusOnDelete(a){setTimeout(()=>{const b=[];for(var c=a;c;)b.push(c.indexInParent),c=c.parentNode;c=this.addBtn;let d=this.nodeComponents.get(b.pop());for(;0<b.length;)c=d.addButton,d=d.nodeComponents.get(b.pop());d?d.focusFirstFocusableElement():c.focus()})}canHaveChildren(a){return"LEAF"!==a}};_.Imk.\u0275fac=function(a){return new (a||_.Imk)(_.D(_.px),_.D(_.vr))};
_.Imk.\u0275cmp=_.m({type:_.Imk,selectors:[["cfc-tree-editor"]],contentQueries:function(a,b,c){a&1&&_.eh(c,_.Emk,5);if(a&2){let d;_.fh(d=_.gh())&&(b.nodeTemplate=d.first)}},viewQuery:function(a,b){a&1&&(_.ch(Amk,5),_.ch(Dmk,5));if(a&2){let c;_.fh(c=_.gh())&&(b.addBtn=c.first);_.fh(c=_.gh())&&(b.nodeComponents=c)}},inputs:{manager:"manager",nodesFormArray:"nodesFormArray",addNodeLabel:"addNodeLabel",deleteNodeTooltipText:"deleteNodeTooltipText"},features:[_.oh([{provide:Cmk,useExisting:_.Imk}])],decls:3,
vars:7,consts:[["fxLayout","row",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row",4,"ngIf"],["fxLayout","row"],["class","cfc-tree-editor-horizontal-guide",3,"withchildren","highlighted",4,"ngIf"],[3,"addLabel","deleteTooltipText","node","nodeTemplate"],[1,"cfc-tree-editor-horizontal-guide"],[1,"cfc-tree-editor-add-child-horizontal-guide"],["class","cfc-tree-editor-add-child-index",4,"ngIf"],[3,"focusin","onAdd","label","ariaLabel","showLabel"],[1,"cfc-tree-editor-add-child-index"]],template:function(a,
b){a&1&&(_.K(0,"div"),_.H(1,omk,3,5,"div",0)(2,qmk,4,6,"div",1),_.L());a&2&&(_.Bg("cfc-tree-editor-vertical-guide-line",!0)("highlighted",b.isHighlighted()),_.B(),_.I("ngForOf",b.nodes)("ngForTrackBy",b.trackByRowID),_.B(),_.I("ngIf",!0))},dependencies:[_.Br,_.Cr,_.oK,Dmk,Amk],styles:['.cfc-tree-editor-add-child-index[_ngcontent-%COMP%]{color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66));font:var(--cm-sys-type-title-small,400 18px/24px "Roboto");padding-top:4px}.cfc-tree-editor-vertical-guide-line[_ngcontent-%COMP%]{border-left-width:1px;border-style:solid;-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-hairline,rgba(0,0,0,.12)) 16px) 1 100%}.cfc-tree-editor-vertical-guide-line.highlighted[_ngcontent-%COMP%]{-webkit-border-image:-webkit-linear-gradient(bottom,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%;border-image:linear-gradient(to top,transparent,transparent 16px,var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66)) 16px) 1 100%}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{width:24px;min-width:24px;margin-right:4px;border-top:var(--cm-sys-color-hairline,rgba(0,0,0,.12)) solid 1px}.cfc-tree-editor-add-child-horizontal-guide.highlighted[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.highlighted[_ngcontent-%COMP%]{border-top-color:var(--cm-sys-color-on-surface-variant,rgba(0,0,0,.66))}.cfc-tree-editor-add-child-horizontal-guide.withchildren[_ngcontent-%COMP%], .cfc-tree-editor-horizontal-guide.withchildren[_ngcontent-%COMP%]{width:4px;min-width:4px}.cfc-tree-editor-horizontal-guide[_ngcontent-%COMP%]{margin-top:27px}.cfc-tree-editor-add-child-horizontal-guide[_ngcontent-%COMP%]{margin-top:16px}']});_.Jmk=class{};_.Jmk.\u0275fac=function(a){return new (a||_.Jmk)};_.Jmk.\u0275mod=_.q({type:_.Jmk});_.Jmk.\u0275inj=_.k({imports:[_.Dz,_.Qr,_.tK,_.Cu,_.wx,_.Du,_.Rz,_.iSd]});
}catch(e){_._DumpException(e)}
try{
var wOf,xOf,yOf,zOf,AOf,DOf,EOf,FOf,GOf;wOf=function(a){a&1&&_.M(0,"span")};xOf=function(a){a&1&&_.P(0,5)};yOf=function(a){a&1&&_.P(0,6)};zOf=function(a,b){a&1&&(_.K(0,"mat-option",17),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a.value),_.B(),_.V(" ",a.displayName," "))};AOf=function(a){a&1&&(_.K(0,"cm-error",18),_.P(1,7),_.L())};
_.BOf=function(a,b){let c=!1,d=void 0;void 0!==b&&null!==b&&(c=!0,d=""===b?"empty":b);b=a.control({value:c,disabled:!!d});const e=a.control({value:d,disabled:!c},[_.Mo]);b.valueChanges.subscribe(f=>{f?e.enable():e.disable()});return a.group({collation:e,hasDefaultCollation:b})};_.COf=function(a){let b;if(null==(b=a.get("hasDefaultCollation"))?0:b.value){let c;a=null==(c=a.get("collation"))?void 0:c.value;return"empty"===a?"":a}};DOf=function(a){a&1&&_.M(0,"span",12)};EOf=function(a){a&1&&_.P(0,4)};
FOf=function(a){a&1&&_.P(0,5)};GOf=function(a,b){a&1&&(_.K(0,"mat-option",13),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",a," "))};_.HOf=function(a,b){let c=void 0;void 0!==b&&null!==b&&(c=void 0===b?"ROUNDING_MODE_UNSPECIFIED":b);b=a.control({value:c,disabled:!1},[]);return a.group({defaultRoundingMode:b})};_.IOf=function(a){let b;a=null==(b=a.get("defaultRoundingMode"))?void 0:b.value;if("object"!==typeof a||void 0!==(null==a?void 0:a.value))return a};
_.JOf=class{constructor(){this.isTable=!1;this.defaultCollationOptions=[{displayName:"[empty] (case sensitive)",value:"empty"},{displayName:"und:ci (case insensitive)",value:"und:ci"}]}};_.JOf.\u0275fac=function(a){return new (a||_.JOf)};
_.JOf.\u0275cmp=_.m({type:_.JOf,selectors:[["bq-collation-picker"]],inputs:{isTable:"isTable"},features:[_.oh([],[_.GC])],decls:17,vars:6,consts:()=>[["tableHelperText",""],["datasetHelperText",""]," Default Collation\n"," Enable default collation ","Default Collation"," If checked, user must select default collation. Default collation can be created or altered later. User cannot disable default collation once it is enabled. If unchecked, default collation will inherit the setting from the dataset. ",
" If checked, user must select default collation. Default collation can be created or altered later. User cannot disable default collation once it is enabled. If unchecked, default collation will have case-sensitive behavior. "," Collation is required. ",[1,"cfc-text-title-4"],[1,"cfc-form-control-wrapper"],["formControlName","hasDefaultCollation"],["ariaLabel","Help with enable default collation",1,"cfc-form-control-suffix","cfc-button-small"],[4,"ngIf","ngIfThen","ngIfElse"],["id","default-collation-label"],
["cfcDisableTooltip","No default collation","aria-labelledby","default-collation-label","formControlName","collation","optionsAriaLabel","Default collation options",3,"isRequired"],[3,"value",4,"ngFor","ngForOf"],["matError","",4,"cfcDebounceErrorFor"],[3,"value"],["matError",""]],template:function(a,b){a&1&&(_.K(0,"p",8),_.P(1,2),_.L(),_.K(2,"div",9)(3,"mat-checkbox",10),_.P(4,3),_.L(),_.K(5,"cfc-help-button",11),_.H(6,wOf,1,0,"span",12)(7,xOf,1,0,"ng-template",null,0,_.zh)(9,yOf,1,0,"ng-template",
null,1,_.zh),_.L()(),_.K(11,"mat-form-field")(12,"mat-label",13),_.P(13,4),_.L(),_.K(14,"cfc-select",14),_.H(15,zOf,2,2,"mat-option",15),_.L(),_.H(16,AOf,2,0,"cm-error",16),_.L());if(a&2){a=_.hh(8);const c=_.hh(10);_.B(6);_.I("ngIf",b.isTable)("ngIfThen",a)("ngIfElse",c);_.B(8);_.I("isRequired",!0);_.B();_.I("ngForOf",b.defaultCollationOptions);_.B();_.I("cfcDebounceErrorFor","required")}},dependencies:()=>[_.Ox,_.hy,_.iy,_.fy,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Qv,_.mz,_.Jx,_.UE,_.iB,_.Br,_.Cr,_.Ww,_.ix,
_.lz,_.Wt,_.pz],encapsulation:2,changeDetection:0});_.KOf=class{};_.KOf.\u0275fac=function(a){return new (a||_.KOf)};_.KOf.\u0275mod=_.q({type:_.KOf});_.KOf.\u0275inj=_.k({imports:[_.Zz,_.Dz,_.jy,_.Cx,_.Kx,_.WE,_.kB,_.rx,_.XB]});_.LOf=class{constructor(){this.isUpdate=this.isTable=!1}get defaultRoundingModeOptions(){return this.isUpdate?Object.keys(_.FHd).filter(a=>"ROUNDING_MODE_UNSPECIFIED"!==a):Object.keys(_.FHd)}};_.LOf.\u0275fac=function(a){return new (a||_.LOf)};
_.LOf.\u0275cmp=_.m({type:_.LOf,selectors:[["bq-default-rounding-mode-picker"]],inputs:{isTable:"isTable",isUpdate:"isUpdate"},features:[_.oh([],[_.GC])],decls:13,vars:4,consts:()=>[["tableHelperText",""],["datasetHelperText",""]," Default Rounding Mode\n","Default Rounding Mode"," If not set, the table default rounding mode will be inherited from the dataset and will apply to all DECIMAL (numeric and bignumeric) columns created. This setting can be created or altered later and if altered, will only apply to columns added after the setting is changed. ",
" The dataset default rounding mode will be applied to any new table created within this dataset. Default rounding mode can be created or altered later. ",[1,"cfc-text-title-4"],[1,"cfc-form-control-wrapper"],["class","cfc-text-caption cfc-space-last","id","default-rounding-mode-help-text",4,"ngIf","ngIfThen","ngIfElse"],["id","default-rounding-mode-label"],["aria-labelledby","default-rounding-mode-label","formControlName","defaultRoundingMode"],[3,"value",4,"ngFor","ngForOf"],["id","default-rounding-mode-help-text",
1,"cfc-text-caption","cfc-space-last"],[3,"value"]],template:function(a,b){a&1&&(_.K(0,"p",6),_.P(1,2),_.L(),_.K(2,"div",7),_.H(3,DOf,1,0,"span",8)(4,EOf,1,0,"ng-template",null,0,_.zh)(6,FOf,1,0,"ng-template",null,1,_.zh),_.L(),_.K(8,"mat-form-field")(9,"mat-label",9),_.P(10,3),_.L(),_.K(11,"cfc-select",10),_.H(12,GOf,2,2,"mat-option",11),_.L()());if(a&2){a=_.hh(5);const c=_.hh(7);_.B(3);_.I("ngIf",b.isTable)("ngIfThen",a)("ngIfElse",c);_.B(9);_.I("ngForOf",b.defaultRoundingModeOptions)}},dependencies:()=>
[_.Ox,_.Ax,_.Bx,_.Xv,_.Sv,_.mz,_.Br,_.Cr,_.Ww,_.ix,_.lz,_.Wt,_.pz],encapsulation:2,changeDetection:0});_.MOf=class{};_.MOf.\u0275fac=function(a){return new (a||_.MOf)};_.MOf.\u0275mod=_.q({type:_.MOf});_.MOf.\u0275inj=_.k({imports:[_.Zz,_.Dz,_.Cx,_.rx,_.XB]});
}catch(e){_._DumpException(e)}
try{
_.PSf={type:1,path:"/bigquery/docs/partitioned-tables"};_.QSf=class{toStringReason(){return"This key has been already selected"}};
}catch(e){_._DumpException(e)}
try{
var Kmk,Mmk,Qmk,Pmk,Lmk,Nmk,Omk,Ymk,Zmk,$mk,ank,bnk,cnk,fnk,gnk,hnk,ink,jnk,knk,lnk,mnk,nnk,onk,pnk,qnk,rnk,snk,tnk,unk,vnk,wnk,xnk,ynk,Ank,Bnk,Cnk,Dnk,Hnk,Enk,Lnk,Nnk,enk,Onk,Pnk;Kmk=function(a,b={}){return"string"===typeof a?a:a.format(b)};Mmk=function(a,b){return Lmk(a)?b?JSON.stringify(b.fromSchema(a),null,4):JSON.stringify(a,null,4):a.map(({name:c,type:d})=>`${c}:${d}`).join(",\n")};Qmk=function(a,b){a=/^\s*\[/.test(a)?Nmk(a,b):Omk(a);if(Array.isArray(a))for(const c of a){const d=Pmk(c,b);if(d)return d}return a};
Pmk=function(a,b){a.name=a.name||"";a.type=(a.type||"STRING").toUpperCase();if(!A6.currentSupportedTypes.includes(a.type))return Kmk(Rmk,{type:a.type,types:A6.currentSupportedTypes.join(", ")});if((b&&b.fieldKeys||Smk).includes("mode")&&(a.mode=(a.mode||"NULLABLE").toUpperCase(),!_.Tmk.includes(a.mode)))return Kmk(Umk,{mode:a.mode,modes:_.Tmk.join(", ")});if(null!=a.fields)for(const c of a.fields)Pmk(c)};
Lmk=function(a){return a.some(b=>b.mode&&"NULLABLE"!==b.mode||"RECORD"===(b.type||"").toUpperCase()||b.maxLength||b.precision||b.scale||b.roundingMode?!0:!!b.description)};Nmk=function(a,b){try{const c=JSON.parse(a),d=b&&b.fieldKeys||Smk;for(const e of c){const f=Object.keys(e).filter(g=>!d.includes(g));if(0<f.length)return Kmk(Vmk,{allKeys:d.join(", "),unknownKeys:f.join(", ")})}return b?b.toSchema(JSON.parse(a)):JSON.parse(a)}catch(c){return Kmk(Wmk,{message:c.message})}};
Omk=function(a){const b=[];if(a=a.trim()){a=a.split(",");for(const d of a){var c=d.split(":");if(2<c.length)return Kmk(Xmk,{format:d});a=c[0].trim();c=2===c.length?c[1].trim().toUpperCase():"STRING";if("RECORD"===c)return Kmk("RECORD type is not supported in simple schema syntax. Use JSON syntax instead");const e=Ymk();if(!e.includes(c))return Kmk(Rmk,{type:c,types:e.join(", ")});b.push({name:a,type:c})}}return b};Ymk=function(){return A6.currentSupportedTypes.filter(a=>"RECORD"!==a)};
Zmk=function(a){a&1&&(_.K(0,"mat-slide-toggle",20),_.P(1,0),_.L())};$mk=function(a){a&1&&(_.K(0,"span"),_.U(1),_.L());a&2&&(a=_.S(2),_.B(),_.V(" ",a.code.errors.schemaError," "))};ank=function(a){a&1&&(_.N(0),_.M(1,"cfc-code-editor",21),_.K(2,"cfc-form-error",22),_.H(3,$mk,2,1,"span",18),_.L(),_.O());a&2&&(a=_.S(),_.B(),_.I("height",a.CODE_EDITOR_HEIGHT)("options",a.testEditorOptions),_.B(),_.I("control",a.code),_.B(),_.I("ngIf",a.code.errors))};
bnk=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,3),_.L());a&2&&(a=_.S(3),_.B(),_.Sg(a.fieldNameMaxLength),_.Tg(1))};cnk=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,4),_.L())};fnk=function(a){a&1&&(_.K(0,"cm-error",37),_.U(1),_.L());a&2&&(_.S(3),_.B(),_.V(" ",dnk.format({url:_.Lk(enk)})," "))};gnk=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,5),_.L())};hnk=function(a,b){a&1&&(_.K(0,"mat-option",38),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",a," "))};
ink=function(a){a&1&&(_.K(0,"mat-option",38),_.U(1),_.L());a&2&&(a=_.S(3),_.I("value",a.field.controls.type.value),_.B(),_.V(" ",a.field.controls.type.value," "))};jnk=function(a,b){a&1&&(_.K(0,"mat-option",38),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",a," "))};knk=function(a){a&1&&(_.N(0,39),_.K(1,"mat-form-field",30)(2,"mat-label"),_.P(3,6),_.L(),_.K(4,"cfc-select",40),_.H(5,jnk,2,2,"mat-option",32),_.L()(),_.O());a&2&&(a=_.S(3),_.B(5),_.I("ngForOf",a.rangeElementTypes))};
lnk=function(a,b){a&1&&(_.K(0,"mat-option",38),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",a," "))};mnk=function(a){a&1&&(_.K(0,"mat-form-field",30)(1,"mat-label"),_.P(2,7),_.L(),_.K(3,"cfc-select",41),_.H(4,lnk,2,2,"mat-option",32),_.L()());a&2&&(a=_.S(3),_.B(4),_.I("ngForOf",a.modes))};nnk=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,9),_.L());a&2&&(a=_.S(4),_.B(),_.Sg(a.VALUE_TEMPLATE_MAX_LENGTH),_.Tg(1))};
onk=function(a){a&1&&(_.K(0,"mat-form-field",30)(1,"mat-label"),_.P(2,8),_.L(),_.K(3,"textarea",42),_.U(4," "),_.L(),_.H(5,nnk,2,1,"cm-error",29),_.L());a&2&&(_.B(3),_.I("rows",2),_.B(2),_.I("cfcDebounceErrorFor","maxlength"))};pnk=function(a){a&1&&(_.K(0,"cm-error",37),_.U(1,"Max length must be a number."),_.L())};qnk=function(a){a&1&&(_.K(0,"mat-form-field",43)(1,"mat-label"),_.P(2,10),_.L(),_.M(3,"input",44),_.H(4,pnk,2,0,"cm-error",29),_.L());a&2&&(_.B(4),_.I("cfcDebounceErrorFor","number"))};
rnk=function(a){a&1&&(_.K(0,"cm-error",37),_.U(1,"Precision must be a number."),_.L())};snk=function(a){a&1&&(_.K(0,"mat-form-field",43)(1,"mat-label"),_.P(2,11),_.L(),_.M(3,"input",45),_.H(4,rnk,2,0,"cm-error",29),_.L());a&2&&(_.B(4),_.I("cfcDebounceErrorFor","number"))};tnk=function(a){a&1&&(_.K(0,"cm-error",37),_.U(1,"Scale must be a number."),_.L())};
unk=function(a){a&1&&(_.K(0,"mat-form-field",43)(1,"mat-label"),_.P(2,12),_.L(),_.M(3,"input",46),_.H(4,tnk,2,0,"cm-error",29),_.L());a&2&&(_.B(4),_.I("cfcDebounceErrorFor","number"))};vnk=function(a,b){a&1&&(_.K(0,"mat-option",38),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",a," "))};wnk=function(a){a&1&&(_.K(0,"mat-form-field",30)(1,"mat-label"),_.P(2,13),_.L(),_.K(3,"cfc-select",47),_.H(4,vnk,2,2,"mat-option",32),_.L()());a&2&&(a=_.S(3),_.B(4),_.I("ngForOf",a.roundingModes))};
xnk=function(a){a&1&&(_.K(0,"cm-error",37),_.P(1,15),_.L());a&2&&(a=_.S(4),_.B(),_.Sg(a.DESCRIPTION_MAX_LENGTH),_.Tg(1))};ynk=function(a){a&1&&(_.K(0,"mat-form-field",30)(1,"mat-label"),_.P(2,14),_.L(),_.K(3,"textarea",48),_.U(4," "),_.L(),_.H(5,xnk,2,1,"cm-error",29),_.L());a&2&&(_.B(3),_.I("rows",1),_.B(2),_.I("cfcDebounceErrorFor","maxlength"))};
Ank=function(a,b){a&1&&(_.K(0,"div",26)(1,"mat-form-field",27)(2,"mat-label"),_.P(3,1),_.L(),_.M(4,"input",28),_.H(5,bnk,2,1,"cm-error",29)(6,cnk,2,0,"cm-error",29)(7,fnk,2,1,"cm-error",29)(8,gnk,2,0,"cm-error",29),_.L(),_.K(9,"mat-form-field",30)(10,"mat-label"),_.P(11,2),_.L(),_.K(12,"cfc-select",31),_.H(13,hnk,2,2,"mat-option",32)(14,ink,2,2,"mat-option",33),_.L()(),_.H(15,knk,6,1,"ng-container",34)(16,mnk,5,1,"mat-form-field",35)(17,onk,6,2,"mat-form-field",35)(18,qnk,5,1,"mat-form-field",36)(19,
snk,5,1,"mat-form-field",36)(20,unk,5,1,"mat-form-field",36)(21,wnk,5,1,"mat-form-field",35)(22,ynk,6,2,"mat-form-field",35),_.L());if(a&2){a=b.$implicit;b=_.S(2);_.I("formGroup",a.formGroup);_.B();_.I("ngClass","cfc-dc-schema-form-name-input-"+a.level);_.B(4);_.I("cfcDebounceErrorFor","maxlength");_.B();_.I("cfcDebounceErrorFor","required");_.B();_.I("cfcDebounceErrorFor","pattern");_.B();_.I("cfcDebounceErrorFor","cfcTreeEditorNotUnique");_.B(5);_.I("ngForOf",b.types);_.B();var c=(c=a.formGroup.controls.type.value)&&
!b.types.includes(c);_.I("ngIf",c);_.B();_.I("ngIf","RANGE"===a.formGroup.controls.type.value);_.B();_.I("ngIf",b.enabledFieldKeys.includes("mode"));_.B();_.I("ngIf",b.enabledFieldKeys.includes("valueTemplate"));_.B();b.allowTypeParameters?(c=a.formGroup.controls.type.value,c="STRING"===c||"BYTES"===c):c=!1;_.I("ngIf",c);_.B();_.I("ngIf",znk(b,a.formGroup));_.B();_.I("ngIf",znk(b,a.formGroup));_.B();_.I("ngIf",znk(b,a.formGroup));_.B();_.I("ngIf",b.enabledFieldKeys.includes("description"))}};
Bnk=function(a){a&1&&(_.K(0,"div",23)(1,"cfc-tree-editor",24),_.H(2,Ank,23,16,"ng-template",25),_.L()());a&2&&(a=_.S(),_.B(),_.I("nodesFormArray",a.fieldArray)("manager",a.treeManager))};Cnk=function(a,b={}){return{schemaError:"string"===typeof a?a:a.format(b)}};
_.Gnk=function({fb:a,fields:b,editAsText:c=!1,treeManager:d,converter:e,fieldNameMaxLength:f}){const g=a.group({editAsText:[c]}),n=Dnk(e?e.toSchema(b):b),p=r=>Enk(r,e);d=d||new Fnk(f,[]);c?g.addControl("code",a.control(Mmk(b,e),[p])):(b=_.tmk(a,n,d),g.addControl("fields",b));return a.group({schemaEditor:g})};Dnk=function(a){return a.map(b=>Hnk(b,0))};
Hnk=function(a,b){const c={value:{name:a.name,type:a.type,mode:a.mode,description:a.description,valueTemplate:a.valueTemplate,maxLength:a.maxLength,precision:a.precision,scale:a.scale,depth:b}};a=a.fields||[];0<a.length&&(c.children=a.map(d=>Hnk(d,b+1)));return c};Enk=function(a,b){a=Qmk(a.value||"",b);if(!Array.isArray(a))return Cnk(a);for(b=0;b<a.length;++b)if(!a[b].name)return Cnk(Jnk,{index:b});b=new Set;for(const {name:c}of a){if(b.has(c))return Cnk(Knk,{name:c});b.add(c)}return null};
_.Mnk=function(a){{a=a.get("schemaEditor");const b=a.value;if(b.editAsText){if(a=Qmk(b.code),!Array.isArray(a))throw Error("Cu");}else a=Lnk(a.get("fields"))}return a};Lnk=function(a){return a.value.map(b=>Nnk(b))};
Nnk=function({value:a,children:b}){const c=a.type,d=a.mode,e=a.description,f=a.valueTemplate,g=a.maxLength,n=a.precision,p=a.scale,r=a.roundingMode,u=a.rangeElementType;return Object.assign({},{name:a.name,type:c},d&&{mode:d},e&&{description:e},f&&{valueTemplate:f},b&&b.length&&{fields:b.map(Nnk)},g&&{maxLength:g},n&&{precision:n},p&&{scale:p},r&&{roundingMode:r},"RANGE"===c&&(null==u?void 0:u.type)&&{rangeElementType:u})};enk={type:1,path:"/bigquery/docs/schemas#column_names"};
_.Tmk=["NULLABLE","REQUIRED","REPEATED"];Onk=["NULLABLE","REPEATED"];Pnk=new _.kr("45412633");var A6=class{static get currentSupportedTypes(){return Qnk}static get currentSupportedRangeElementTypes(){return Rnk}constructor(a){_.Xc(Pnk)?(Qnk=Snk.concat("RANGE"),Rnk=Tnk):_.YA(a,378).pipe(_.A(b=>b?{types:Snk.concat(["RANGE"]),rangeElementTypes:Tnk}:{types:Snk,rangeElementTypes:[]}),_.fg(({types:b,rangeElementTypes:c})=>{Qnk=b;Rnk=c})).subscribe()}init(){}},Snk=_.RTf.concat("JSON"),Qnk=Snk,Tnk=["DATE","DATETIME","TIMESTAMP"],Rnk=[];A6.\u0275fac=function(a){return new (a||A6)(_.l(_.ZA))};
A6.\u0275prov=_.h({token:A6,factory:A6.\u0275fac,providedIn:"root"});var Smk=["name","type","mode","description","fields"];var Rmk=new _.dk("Invalid type {type}. Supported types are: {types}"),Vmk=new _.dk("Unknown key(s): {unknownKeys}. Supported keys are: {allKeys}"),Umk=new _.dk("Invalid mode {mode}. Supported modes are: {modes}"),Wmk=new _.dk("Invalid JSON. Original error message: {message}"),Xmk=new _.dk("Invalid format {format}. Expected name:type");var Knk,Jnk,dnk,Fnk,znk,Vnk;Knk=new _.dk("Duplicate field name {name}");Jnk=new _.dk("Field name required at index {index}");dnk=new _.dk("For allowed characters, please refer to {url}");
Fnk=class{constructor(a=64,b){this.fieldNameMaxLength=a;this.enabledFieldKeys=b;this.uniqueNodeControlName="name";this.uniquenessConstraint=0}getNodeType(a){return"RECORD"===a.type?"OBJECT":"LEAF"}createChild(a){a={name:"",type:"STRING",depth:a?a.value.depth+1:0};this.enabledFieldKeys.includes("mode")&&(a.mode="NULLABLE");a.rangeElementType={type:"DATE"};return a}createFormGroup(a,b){const c=b.rangeElementType;return a.group({name:[b.name,[_.sk(this.fieldNameMaxLength),_.Mo,_.tk(/^[\p{L}\p{N}\p{Pc}\p{Pd}\p{M}\s&%=>+:'<#|]+$/u)]],
type:[b.type,[_.Mo]],mode:[b.mode],description:[b.description,[_.sk(2E3)]],valueTemplate:[b.valueTemplate,[_.sk(2E3)]],maxLength:[b.maxLength],precision:[b.precision],scale:[b.scale],roundingMode:[b.roundingMode],rangeElementType:a.group({type:[null==c?void 0:c.type]})})}};znk=function(a,b){if(!a.allowTypeParameters)return!1;a=b.controls.type.value;return"NUMERIC"===a||"BIGNUMERIC"===a};
_.Unk=class{get types(){return A6.currentSupportedTypes}get rangeElementTypes(){return A6.currentSupportedRangeElementTypes}get modes(){return this.nonRequiredModeOnly?Onk:_.Tmk}get formGroup(){return this.parentFormGroupName.control.controls.schemaEditor}get editAsTextControl(){return this.formGroup.controls.editAsText}get fieldArray(){return this.formGroup.controls.fields}get code(){return this.formGroup.controls.code}constructor(a,b,c){this.parentFormGroupName=a;this.fb=b;this.fields=[];this.allowTypeParameters=
this.nonRequiredModeOnly=!1;this.fieldNameMaxLength=64;this.enableEditAsText=!0;this.enabledFieldKeys=["mode","description","roundingMode"];this.roundingModes=Object.keys(_.FHd);this.testEditorOptions={minimap:{enabled:!1}};this.CODE_EDITOR_HEIGHT="600px";this.VALUE_TEMPLATE_MAX_LENGTH=this.DESCRIPTION_MAX_LENGTH=2E3;this.schemaError=d=>Enk(d,this.converter);this.destroy$=new _.Yf;this.validFields=[];c.init()}ngOnInit(){this.treeManager=new Fnk(this.fieldNameMaxLength,this.enabledFieldKeys);this.editAsTextControl.valueChanges.pipe(_.F(this.destroy$)).subscribe(a=>
{if(a){var b=Lnk(this.fieldArray);this.validFields=b;this.formGroup.removeControl("fields");this.formGroup.addControl("code",this.fb.control(Mmk(b,this.converter),[this.schemaError]))}else a=null==(b=this.code)?void 0:b.value,b=Qmk(a||"",this.converter),Array.isArray(b)||(b=this.validFields||[]),this.formGroup.removeControl("code"),b=Dnk(b),b=_.tmk(this.fb,b,this.treeManager),this.formGroup.addControl("fields",b);this.formGroup.updateValueAndValidity()})}ngOnDestroy(){this.destroy$.next()}};
_.Unk.\u0275fac=function(a){return new (a||_.Unk)(_.D(_.hx,8),_.D(_.px),_.D(A6))};
_.Unk.\u0275cmp=_.m({type:_.Unk,selectors:[["dc-schema-form-editor"]],inputs:{fields:"fields",converter:"converter",nonRequiredModeOnly:"nonRequiredModeOnly",allowTypeParameters:"allowTypeParameters",fieldNameMaxLength:"fieldNameMaxLength",enableEditAsText:"enableEditAsText",enabledFieldKeys:"enabledFieldKeys"},features:[_.oh([],[_.GC])],decls:4,vars:3,consts:()=>[" Edit as text "," Field name "," Type "," Field name should not exceed \ufffd0\ufffd characters. "," Field name is required "," Duplicate field name ",
" Range element type "," Mode "," Value template "," Value template should not exceed \ufffd0\ufffd characters. "," Max length "," Precision "," Scale "," Rounding Mode "," Description "," Description should not exceed \ufffd0\ufffd characters. ",["formArrayName","schemaEditor"],["formControlName","editAsText",4,"ngIf"],[4,"ngIf"],["role","group",4,"ngIf"],["formControlName","editAsText"],["language","json","formControlName","code","name","codeditor","aria-label","Edit schema as text",3,"height",
"options"],["errorFor","schemaError",3,"control"],["role","group"],["addNodeLabel","Add field","deleteNodeTooltipText","Delete field",1,"cfc-space-above-base",3,"nodesFormArray","manager"],["cfcTreeEditorTemplate",""],[1,"cfc-inline-form-row","cfc-dc-schema-inline-form-row",3,"formGroup"],[1,"cfc-inline-form-control",3,"ngClass"],"formControlName name required  matInput ".split(" "),["matError","",4,"cfcDebounceErrorFor"],[1,"cfc-inline-form-control"],"formControlName;type;required;;optionsAriaLabel;Type options".split(";"),
[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["formGroupName","rangeElementType",4,"ngIf"],["class","cfc-inline-form-control",4,"ngIf"],["class","cfc-inline-form-control cfc-dc-schema-form-type-parameters",4,"ngIf"],["matError",""],[3,"value"],["formGroupName","rangeElementType"],["formControlName","type","optionsAriaLabel","Range element type options for range types"],["formControlName","mode","optionsAriaLabel","Mode options"],["matInput","","formControlName","valueTemplate",3,"rows"],[1,
"cfc-inline-form-control","cfc-dc-schema-form-type-parameters"],"matInput  formControlName maxLength cfcNumberInput ".split(" "),"matInput  formControlName precision cfcNumberInput ".split(" "),"matInput  formControlName scale cfcNumberInput ".split(" "),["formControlName","roundingMode"],["matInput","","formControlName","description",3,"rows"]],template:function(a,b){a&1&&(_.K(0,"div",16),_.H(1,Zmk,2,0,"mat-slide-toggle",17)(2,ank,4,4,"ng-container",18)(3,Bnk,3,2,"div",19),_.L());a&2&&(_.B(),_.I("ngIf",
b.enableEditAsText),_.B(),_.I("ngIf",b.editAsTextControl.value&&b.code),_.B(),_.I("ngIf",!b.editAsTextControl.value&&b.fieldArray))},dependencies:[_.Ox,_.SO,_.Ar,_.Br,_.Cr,_.Jx,_.rD,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Qv,_.Gx,_.Hx,_.Ex,_.Wt,_.wk,_.Ww,_.Xw,_.kx,_.zk,_.ix,_.hx,_.yk,_.mz,_.lz,_.pz,_.vz,_.wz,_.uz,_.Imk,_.Emk],styles:[".cfc-dc-schema-inline-form-row[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-bottom:0}.cfc-dc-schema-inline-form-row[_ngcontent-%COMP%]   .mat-form-field-type-cfc-select[_ngcontent-%COMP%]{width:100%;max-width:120px}.cfc-dc-schema-form-type-parameters[_ngcontent-%COMP%]{max-width:80px}@media (max-width:335px){.cfc-dc-schema-form-name-input-0[_ngcontent-%COMP%]{width:192px}.cfc-dc-schema-form-name-input-1[_ngcontent-%COMP%]{width:176px}.cfc-dc-schema-form-name-input-2[_ngcontent-%COMP%]{width:160px}.cfc-dc-schema-form-name-input-3[_ngcontent-%COMP%]{width:144px}.cfc-dc-schema-form-name-input-4[_ngcontent-%COMP%]{width:128px}.cfc-dc-schema-form-name-input-5[_ngcontent-%COMP%]{width:112px}.cfc-dc-schema-form-name-input-6[_ngcontent-%COMP%]{width:96px}}@media (min-width:335px){.cfc-dc-schema-form-name-input-0[_ngcontent-%COMP%]{width:256px}.cfc-dc-schema-form-name-input-1[_ngcontent-%COMP%]{width:240px}.cfc-dc-schema-form-name-input-2[_ngcontent-%COMP%]{width:224px}.cfc-dc-schema-form-name-input-3[_ngcontent-%COMP%]{width:208px}.cfc-dc-schema-form-name-input-4[_ngcontent-%COMP%]{width:192px}.cfc-dc-schema-form-name-input-5[_ngcontent-%COMP%]{width:176px}.cfc-dc-schema-form-name-input-6[_ngcontent-%COMP%]{width:160px}}\n/*# sourceMappingURL=schema_form_editor.css.map */"]});
Vnk=[_.Dz,_.TO,_.Qr,_.Kx,_.sD,_.xE,_.Cx,_.Ix,_.Zt,_.GD,_.rx,_.XB,_.xz,_.Jmk];_.B6=class{};_.B6.\u0275fac=function(a){return new (a||_.B6)};_.B6.\u0275mod=_.q({type:_.B6});_.B6.\u0275inj=_.k({imports:[Vnk]});
}catch(e){_._DumpException(e)}
try{
_.$h("pm_bigquery_create_table_subtask");
var Gvk=function(a,b){const c={type:a,partition:void 0};2===a?c.partition=Object.assign({range:{}},b):1===a&&(void 0!==b.requirePartitionFilter&&(c.requirePartitionFilter=b.requirePartitionFilter),c.partition=Object.assign({type:"DAY"},b));return c},Hvk=function(a){if(1===a.type&&a.partition){var b=a.partition;a.requirePartitionFilter&&(b.requirePartitionFilter=a.requirePartitionFilter);return b}},Ivk=function(a){a&1&&(_.K(0,"cm-error",8),_.P(1,3),_.L())},Jvk=function(a){const b=a.value;return!a.disabled&&
b.clustering?{fields:b.clustering.split(",").map(c=>c.trim()).filter(c=>0<c.length)}:void 0},Kvk=function(a,b){a&1&&(_.K(0,"mat-option",1),_.U(1),_.W(2,"connectionDisplayName"),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",_.X(2,2,a)," "))},Lvk=function(a){a&1&&(_.K(0,"cm-error",6)(1,"mat-label"),_.U(2),_.L()());a&2&&(a=_.S(),_.B(2),_.jh(a.fieldRequiredErrorText))},Mvk=function(a,b=null){return a.group({connection:[b,[]]})},Nvk=function(a){a&1&&(_.K(0,"div",18),_.M(1,"dc-schema-form-editor"),
_.L())},Ovk=function(a,b){return _.TIb(a.type||"",b)},Pvk=function(a,b){a&1&&(_.K(0,"mat-option",36),_.U(1),_.W(2,"partitionDisplayName"),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",_.X(2,2,a)," "))},Qvk=function(a,b){a&1&&(_.K(0,"mat-option",36),_.U(1),_.W(2,"partitionDisplayName"),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",_.X(2,2,a)," "))},Rvk=function(a){a&1&&(_.K(0,"mat-optgroup",37),_.H(1,Qvk,3,4,"mat-option",29),_.L());a&2&&(a=_.S(),_.B(),_.I("ngForOf",a.columnPartitioningOptions))},
Svk=function(a){a&1&&(_.K(0,"cm-error",38),_.P(1,4),_.L())},Tvk=function(a){a&1&&_.P(0,5,1)},Uvk=function(a){a&1&&(_.K(0,"div")(1,"cfc-form-label",39),_.Pg(2,5),_.K(3,"cfc-form-label-tooltip"),_.H(4,Tvk,1,0,"ng-template",40),_.L(),_.Qg(),_.L(),_.K(5,"fieldset",41)(6,"mat-checkbox",42),_.P(7,6),_.L()()());a&2&&(_.S(),a=_.hh(17),_.B(4),_.I("ngTemplateOutlet",a))},Vvk=function(a){a&1&&_.P(0,7,1)},Wvk=function(a){a&1&&(_.N(0),_.K(1,"mat-radio-button",46),_.P(2,9),_.L(),_.K(3,"mat-radio-button",47),_.P(4,
10),_.L(),_.K(5,"mat-radio-button",48),_.P(6,11),_.L(),_.O())},Xvk=function(a){a&1&&(_.K(0,"div")(1,"cfc-form-label",43),_.Pg(2,7),_.K(3,"cfc-form-label-tooltip"),_.H(4,Vvk,1,0,"ng-template",40),_.L(),_.Qg(),_.L(),_.K(5,"mat-radio-group",44)(6,"mat-radio-button",45),_.P(7,8),_.L(),_.H(8,Wvk,7,0,"ng-container",34),_.L()());if(a&2){a=_.S();const b=_.hh(19);_.B(4);_.I("ngTemplateOutlet",b);_.B(4);_.I("ngIf",a.isHourlyPartitioningSupported)}},Yvk=function(a){a&1&&(_.K(0,"cm-error",38),_.P(1,18),_.L())},
Zvk=function(a){a&1&&(_.K(0,"cm-error",38),_.P(1,19),_.L())},$vk=function(a){a&1&&(_.K(0,"cm-error",38),_.P(1,20),_.L())},awk=function(a){a&1&&(_.K(0,"cm-error",38),_.P(1,21),_.L())},bwk=function(a){a&1&&(_.K(0,"cm-error",38),_.P(1,22),_.L())},cwk=function(a){a&1&&(_.K(0,"cm-error",38),_.P(1,23),_.L())},ewk=function(a){a&1&&(_.K(0,"div",49)(1,"mat-form-field")(2,"mat-label"),_.P(3,12),_.L(),_.K(4,"mat-hint",50),_.P(5,13),_.L(),_.M(6,"input",51),_.H(7,Yvk,2,0,"cm-error",33)(8,Zvk,2,0,"cm-error",33),
_.L(),_.K(9,"mat-form-field")(10,"mat-label"),_.P(11,14),_.L(),_.K(12,"mat-hint",50),_.P(13,15),_.L(),_.M(14,"input",52),_.H(15,$vk,2,0,"cm-error",33)(16,awk,2,0,"cm-error",33),_.L(),_.K(17,"mat-form-field")(18,"mat-label"),_.P(19,16),_.L(),_.K(20,"mat-hint",50),_.P(21,17),_.L(),_.M(22,"input",53),_.H(23,bwk,2,0,"cm-error",33)(24,cwk,2,0,"cm-error",33),_.L()());a&2&&(_.B(7),_.I("cfcDebounceErrorFor","required"),_.B(),_.I("cfcDebounceErrorFor","invalid-format"),_.B(7),_.I("cfcDebounceErrorFor","required"),
_.B(),_.I("cfcDebounceErrorFor","invalid-format"),_.B(7),_.I("cfcDebounceErrorFor","required"),_.B(),_.I("cfcDebounceErrorFor",_.qh(6,dwk)))},fwk=function(a){a&1&&(_.K(0,"p"),_.P(1,24),_.L(),_.K(2,"a",54),_.U(3," Learn more "),_.L());a&2&&(a=_.S(),_.B(2),_.I("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_QUERYING_PARTITIONED_TABLES))},gwk=function(a){a&1&&(_.K(0,"p"),_.P(1,25),_.L())},iwk=function(a){return a.group({start:["",[_.Mo,hwk]],end:["",[_.Mo,hwk]],interval:["",[_.Mo,hwk,_.pk(1)]]})},hwk=function(a){return isNaN(Number(a.value))?
{"invalid-format":!0}:null},jwk=function(a,b){return"EMPTY_TABLE"!==a&&("AVRO"===b||"DATASTORE_BACKUP"===b||"PARQUET"===b||"ORC"===b||"ICEBERG"===b||"DELTA_LAKE"===b)},kwk=function(a,b,c){const d=!jwk(a,b);return _.MVf?d||"EMPTY_TABLE"!==a&&"EXTERNAL"===c&&("AVRO"===b||"PARQUET"===b||"ORC"===b):d&&"ICEBERG"!==b},lwk=function(a,b){return"CSV"===b&&("GCS"===a||"UPLOAD"===a||"DRIVE"===a)},mwk=function(a,b){return("GCS"===a||"UPLOAD"===a||"DRIVE"===a)&&"NEWLINE_DELIMITED_JSON"===b},nwk=function(a,b){return"DRIVE"===
b&&"GOOGLE_SHEETS"===a},owk=function(a,b){return!("AVRO"===a||"PARQUET"===a||"ORC"===a||"DATASTORE_BACKUP"===a)&&("GCS"===b||"UPLOAD"===b)},pwk=function(a){return"EMPTY_TABLE"===a},qwk=function(a,b){a.fieldDelimiter=b.delimiter;a.quote=b.quote;a.allowJaggedRows=b.shouldAllowJaggedRows;a.allowQuotedNewlines=b.shouldAllowQuotedNewlines},rwk=function(a,b){var c=b.selectedPartitioning;c=2===c.type&&c.partition?c.partition:void 0;const d=Hvk(b.selectedPartitioning);c?a.rangePartitioning=c:d&&(a.timePartitioning=
d);b.selectedClustering&&(a.clustering=b.selectedClustering)},swk=function(a,b){if(b.selectedHivePartitioning){b.hivePartitioningOptions.sourceUriPrefix||(b.hivePartitioningOptions.sourceUriPrefix="");var c=b.hivePartitioningOptions.sourceUriPrefix;if("CUSTOM"===b.hivePartitioningOptions.mode){var d=b.hivePartitioningOptions.sourceUriPrefix;c=b.hivePartitioningSchema;d="/"===d.charAt(d.length-1)?d.substring(0,d.length-1):d;if(c.fields)for(const e of c.fields)d+=`/{${e.name}:${e.type}}`;c=d}a.hivePartitioningOptions=
{mode:b.hivePartitioningOptions.mode,sourceUriPrefix:c};b.hivePartitioningOptions.requirePartitionFilter&&(a.hivePartitioningOptions.requirePartitionFilter=b.hivePartitioningOptions.requirePartitionFilter)}},twk=function(a,b){a.ignoreUnknownValues=b.shouldIgnoreUnknownValues;owk(b.selectedFileFormat,b.selectedSource)&&(a.maxBadRecords=b.maxBadRecords||0);a.sourceFormat=b.selectedFileFormat;switch(b.selectedSource){case "DRIVE":a.sourceUris=[b.driveUri];break;case "GCS":a.sourceUris=[_.$Hi(b.gcsLocation)];
break;case "S3":a.sourceUris=[b.s3Path];break;case "ABS":a.sourceUris=[b.absPath]}},vwk=function(a){if("EMPTY_TABLE"===a.selectedSource){var b=uwk(a);b.schema=a.schema;rwk(b,a);void 0!==a.selectedPartitioning.requirePartitionFilter&&(b.requirePartitionFilter=a.selectedPartitioning.requirePartitionFilter,b.timePartitioning&&(b.timePartitioning.requirePartitionFilter=a.selectedPartitioning.requirePartitionFilter));if(a.selectedCreateBigLakeManagedTable){var c,d=_.Gl(null==(c=a.bigLakeManagedTableCloudResourceConnection)?
void 0:c.name),e;let f;b.biglakeConfiguration={connectionId:[d.projectId,d.locationId,d.connectionId].join("."),storageUri:a.bigLakeManagedTableStorageUri?"gs://"+a.bigLakeManagedTableStorageUri:"",fileFormat:null!=(e=a.bigLakeManagedTableFileFormat)?e:"PARQUET",tableFormat:null!=(f=a.bigLakeManagedTableTableFormat)?f:"ICEBERG"}}return b}switch(a.selectedTableType){case "EXTERNAL":c=uwk(a);c.externalDataConfiguration={autodetect:a.shouldAutoDetectSchema};twk(c.externalDataConfiguration,a);swk(c.externalDataConfiguration,
a);lwk(a.selectedSource,a.selectedFileFormat)&&(c.externalDataConfiguration.csvOptions={},e=c.externalDataConfiguration.csvOptions,qwk(e,a),e.skipLeadingRows=String(a.skipLeadingRows||0),a.shouldAutoDetectSchema&&(e.allowJaggedRows||delete e.allowJaggedRows,e.allowQuotedNewlines||delete e.allowQuotedNewlines,Number(a.skipLeadingRows)||delete e.skipLeadingRows));nwk(a.selectedFileFormat,a.selectedSource)&&(c.externalDataConfiguration.googleSheetsOptions={},c.externalDataConfiguration.googleSheetsOptions.range=
a.sheetRange,null!=a.skipLeadingRows&&(c.externalDataConfiguration.googleSheetsOptions.skipLeadingRows=String(a.skipLeadingRows)));switch(a.selectedSource){case "S3":d=_.Gl(null==(b=a.awsConnection)?void 0:b.name);c.externalDataConfiguration.connectionId=[d.projectId,d.locationId,d.connectionId].join(".");break;case "ABS":b=_.Gl(null==(d=a.azureConnection)?void 0:d.name);c.externalDataConfiguration.connectionId=[b.projectId,b.locationId,b.connectionId].join(".");break;case "GCS":if(a.selectedCloudResourceConnection){let f;
b=_.Gl(null==(f=a.cloudResourceConnection)?void 0:f.name);c.externalDataConfiguration.connectionId=[b.projectId,b.locationId,b.connectionId].join(".")}}kwk(a.selectedSource,a.selectedFileFormat,a.selectedTableType)&&!a.shouldAutoDetectSchema&&(_.NVf&&a.selectedHivePartitioning?c.externalDataConfiguration.schema=a.schema:c.schema=a.schema);return c;default:return uwk(a)}},uwk=function(a){return{tableReference:a.tableLocation,encryptionConfiguration:a.encryptionConfiguration,defaultCollation:"NATIVE"===
a.selectedTableType?a.defaultCollation:void 0,defaultRoundingMode:"NATIVE"===a.selectedTableType?a.defaultRoundingMode:void 0,resourceTags:a.resourceTags}},wwk=function(a,b){a&1&&(_.K(0,"mat-option",10),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a.format),_.B(),_.V(" ",a.displayName," "))},xwk=function(a){a&1&&(_.K(0,"cm-error",13),_.P(1,4),_.L())},zwk=function(a){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",11),_.K(2,"mat-label"),_.P(3,2),_.L(),_.K(4,"mat-hint"),_.P(5,3),_.L(),_.H(6,xwk,2,0,"cm-error",
12),_.L());a&2&&(_.B(6),_.I("cfcDebounceErrorFor",_.qh(1,ywk)))},Awk=function(a,b){a&1&&(_.K(0,"mat-option",10),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a.format),_.B(),_.V(" ",a.displayName," "))},Bwk=function(a){a&1&&(_.K(0,"cm-error",13),_.P(1,4),_.L())},Dwk=function(a){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",11),_.K(2,"mat-label"),_.P(3,2),_.L(),_.K(4,"mat-hint"),_.P(5,3),_.L(),_.H(6,Bwk,2,0,"cm-error",12),_.L());a&2&&(_.B(6),_.I("cfcDebounceErrorFor",_.qh(1,Cwk)))},Ewk=function(a,b){a&
1&&(_.K(0,"mat-option",29),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a.key),_.B(),_.V(" ",a.value," "))},Fwk=function(a){a&1&&(_.K(0,"mat-form-field")(1,"cfc-select",26),_.H(2,Ewk,2,2,"mat-option",27),_.W(3,"keyvalue"),_.L(),_.K(4,"mat-label",28),_.P(5,0),_.L()());a&2&&(a=_.S(),_.B(2),_.I("ngForOf",_.X(3,1,a.writeDispositionOptions)))},Gwk=function(a){a&1&&(_.K(0,"cm-error",33),_.P(1,3),_.L())},Hwk=function(a){a&1&&(_.K(0,"cm-error",33),_.P(1,4),_.L())},Iwk=function(a){a&1&&(_.K(0,"mat-form-field"),
_.M(1,"input",30),_.K(2,"mat-label"),_.P(3,1),_.L(),_.K(4,"cfc-help-button",31),_.P(5,2),_.L(),_.H(6,Gwk,2,0,"cm-error",32)(7,Hwk,2,0,"cm-error",32),_.L());a&2&&(_.B(6),_.I("cfcDebounceErrorFor","min"),_.B(),_.I("cfcDebounceErrorFor","number"))},Jwk=function(a){a&1&&(_.K(0,"div",34)(1,"mat-checkbox",35),_.P(2,5),_.L(),_.K(3,"cfc-help-button",36),_.Pg(4,6),_.M(5,"a",37),_.Qg(),_.L()())},Kwk=function(a){a&1&&_.M(0,"bq-delimiter-selector",38)},Lwk=function(a){a&1&&_.M(0,"bq-quote-selector",39)},Mwk=
function(a){a&1&&(_.K(0,"cm-error",33),_.P(1,13),_.L())},Nwk=function(a){a&1&&(_.K(0,"cm-error",33),_.P(1,14),_.L())},Owk=function(a){a&1&&(_.K(0,"div",34)(1,"mat-checkbox",45),_.P(2,15),_.L(),_.K(3,"cfc-help-button",36),_.P(4,16),_.L()())},Pwk=function(a){a&1&&(_.K(0,"div")(1,"mat-form-field"),_.M(2,"input",40),_.K(3,"mat-label"),_.P(4,7),_.L(),_.K(5,"cfc-help-button",31),_.P(6,8),_.L(),_.H(7,Mwk,2,0,"cm-error",32)(8,Nwk,2,0,"cm-error",32),_.L(),_.K(9,"div",34)(10,"mat-checkbox",41),_.P(11,9),_.L(),
_.K(12,"cfc-help-button",36),_.P(13,10),_.L()(),_.K(14,"div",34)(15,"mat-checkbox",42),_.P(16,11),_.L(),_.K(17,"cfc-help-button",43),_.Pg(18,12),_.M(19,"a",44),_.Qg(),_.L()(),_.H(20,Owk,5,0,"div",20),_.L());a&2&&(a=_.S(),_.B(7),_.I("cfcDebounceErrorFor","min"),_.B(),_.I("cfcDebounceErrorFor","number"),_.B(12),_.I("ngIf",a.isNewlineDelimitedJson))},Qwk=function(a){a&1&&(_.K(0,"div",46),_.M(1,"bq-kms-picker",47),_.W(2,"async"),_.W(3,"async"),_.L());a&2&&(a=_.S(),_.B(),_.I("projectId",_.X(2,3,a.currentProjectIdObs$))("locationId",
_.X(3,5,a.kmsLocation$))("resourceType",a.BQ_TABLE_RESOURCE_TYPE))},Rwk=function(a){a&1&&_.M(0,"bq-collation-picker",48);a&2&&_.I("isTable",!0)},Uwk=function({fb:a,model:b}){const c=_.jFb(a);var d;if(null==b?0:null==(d=b.encryptionConfiguration)?0:d.kmsKeyName){var e;c.get("bqKmsKey.key").setValue(null==b?void 0:null==(e=b.encryptionConfiguration)?void 0:e.kmsKeyName)}d=a.group;e=[null==b?void 0:b.selectedWriteDisposition];var f=[null==b?void 0:b.maxBadRecords],g=[null==b?void 0:b.shouldIgnoreUnknownValues],
n=[null==b?void 0:b.skipLeadingRows],p=null==b?void 0:b.delimiter;if(p)if(Swk.has(p))var r=p;else{r="custom";var u=p||""}r=a.group({delimiter:[r],customDelimiter:[{value:u,disabled:"custom"!==r},[_.Mo,_.sk(1)]]});u=null==b?void 0:b.quote;let w;if(u)if(Twk.has(u))var z=u;else z="custom",w=u||"";z=a.group({quote:[z],customQuote:[{value:w,disabled:"custom"!==z},[_.Mo,_.sk(1)]]});return d.call(a,{selectedWriteDisposition:e,maxBadRecords:f,shouldIgnoreUnknownValues:g,skipLeadingRows:n,delimiter:r,quote:z,
shouldAllowQuotedNewlines:[null==b?void 0:b.shouldAllowQuotedNewlines],shouldAllowJaggedRows:[null==b?void 0:b.shouldAllowJaggedRows],defaultCollation:_.BOf(a,null==b?void 0:b.defaultCollation),defaultRoundingMode:_.HOf(a,null==b?void 0:b.defaultRoundingMode),kmsPicker:c})},Vwk=function(a,b){a&1&&(_.K(0,"cfc-message",20)(1,"cfc-message-text"),_.U(2),_.L()());a&2&&(a=b.ngIf,_.S(),_.B(2),_.V(" ",_.nk("The selected source requires a dataset in the {LOCATION} location. Please choose a valid dataset.",
{LOCATION:0===a.length?"":(new _.$wc({type:"disjunction"})).format(a)})," "))},Wwk=function(a,b){a&1&&(_.K(0,"mat-option",21),_.U(1),_.W(2,"tableTypeDisplayName"),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",_.X(2,2,a)," "))},Xwk=function(a){a&1&&(_.N(0),_.P(1,2),_.O())},Ywk=function(a){a&1&&(_.N(0),_.P(1,3),_.O())},Zwk=function(a,b){a&1&&(_.K(0,"mat-option",21),_.U(1),_.W(2,"s3ConnectionDisplayName"),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",_.X(2,2,a)," "))},bxk=function(a){if(a&
1){const b=_.t();_.K(0,"mat-form-field")(1,"cfc-select",23)(2,"mat-option",24);_.R("click",function(){_.v(b);const c=_.S(2);return _.x($wk(c,"AWS"))});_.M(3,"cfc-select-rich-option",25);_.L();_.H(4,Zwk,3,4,"mat-option",15);_.W(5,"async");_.L();_.K(6,"mat-label",26);_.P(7,4);_.L()()}a&2&&(a=_.S(2),_.B(),_.I("cfcIamCheck",_.qh(5,axk)),_.B(),_.I("value",void 0),_.B(2),_.I("ngForOf",_.X(5,3,a.connections$)))},cxk=function(a){a&1&&(_.M(0,"bq-create-table-connection-picker",27),_.W(1,"async"),_.W(2,"async"));
a&2&&(a=_.S(2),_.I("projectId",_.X(1,3,a.projectId$))("locationId",_.X(2,5,a.connectionsLocation$))("connectionPreset",a.awsConnectionPreset))},dxk=function(a){a&1&&(_.N(0),_.H(1,bxk,8,6,"mat-form-field",18)(2,cxk,3,7,"bq-create-table-connection-picker",22),_.O());a&2&&(a=_.S(),_.B(),_.I("ngIf",!a.bigqueryBigLakeManagedTablesUiEnabled),_.B(),_.I("ngIf",a.bigqueryBigLakeManagedTablesUiEnabled))},exk=function(a,b){a&1&&(_.K(0,"mat-option",21),_.U(1),_.W(2,"absConnectionDisplayName"),_.L());a&2&&(a=
b.$implicit,_.I("value",a),_.B(),_.V(" ",_.X(2,2,a)," "))},fxk=function(a){if(a&1){const b=_.t();_.K(0,"mat-form-field")(1,"cfc-select",29)(2,"mat-option",24);_.R("click",function(){_.v(b);const c=_.S(2);return _.x($wk(c,"AZURE"))});_.M(3,"cfc-select-rich-option",30);_.L();_.H(4,exk,3,4,"mat-option",15);_.W(5,"async");_.L();_.K(6,"mat-label",31);_.P(7,5);_.L()()}a&2&&(a=_.S(2),_.B(),_.I("cfcIamCheck",_.qh(5,axk)),_.B(),_.I("value",void 0),_.B(2),_.I("ngForOf",_.X(5,3,a.connections$)))},gxk=function(a){a&
1&&(_.M(0,"bq-create-table-connection-picker",32),_.W(1,"async"),_.W(2,"async"));a&2&&(a=_.S(2),_.I("projectId",_.X(1,3,a.projectId$))("locationId",_.X(2,5,a.connectionsLocation$))("connectionPreset",a.azureConnectionPreset))},hxk=function(a){a&1&&(_.N(0),_.H(1,fxk,8,6,"mat-form-field",18)(2,gxk,3,7,"bq-create-table-connection-picker",28),_.O());a&2&&(a=_.S(),_.B(),_.I("ngIf",!a.bigqueryBigLakeManagedTablesUiEnabled),_.B(),_.I("ngIf",a.bigqueryBigLakeManagedTablesUiEnabled))},ixk=function(a,b){a&
1&&(_.K(0,"mat-option",21),_.U(1),_.W(2,"cloudResourceConnectionDisplayName"),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",_.X(2,2,a)," "))},jxk=function(a){if(a&1){const b=_.t();_.K(0,"mat-form-field")(1,"cfc-select",36)(2,"mat-option",24);_.R("click",function(){_.v(b);const c=_.S(2);return _.x($wk(c,"CLOUD_RESOURCE"))});_.M(3,"cfc-select-rich-option",37);_.L();_.H(4,ixk,3,4,"mat-option",15);_.W(5,"async");_.L();_.K(6,"mat-label",38);_.P(7,8);_.L()()}a&2&&(a=_.S(2),_.B(),_.I("cfcIamCheck",
_.qh(5,axk)),_.B(),_.I("value",void 0),_.B(2),_.I("ngForOf",_.X(5,3,a.connections$)))},kxk=function(a){a&1&&(_.M(0,"bq-create-table-connection-picker",39),_.W(1,"async"),_.W(2,"async"));a&2&&(a=_.S(2),_.I("projectId",_.X(1,3,a.projectId$))("locationId",_.X(2,5,a.connectionsLocation$))("connectionPreset",a.cloudResourceConnectionPreset))},lxk=function(a){a&1&&(_.N(0),_.K(1,"cfc-message")(2,"cfc-message-text",33),_.P(3,6),_.L()(),_.K(4,"mat-checkbox",34),_.P(5,7),_.L(),_.H(6,jxk,8,6,"mat-form-field",
18)(7,kxk,3,7,"bq-create-table-connection-picker",35),_.O());a&2&&(a=_.S(),_.B(6),_.I("ngIf",a.selectedCloudResourceConnection.value&&!a.bigqueryBigLakeManagedTablesUiEnabled),_.B(),_.I("ngIf",a.selectedCloudResourceConnection.value&&a.bigqueryBigLakeManagedTablesUiEnabled))},mxk=function(a){a&1&&(_.K(0,"cm-error",51)(1,"mat-label"),_.U(2,"Storage URI is required"),_.L()())},nxk=function(a){a&1&&(_.K(0,"cm-error",51),_.U(1),_.L());a&2&&(a=_.S(3),_.B(),_.V(" ",a.bigLakeManagedTableStorageUri.getError("uri"),
" "))},oxk=function(a,b){a&1&&(_.K(0,"mat-option",21),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",a," "))},pxk=function(a,b){a&1&&(_.K(0,"mat-option",21),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a),_.B(),_.V(" ",a," "))},qxk=function(a){a&1&&(_.N(0),_.M(1,"bq-create-table-connection-picker",42),_.W(2,"async"),_.W(3,"async"),_.K(4,"mat-form-field",43)(5,"mat-label"),_.U(6,"Storage URI"),_.L(),_.K(7,"span",44),_.U(8,"gs://"),_.L(),_.M(9,"input",45)(10,"storage-browser-subtask-button",
46),_.K(11,"cfc-help-button",47),_.Pg(12,10),_.K(13,"p"),_.M(14,"i"),_.L(),_.Qg(),_.L(),_.H(15,mxk,3,0,"cm-error",48)(16,nxk,2,1,"cm-error",48),_.L(),_.K(17,"mat-form-field")(18,"cfc-select",49),_.H(19,oxk,2,2,"mat-option",15),_.W(20,"async"),_.L(),_.K(21,"mat-label"),_.U(22,"File format"),_.L()(),_.K(23,"mat-form-field")(24,"cfc-select",50),_.H(25,pxk,2,2,"mat-option",15),_.W(26,"async"),_.L(),_.K(27,"mat-label"),_.U(28,"Table format"),_.L()(),_.O());a&2&&(a=_.S(2),_.B(),_.I("projectId",_.X(2,7,
a.projectId$))("locationId",_.X(3,9,a.connectionsLocation$))("connectionPreset",a.cloudResourceConnectionPreset),_.B(14),_.I("cfcDebounceErrorFor","required"),_.B(),_.I("cfcDebounceErrorFor","uri"),_.B(3),_.I("ngForOf",_.X(20,11,a.bigLakeManagedTableFileFormatOptions$)),_.B(6),_.I("ngForOf",_.X(26,13,a.bigLakeManagedTableTableFormatOptions$)))},rxk=function(a){a&1&&(_.N(0),_.K(1,"mat-checkbox",40),_.Pg(2,9),_.M(3,"cfc-badge",41),_.Qg(),_.L(),_.H(4,qxk,29,15,"ng-container",18),_.O());a&2&&(a=_.S(),
_.B(),_.I("ve",a.ve.BigqyeryCreateBigLakeManagedTableToggle)("veClick",!0),_.B(3),_.I("ngIf",a.selectedCreateBigLakeManagedTable.value))},sxk=function(a){a&1&&(_.K(0,"p"),_.P(1,11),_.L())},txk=function({fb:a,model:b}){var c=_.Xc(_.eKi),d=a.group,e=c?Mvk(a,null==b?void 0:b.awsConnection):[null==b?void 0:b.awsConnection],f=c?Mvk(a,null==b?void 0:b.azureConnection):[null==b?void 0:b.azureConnection];c=c?Mvk(a,null==b?void 0:b.cloudResourceConnection):[null==b?void 0:b.cloudResourceConnection];var g=
[null==b?void 0:b.selectedTableType],n=[null==b?void 0:b.selectedCloudResourceConnection],p=[null==b?void 0:b.selectedCreateBigLakeManagedTable],r=Mvk(a,null==b?void 0:b.bigLakeManagedTableCloudResourceConnection),u=null==b?void 0:b.tableLocation;return d.call(a,{awsConnection:e,azureConnection:f,cloudResourceConnection:c,selectedTableType:g,selectedCloudResourceConnection:n,selectedCreateBigLakeManagedTable:p,bigLakeManagedTableCloudResourceConnection:r,bigLakeManagedTableStorageUri:[null==b?void 0:
b.bigLakeManagedTableStorageUri],bigLakeManagedTableFileFormat:[null==b?void 0:b.bigLakeManagedTableFileFormat],bigLakeManagedTableTableFormat:[null==b?void 0:b.bigLakeManagedTableTableFormat],location:_.QGi(a,_.OGi(u?{projectId:u.projectId||"",datasetId:u.datasetId||"",tableId:u.tableId||""}:void 0))})},uxk=function({fb:a,model:b}){var c=a.group,d=null==b?void 0:b.selectedPartitioning,e=null==d?void 0:d.partition;e=a.group({partitioning:[d,[_.Mo]],requirePartitionFilter:[!(null==d||!d.requirePartitionFilter)],
type:[e&&"type"in e?e.type:void 0]});2===(null==d?void 0:d.type)&&e.addControl("rangePartition",iwk(a));b=null==b?void 0:b.selectedClustering;b=a.group({clustering:[b&&b.fields?b.fields.join(", "):void 0,[_.tk(/^[\w\s,]*$/)]]});return c.call(a,{partitioning:e,clustering:b})},vxk=function(a){a&1&&(_.K(0,"div")(1,"cfc-message")(2,"cfc-message-text",5),_.P(3,1),_.L()()())},wxk=function(a){a&1&&(_.K(0,"cfc-message",5)(1,"cfc-message-text"),_.P(2,3),_.L()())},xxk=function(a){a&1&&(_.K(0,"div")(1,"div",
7)(2,"mat-checkbox",8),_.P(3,2),_.L()(),_.H(4,wxk,3,0,"cfc-message",9),_.L());a&2&&(a=_.S(2),_.B(4),_.I("ngIf",a.shouldAutoDetectSchema.value))},yxk=function(a){a&1&&(_.K(0,"div",10),_.M(1,"dc-schema-form-editor",11),_.L());a&2&&(a=_.S(2),_.B(),_.I("allowTypeParameters",a.allowTypeParameters)("fieldNameMaxLength",300))},zxk=function(a){a&1&&(_.K(0,"div"),_.H(1,xxk,5,1,"div",4)(2,yxk,2,2,"div",6),_.L());a&2&&(a=_.S(),_.B(),_.I("ngIf",!a.isEmptyTable),_.B(),_.I("ngIf",a.isEmptyTable||!a.shouldAutoDetectSchema.value))},
Axk=function({fb:a,model:b}){let c;return a.group({shouldAutoDetectSchema:[null==b?void 0:b.shouldAutoDetectSchema],schema:_.Gnk({fb:a,fields:(null==b?void 0:null==(c=b.schema)?void 0:c.fields)||[],fieldNameMaxLength:300})})},Bxk=function(a){const b=a.value;let c=[];try{c=_.Mnk(a.get("schema"))}catch(d){c=[]}return{shouldAutoDetectSchema:b.shouldAutoDetectSchema,schema:{fields:c}}},Cxk=function(a,b){a&1&&(_.K(0,"mat-option",42),_.U(1),_.W(2,"sourceDisplayName"),_.L());a&2&&(a=b.$implicit,_.I("value",
a),_.B(),_.V(" ",_.X(2,2,a)," "))},Dxk=function(a){a&1&&(_.K(0,"cm-error",50),_.P(1,6),_.L())},Exk=function(a){a&1&&(_.K(0,"cm-error",50),_.U(1),_.L());a&2&&(a=_.S(2),_.B(),_.V(" ",a.gcsLocation.getError("uri")," "))},Fxk=function(a){a&1&&(_.K(0,"mat-form-field",43),_.M(1,"storage-location-picker-icon",44)(2,"input",45)(3,"storage-browser-subtask",46),_.K(4,"mat-label"),_.Pg(5,4),_.M(6,"a",47),_.Qg(),_.L(),_.K(7,"cfc-help-button",48),_.Pg(8,5),_.M(9,"p"),_.K(10,"p"),_.M(11,"i"),_.L(),_.Qg(),_.L(),
_.H(12,Dxk,2,0,"cm-error",49)(13,Exk,2,1,"cm-error",49),_.L());a&2&&(a=_.S(),_.I("bucketFilterPredicate",a.gcsBucketFilterPredicate),_.B(3),_.I("titleOverride",a.MSG_GCS_PICKER_TITLE_FORM),_.B(3),_.I("cfcDocLink",a.dl.CONSOLE__BIGQUERY_EXTERNAL_DATA_CLOUD_STORAGE_WILDCARD_SUPPORT),_.B(6),_.I("cfcDebounceErrorFor","validStorageUri"),_.B(),_.I("cfcDebounceErrorFor","uri"))},Gxk=function(a){a&1&&(_.K(0,"cm-error",50),_.Pg(1,9),_.M(2,"a",56)(3,"a",57),_.Qg(),_.L());a&2&&(a=_.S(2),_.B(3),_.I("cfcDocLink",
a.dl.CONSOLE__BIGQUERY_DOCS_LOADING_DATA_LOCAL))},Hxk=function(a){a&1&&(_.K(0,"cm-error",50),_.P(1,10),_.L())},Ixk=function(a){a&1&&(_.K(0,"mat-form-field"),_.M(1,"cfc-file-picker",51,0)(3,"cfc-file-picker-buttons",52),_.K(4,"mat-label"),_.P(5,7),_.L(),_.K(6,"cfc-help-button",53),_.Pg(7,8),_.M(8,"a",54)(9,"a",55),_.Qg(),_.L(),_.H(10,Gxk,4,1,"cm-error",49)(11,Hxk,2,0,"cm-error",49),_.L());if(a&2){a=_.hh(2);const b=_.S();_.B(3);_.I("filePicker",a);_.B(6);_.I("cfcDocLink",b.dl.CONSOLE__BIGQUERY_DOCS_LOADING_DATA_LOCAL);
_.B();_.I("cfcDebounceErrorFor","maxFileSize");_.B();_.I("cfcDebounceErrorFor","required")}},Jxk=function(a){a&1&&(_.K(0,"cm-error",50),_.Pg(1,13),_.M(2,"b")(3,"b"),_.Qg(),_.L())},Kxk=function(a){a&1&&(_.K(0,"cm-error",50),_.P(1,14),_.L())},Lxk=function(a){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",58),_.K(2,"mat-label"),_.P(3,11),_.L(),_.K(4,"cfc-help-button",59),_.Pg(5,12),_.M(6,"p")(7,"p")(8,"p")(9,"p"),_.K(10,"ul")(11,"li"),_.M(12,"a",60),_.L(),_.K(13,"li"),_.M(14,"b"),_.L()(),_.Qg(),_.L(),_.H(15,
Jxk,4,0,"cm-error",49)(16,Kxk,2,0,"cm-error",49),_.L());a&2&&(_.B(15),_.I("cfcDebounceErrorFor","pattern"),_.B(),_.I("cfcDebounceErrorFor","required"))},Mxk=function(a){a&1&&(_.K(0,"cm-error",50),_.P(1,17),_.L())},Nxk=function(a){a&1&&(_.K(0,"cm-error",50),_.P(1,18),_.L())},Oxk=function(a){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",61),_.K(2,"mat-label"),_.P(3,15),_.L(),_.K(4,"cfc-help-button",62),_.Pg(5,16),_.M(6,"p"),_.Qg(),_.L(),_.H(7,Mxk,2,0,"cm-error",49)(8,Nxk,2,0,"cm-error",49),_.L());a&2&&
(_.B(7),_.I("cfcDebounceErrorFor","pattern"),_.B(),_.I("cfcDebounceErrorFor","required"))},Pxk=function(a){a&1&&(_.K(0,"cm-error",50),_.P(1,21),_.L())},Qxk=function(a){a&1&&(_.K(0,"cm-error",50),_.P(1,22),_.L())},Rxk=function(a){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",63),_.K(2,"mat-label"),_.P(3,19),_.L(),_.K(4,"cfc-help-button",64),_.Pg(5,20),_.M(6,"p"),_.Qg(),_.L(),_.H(7,Pxk,2,0,"cm-error",49)(8,Qxk,2,0,"cm-error",49),_.L());a&2&&(_.B(7),_.I("cfcDebounceErrorFor","pattern"),_.B(),_.I("cfcDebounceErrorFor",
"required"))},Sxk=function(a,b){a&1&&(_.K(0,"mat-option",42),_.U(1),_.L());a&2&&(a=b.$implicit,_.I("value",a.format),_.B(),_.V(" ",a.displayName," "))},Txk=function(a){a&1&&(_.K(0,"mat-form-field",65)(1,"cfc-select",66),_.H(2,Sxk,2,2,"mat-option",32),_.W(3,"async"),_.L(),_.K(4,"mat-label",67),_.P(5,23),_.L()());a&2&&(a=_.S(),_.B(2),_.I("ngForOf",_.X(3,1,a.fileFormatOptions$)))},Uxk=function(a){a&1&&(_.Pg(0,24,1),_.N(1),_.M(2,"a",70),_.O(),_.Qg());a&2&&(a=_.S(2),_.B(2),_.I("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_CREATE_BIGTABLE_EXTERNAL_TABLE))},
Vxk=function(a){a&1&&(_.Pg(0,24,2),_.M(1,"a",71),_.Qg());a&2&&(a=_.S(2),_.B(),_.I("cfcDocLink",a.dl.CONSOLE__BIGQUERY_EXTERNAL_DATA_BIGTABLE))},Wxk=function(a){a&1&&(_.K(0,"cfc-message",68)(1,"cfc-message-text"),_.Pg(2,24),_.H(3,Uxk,3,1,"ng-container",69)(4,Vxk,2,1,"ng-template",null,1,_.zh),_.Qg(),_.L()());if(a&2){a=_.hh(5);const b=_.S();_.B(3);_.I("ngIf",b.bigtableToBigqueryEnabled)("ngIfElse",a)}},Xxk=function(a){a&1&&(_.K(0,"div")(1,"mat-checkbox",72),_.P(2,25),_.L()())},Yxk=function(a){a&1&&
(_.K(0,"div",73),_.M(1,"bq-hive-partition-builder",74),_.L());a&2&&(a=_.S(),_.B(),_.I("tableType",a.tableType))},Zxk=function(a){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",75),_.K(2,"mat-label"),_.P(3,26),_.L(),_.K(4,"cfc-help-button",76),_.Pg(5,27),_.M(6,"p"),_.K(7,"p"),_.M(8,"b"),_.L(),_.K(9,"p"),_.M(10,"b"),_.L(),_.M(11,"p"),_.Qg(),_.L()())},$xk=function(a){a&1&&(_.K(0,"cfc-message",68)(1,"cfc-message-text"),_.Pg(2,28),_.M(3,"a",77),_.Qg(),_.L()());a&2&&(a=_.S(),_.B(3),_.I("cfcDocLink",a.dl.CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_DATASTORE_LOADING_CLOUD_DATASTORE_BACKUP_DATA))},
ayk=function(a){return a.filter(([,b])=>b).map(([b])=>b)},dyk=function(){return _.Xc(byk)?cyk:cyk.filter(a=>"DELTA_LAKE"!==a.format)},eyk=function(a,b){a.controls.gcsLocation.disable();a.controls.selectedFile.disable();a.controls.driveUri.disable();a.controls.s3Path.disable();a.controls.absPath.disable();switch(b){case "GCS":a.controls.gcsLocation.enable();break;case "UPLOAD":a.controls.selectedFile.enable();break;case "DRIVE":a.controls.driveUri.enable();break;case "S3":a.controls.s3Path.enable();
break;case "ABS":a.controls.absPath.enable()}a.updateValueAndValidity()},iyk=function({fb:a,model:b}){var c=a.group,d=[null==b?void 0:b.selectedSource],e=[{value:null==b?void 0:b.gcsLocation,disabled:!0},_.Mo],f=[{value:(null==b?0:b.selectedFile)?null==b?void 0:b.selectedFile:void 0,disabled:!0},[_.Mo,_.rrg(104857600)]],g=[{value:null==b?void 0:b.driveUri,disabled:!0},[_.Mo,_.tk(fyk)]],n=[{value:null==b?void 0:b.s3Path,disabled:!0},[_.Mo,_.tk(gyk)]],p=[{value:null==b?void 0:b.absPath,disabled:!0},
[_.Mo,_.tk(hyk)]],r=[null==b?void 0:b.selectedFileFormat],u=[null==b?void 0:b.selectedHivePartitioning],w=[null==b?void 0:b.sheetRange];var z=null==b?void 0:b.hivePartitioningOptions;var C=null==b?void 0:b.hivePartitioningSchema;z=a.group({hiveTableLocation:[null==z?void 0:z.sourceUriPrefix],requirePartitionFilter:[null==z?void 0:z.requirePartitionFilter],mode:[null==z?void 0:z.mode],schema:_.Gnk({fb:a,fields:(null==C?void 0:C.fields)||[]})});a=c.call(a,{selectedSource:d,gcsLocation:e,selectedFile:f,
driveUri:g,s3Path:n,absPath:p,selectedFileFormat:r,selectedHivePartitioning:u,sheetRange:w,partition:z});eyk(a,null==b?void 0:b.selectedSource);return a},jyk=function(a){a&1&&(_.K(0,"p",9),_.Pg(1,2),_.M(2,"a",10),_.Qg(),_.L());a&2&&(a=_.S(),_.B(2),_.I("cfcDocLink",a.dl.CONSOLE__RESOURCE_MANAGER_DOCS_TAGS_TAGS_OVERVIEW))},kyk=function(a){if(a&1){const b=_.t();_.K(0,"cfc-message",11,0)(2,"cfc-message-text");_.U(3);_.L();_.K(4,"cfc-message-actions")(5,"button",12);_.R("click",function(){_.v(b);const c=
_.hh(1);return _.x(c.dismiss())});_.U(6," Dismiss ");_.L()()()}a&2&&(a=_.S(),_.B(3),_.V(" ",a.tagsErrorMessage," "))},lyk=function({fb:a,model:b}){return a.group({tags:[null==b?void 0:b.resourceTags]})},myk=function(a){return _.WOf(a)&&(a=_.dPf(a))?{key:a.keyNamespacedName,value:a.shortName}:{key:"",value:""}},nyk=function(a){a&1&&(_.K(0,"section"),_.M(1,"bq-create-table-form-destination",3),_.L());if(a&2){a=_.S().ngIf;const b=_.S();_.B();_.I("selectedSource",b.selectedSource.value)("tableTypeOptions",
a)}},oyk=function(a){a&1&&(_.K(0,"section"),_.N(1),_.M(2,"bq-create-table-form-schema",4),_.O(),_.L());a&2&&(a=_.S(2),_.B(2),_.I("selectedSource",a.selectedSource.value)("sourceFormat",a.selectedFileFormat.value)("allowTypeParameters",a.allowTypeParameters)("selectedTableType",a.selectedTableType.value))},pyk=function(a,b){a&1&&(_.N(0),_.M(1,"bq-create-table-form-partition",5),_.O());a&2&&(a=b.ngIf,b=_.S(3),_.B(),_.I("schema",a.schema)("disablePartition",b.isBigLakeManagedTable))},ryk=function(a){a&
1&&(_.K(0,"section"),_.H(1,pyk,2,2,"ng-container",1),_.W(2,"async"),_.L());a&2&&(a=_.S(2),_.B(),_.I("ngIf",_.rh(3,qyk,_.X(2,1,a.schemaDebounced$))))},syk=function(a){a&1&&(_.K(0,"section"),_.M(1,"bq-create-table-form-advanced",6),_.W(2,"async"),_.L());a&2&&(a=_.S(2),_.B(),_.I("source",a.selectedSource.value)("sourceFormat",a.selectedFileFormat.value)("tableType",a.selectedTableType.value)("tableLocation",_.X(2,6,a.tableLocation$))("disableCmekEncryption",a.isBigLakeManagedTable)("disableDefaultCollation",
a.isBigLakeManagedTable))},tyk=function(a){a&1&&(_.N(0),_.H(1,nyk,2,2,"section",1)(2,oyk,3,4,"section",1)(3,ryk,3,5,"section",1),_.K(4,"section"),_.N(5),_.M(6,"bq-create-table-form-tags",2),_.O(),_.L(),_.H(7,syk,3,8,"section",1),_.O());a&2&&(a=_.S(),_.B(),_.I("ngIf",a.canSourceHaveDestination),_.B(),_.I("ngIf",a.selectedSource.value!==a.SOURCE.BIGTABLE),_.B(),_.I("ngIf",a.isNativeTable),_.B(4),_.I("ngIf",a.sourceHasAdvancedOptions))},uyk=function({fb:a,model:b}){return a.group({source:iyk({fb:a,model:b}),
destination:txk({fb:a,model:b}),schema:Axk({fb:a,model:b}),partition:uxk({fb:a,model:b}),tags:lyk({fb:a,model:b}),advanced:Uwk({fb:a,model:b})})},wyk=function(a){var b=Object,c=b.assign,d=a.get("source"),e=d.value;d=d.get("partition");var f=d.value,g={};f.hiveTableLocation&&(g.sourceUriPrefix=f.hiveTableLocation);d.controls.requirePartitionFilter.disabled||(g.requirePartitionFilter=!!f.requirePartitionFilter);if(f.mode&&(g.mode=f.mode,"CUSTOM"===f.mode)){var n=[];try{n=_.Mnk(d.get("schema"))}catch(ba){n=
[]}n={fields:n}}const {options:p,schema:r}={options:g,schema:n};d={selectedSource:e.selectedSource,selectedFileFormat:e.selectedFileFormat,sheetRange:e.sheetRange,selectedHivePartitioning:e.selectedHivePartitioning,hivePartitioningOptions:p,hivePartitioningSchema:r};switch(d.selectedSource){case "GCS":d.gcsLocation=e.gcsLocation;break;case "UPLOAD":d.selectedFile=e.selectedFile;break;case "DRIVE":d.driveUri=e.driveUri;break;case "S3":d.s3Path=e.s3Path;break;case "ABS":d.absPath=e.absPath}e=a.get("destination");
g=_.Xc(_.eKi);n=e.getRawValue();e={selectedTableType:n.selectedTableType,awsConnection:g?n.awsConnection.connection:n.awsConnection,azureConnection:g?n.azureConnection.connection:n.azureConnection,cloudResourceConnection:g?n.cloudResourceConnection.connection:n.cloudResourceConnection,selectedCloudResourceConnection:n.selectedCloudResourceConnection,tableLocation:_.RGi(e.get("location")),selectedCreateBigLakeManagedTable:n.selectedCreateBigLakeManagedTable,bigLakeManagedTableCloudResourceConnection:n.bigLakeManagedTableCloudResourceConnection.connection,
bigLakeManagedTableStorageUri:n.bigLakeManagedTableStorageUri,bigLakeManagedTableFileFormat:n.bigLakeManagedTableFileFormat,bigLakeManagedTableTableFormat:n.bigLakeManagedTableTableFormat};g=Bxk(a.get("schema"));var u;n=a.get("partition");var w=n.get("partitioning"),z=w.value;f=w.getRawValue().partitioning;z.requirePartitionFilter&&(f.requirePartitionFilter=z.requirePartitionFilter);if(w=w.get("rangePartition")){var C=w.value.start;z=w.value.end;w=w.value.interval;var G={field:null==(u=f.partition)?
void 0:u.field,range:{start:C,end:z,interval:w}};f.partition=G}else if(1===f.type&&z.type){u={type:z.type};if(null==(C=f.partition)?0:C.field)u.field=f.partition.field;f.partition=u}u={selectedPartitioning:f,selectedClustering:Jvk(n.get("clustering"))};C={resourceTags:a.get("tags").getRawValue().tags.map(myk)};a=a.get("advanced");n=a.value;f=n.selectedWriteDisposition;w=n.maxBadRecords;z=n.shouldIgnoreUnknownValues;G=n.skipLeadingRows;var J=a.get("delimiter").value;J="custom"===J.delimiter?J.customDelimiter:
J.delimiter;const Q=a.get("quote").value;n={selectedWriteDisposition:f,maxBadRecords:w,shouldIgnoreUnknownValues:z,skipLeadingRows:G,delimiter:J,quote:"custom"===Q.quote?Q.customQuote:Q.quote,shouldAllowQuotedNewlines:n.shouldAllowQuotedNewlines,shouldAllowJaggedRows:n.shouldAllowJaggedRows,defaultCollation:_.COf(a.get("defaultCollation")),defaultRoundingMode:_.IOf(a.get("defaultRoundingMode"))};if(a=_.kFb(a.get("kmsPicker")))n.encryptionConfiguration={kmsKeyName:a};return c.call(b,{},vyk,d,e,g,u,
C,n)},xyk=function(a){a&1&&(_.K(0,"div",11),_.M(1,"mat-spinner",12),_.L());a&2&&(_.B(),_.I("diameter",18))},yyk=function(a){a&1&&(_.K(0,"form",13),_.M(1,"cfc-form-submission-error")(2,"bq-create-table-form",14),_.L());a&2&&(a=_.S(),_.I("formGroup",a.form))},zyk=function(a){switch(((a||"").split(".").pop()||"").toLowerCase()){case "avro":return"AVRO";case "json":return"NEWLINE_DELIMITED_JSON";case "orc":return"ORC";case "parquet":return"PARQUET";case "iceberg":return"ICEBERG";default:return"CSV"}},
Ayk=function({data:a,loadJobConfig:b}={}){var c=Object.assign({},vyk);if(null==a?0:a.gcsLocation)c=Object.assign({},c,{selectedSource:"GCS",gcsLocation:null==a?void 0:a.gcsLocation,selectedFileFormat:zyk(null==a?void 0:a.gcsLocation)});if(b){var d=Object,e=d.assign;const f=Object.assign({},vyk,{tableLocation:b.destinationTable,selectedClustering:b.clustering,selectedTableType:"NATIVE",shouldAutoDetectSchema:!!b.autodetect,shouldAllowQuotedNewlines:!!b.allowQuotedNewlines,shouldAllowJaggedRows:!!b.allowJaggedRows,
shouldIgnoreUnknownValues:!!b.ignoreUnknownValues}),g=b.sourceUris&&b.sourceUris[0];if(!g)f.selectedSource="UPLOAD";else if(void 0===g?0:g.startsWith("gs://"))f.selectedSource="GCS",f.gcsLocation=(void 0===g?0:g.startsWith("gs://"))?g.substr(5):"";void 0!==b.sourceFormat&&(f.selectedFileFormat=b.sourceFormat);void 0!==b.schema&&(f.schema=b.schema);void 0!==b.writeDisposition&&(f.selectedWriteDisposition=b.writeDisposition);b.timePartitioning?f.selectedPartitioning=Gvk(1,b.timePartitioning):b.rangePartitioning&&
(f.selectedPartitioning=Gvk(2,b.rangePartitioning));void 0!==b.maxBadRecords&&(f.maxBadRecords=b.maxBadRecords);void 0!==b.fieldDelimiter&&(f.delimiter=b.fieldDelimiter);void 0!==b.quote&&(f.quote=b.quote);void 0!==b.skipLeadingRows&&(f.skipLeadingRows=b.skipLeadingRows);c=e.call(d,{},c,f)}return c=Object.assign({},c,(null==a?void 0:a.initialValues)||{})},Byk=function(a,b,c,d,e){a.sendEvent({type:"bqTableCreate",name:"trackCreateTableSubmitSuccess",metadata:{source:b,fileFormat:c,tableType:d,isBigLakeManagedTable:e}})},
Cyk={type:1,path:"/bigquery/docs/clustered-tables"},Dyk={type:1,path:"/bigquery/docs/create-bigtable-external-table"},Eyk={type:1,path:"/bigquery/docs/loading-data-cloud-datastore#loading_cloud_datastore_backup_data"},Fyk={type:1,path:"/bigquery/docs/loading-data-local"},Gyk={type:1,path:"/bigquery/docs/querying-partitioned-tables"},Hyk={type:1,path:"/bigquery/docs/tables-intro"},Iyk={type:1,path:"/bigquery/external-data-bigtable"},Jyk={type:1,path:"/bigquery/external-data-cloud-storage#wildcard-support"},
Kyk={NATIVE:"NATIVE",EXTERNAL:"EXTERNAL"},Lyk={type:1,partition:{type:"DAY"},fieldType:"TIMESTAMP"},Myk={type:0,partition:void 0},Nyk={EMPTY_TABLE:"EMPTY_TABLE",GCS:"GCS",UPLOAD:"UPLOAD",DRIVE:"DRIVE",BIGTABLE:"BIGTABLE",S3:"S3",ABS:"ABS"},Oyk=class{get formGroup(){let a;return null==(a=this.parentFormGroupName)?void 0:a.control}constructor(a){this.parentFormGroupName=a;this.dl={CONSOLE__BIGQUERY_DOCS_CLUSTERED_TABLES:Cyk};this.disabled=!1}ngOnChanges(a){a=a.disabled;let b;const c=null==(b=this.formGroup)?
void 0:b.get("clustering");c&&(!0===a.currentValue?c.disable():c.enable())}};Oyk.\u0275fac=function(a){return new (a||Oyk)(_.D(_.hx,8))};
Oyk.\u0275cmp=_.m({type:Oyk,selectors:[["bq-clustering-picker"]],inputs:{disabled:"disabled"},features:[_.oh([_.GC],[_.GC]),_.Qd],decls:11,vars:2,consts:()=>[" Clustering order "," Clustering order determines the sort order of the data. Clustering can be used on both partitioned and non-partitioned tables. ","\ufffd#8\ufffd Clustering organizes data based on the contents of specified columns in the schema into optimally-size storage blocks, which improves the performance of certain types of queries. \ufffd/#8\ufffd A schema field may be used for partitioning as well as clustering. BigQuery will partition first, and then cluster. \ufffd#9\ufffd Learn more \ufffd/#9\ufffd"," Must contain a comma-separated list of field names. Field names can only contain letters, numbers, or underscores. ",
"type;text;formControlName;clustering;matInput;;placeholder;Comma-separated list of fields to define clustering order (up to 4)".split(";"),["matSuffix","",1,"cfc-pre-wrap"],["cfcTrackedEvent","","aria-label","Learn more about clustered tables","track-type","navigateTo","track-name","bqClusteredTablesDocumentation","target","_blank",3,"cfcDocLink"],["matError","",4,"cfcDebounceErrorFor"],["matError",""]],template:function(a,b){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",4),_.K(2,"mat-label"),_.P(3,
0),_.L(),_.K(4,"mat-hint"),_.P(5,1),_.L(),_.K(6,"cfc-help-button",5),_.Pg(7,2),_.M(8,"p")(9,"a",6),_.Qg(),_.L(),_.H(10,Ivk,2,0,"cm-error",7),_.L());a&2&&(_.B(9),_.I("cfcDocLink",b.dl.CONSOLE__BIGQUERY_DOCS_CLUSTERED_TABLES),_.B(),_.I("cfcDebounceErrorFor","pattern"))},dependencies:[_.wk,_.Ww,_.Ox,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Rv,_.Qv,_.Uv,_.Gx,_.Hx,_.Ex,_.Jx,_.Mz,_.vC,_.iB,_.ix],encapsulation:2});var Pyk=[_.Dz,_.Cx,_.Ix,_.Kx,_.Oz,_.wC,_.kB,_.rx],Qyk=class{};Qyk.\u0275fac=function(a){return new (a||Qyk)};
Qyk.\u0275mod=_.q({type:Qyk});Qyk.\u0275inj=_.k({imports:[_.Qr,_.qx,Pyk]});var Ryk=class{transform(a){const {locationId:b,connectionId:c}=_.Gl(a.name);return`${b}.${c}`}};Ryk.\u0275fac=function(a){return new (a||Ryk)};Ryk.\u0275pipe=_.Gd({name:"connectionDisplayName",type:Ryk,pure:!0});var Syk=()=>["bigquery.connections.list"],Tyk=function(a){return a.aws?"AWS":a.azure?"AZURE":a.cloudResource?"Cloud resource":"UNSPECIFIED"},Uyk=class{set projectId(a){this.projectId$.next(a)}set locationId(a){this.locationId$.next(a)}get isRequired(){return _.vk(this.connectionControl._rawValidators,_.Mo)}get connectionControl(){return this.parentFormGroupName.control.get("connection")}constructor(a,b,c){this.parentFormGroupName=a;this.connectionsFacadeService=b;this.subtaskService=c;this.connectionPreset=
{};this.createConnectionOptionValue="bqui-create-connection-option-value";this.projectId$=new _.Vf(1);this.locationId$=new _.Vf(1);this.refreshConnections$=new _.Vf(1);this.connections$=_.y([]);this.connections$=_.Ie([this.projectId$,this.locationId$,this.refreshConnections$]).pipe(_.E(([d,e])=>d?this.connectionsFacadeService.listConnections({projectId:d,locationId:e}).pipe(_.wf(()=>_.y([])),_.A(f=>{const g=Tyk(this.connectionPreset);return"UNSPECIFIED"===g?f:f.filter(n=>Tyk(n)===g)}),_.fg(f=>{0<
f.length&&null===this.connectionControl.value&&this.connectionControl.setValue(f[0])})):_.y([])));this.refreshConnections$.next()}createConnection(){this.projectId$.pipe(_.Gf(1),_.A(a=>_.xej(this.connectionPreset,a)),_.E(a=>this.subtaskService.open(_.yej,a))).subscribe(a=>{a.onAccept.subscribe(()=>{this.refreshConnections$.next()})})}};Uyk.\u0275fac=function(a){return new (a||Uyk)(_.D(_.hx),_.D(_.cL),_.D(_.$L))};
Uyk.\u0275cmp=_.m({type:Uyk,selectors:[["bq-create-table-connection-picker"]],inputs:{label:"label",newConnectionPrimary:"newConnectionPrimary",newConnectionSecondary:"newConnectionSecondary",fieldRequiredErrorText:"fieldRequiredErrorText",projectId:"projectId",locationId:"locationId",connectionPreset:"connectionPreset"},features:[_.oh([],[_.FC])],decls:9,vars:11,consts:[["aria-labelledby","connection-label","formControlName","connection","cfcDisable","",3,"change","cfcIamCheck","isRequired"],[3,
"value"],[3,"primary","secondary"],[3,"value",4,"ngFor","ngForOf"],["id","connection-label"],["matError","",4,"cfcDebounceErrorFor"],["matError",""]],template:function(a,b){a&1&&(_.K(0,"mat-form-field")(1,"cfc-select",0),_.R("change",function(c){"bqui-create-connection-option-value"===c.value&&(b.createConnection(),b.connectionControl.setValue(null))}),_.K(2,"mat-option",1),_.M(3,"cfc-select-rich-option",2),_.L(),_.H(4,Kvk,3,4,"mat-option",3),_.W(5,"async"),_.L(),_.K(6,"mat-label",4),_.U(7),_.L(),
_.H(8,Lvk,3,1,"cm-error",5),_.L());a&2&&(_.B(),_.I("cfcIamCheck",_.qh(10,Syk))("isRequired",b.isRequired),_.B(),_.I("value",b.createConnectionOptionValue),_.B(),_.I("primary",b.newConnectionPrimary)("secondary",b.newConnectionSecondary),_.B(),_.I("ngForOf",_.X(5,8,b.connections$)),_.B(3),_.jh(b.label),_.B(),_.I("cfcDebounceErrorFor","required"))},dependencies:()=>[_.Ox,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Qv,_.mz,_.Jx,_.qz,_.UE,_.OC,_.Br,_.Ww,_.ix,_.lz,_.Wt,_.pz,_.VB,_.Ir,Ryk],encapsulation:2});var Vyk=class{};
Vyk.\u0275fac=function(a){return new (a||Vyk)};Vyk.\u0275mod=_.q({type:Vyk});Vyk.\u0275inj=_.k({imports:[_.Dz,_.Cx,_.Kx,_.Zz,_.WE,_.PC,_.rx,_.XB]});var Wyk=class{get formGroup(){return this.parentFormGroupName.control}get requirePartitionFilter(){return this.formGroup.controls.requirePartitionFilter}get mode(){return this.formGroup.controls.mode}get isCustomModeSelected(){return"CUSTOM"===this.mode.value}constructor(a){this.parentFormGroupName=a;this.tableTypes=Kyk}ngOnChanges(a){a.tableType&&("EXTERNAL"===a.tableType.currentValue?this.requirePartitionFilter.enable():this.requirePartitionFilter.disable())}};
Wyk.\u0275fac=function(a){return new (a||Wyk)(_.D(_.hx,8))};
Wyk.\u0275cmp=_.m({type:Wyk,selectors:[["bq-hive-partition-builder"]],inputs:{tableType:"tableType"},features:[_.oh([_.GC],[_.GC]),_.Qd],decls:22,vars:1,consts:()=>[" Select Source URI Prefix "," The source URI prefix encodes the path where the user wants BigQuery to infer hive partitioning. "," Require partition filter "," Partition Inference Mode "," Automatically infer types "," All columns are strings "," Provide my own ","type text formControlName hiveTableLocation matInput  placeholder gs://bucket/path_to/table".split(" "),["matSuffix",
"",1,"cfc-pre-wrap"],[1,"cfc-form-control-wrapper"],["formControlName","requirePartitionFilter"],[1,"cfc-form-control-suffix","cfc-button-small"],["labelId","partition-inference-mode"],"formControlName mode id hive-partition-mode aria-labelledby partition-inference-mode".split(" "),["value","AUTO"],["value","STRINGS"],["value","CUSTOM"],["formGroupName","schema",4,"ngIf"],["formGroupName","schema"]],template:function(a,b){a&1&&(_.K(0,"mat-form-field"),_.M(1,"input",7),_.K(2,"mat-label"),_.P(3,0),
_.L(),_.K(4,"cfc-help-button",8),_.P(5,1),_.L()(),_.K(6,"div",9)(7,"mat-checkbox",10),_.P(8,2),_.L(),_.K(9,"cfc-help-button",11),_.U(10," Requiring a partition filter means users must include a WHERE clause that can be used for partition elimination. Using a partition filter may reduce cost and improve performance. Note that this option is only available when creating an external table. "),_.L()(),_.K(11,"div")(12,"cfc-form-label",12),_.P(13,3),_.L(),_.K(14,"mat-radio-group",13)(15,"mat-radio-button",
14),_.P(16,4),_.L(),_.K(17,"mat-radio-button",15),_.P(18,5),_.L(),_.K(19,"mat-radio-button",16),_.P(20,6),_.L()()(),_.H(21,Nvk,2,0,"div",17));a&2&&(_.B(21),_.I("ngIf",b.isCustomModeSelected))},dependencies:()=>[_.wk,_.Ww,_.Xw,_.Unk,_.Ox,_.hy,_.iy,_.fy,_.Ax,_.Bx,_.Xv,_.Sv,_.Uv,_.Gx,_.Hx,_.Ex,_.Zy,_.Yy,_.$y,_.Wy,_.Xy,_.fC,_.iB,_.Cr,_.ix,_.hx],encapsulation:2});var Xyk=class{};Xyk.\u0275fac=function(a){return new (a||Xyk)};Xyk.\u0275mod=_.q({type:Xyk});
Xyk.\u0275inj=_.k({imports:[_.qx,_.B6,_.Dz,_.jy,_.Cx,_.Ix,_.az,_.gC,_.kB,_.rx]});var Yyk=new _.kr("45405628",!0);var dwk=()=>["invalid-format","below-min"],Zyk=function(a){const b=[],c=new Set;if(a.schema&&a.schema.fields){var d=a.schema.fields;for(const g of d)if((Ovk(g,"TIMESTAMP")||Ovk(g,"DATE")||Ovk(g,"INTEGER")||a.isDatetimeMonthlyYearlyEnabled&&Ovk(g,"DATETIME"))&&g.name&&!_.TIb(g.mode||"NULLABLE","REPEATED")&&g.name){d=b;var e=d.push;if(Ovk(g,"INTEGER"))var f=Gvk(2,{field:g.name});else f=Gvk(1,{field:g.name}),Ovk(g,"TIMESTAMP")?f.fieldType="TIMESTAMP":Ovk(g,"DATE")?f.fieldType="DATE":Ovk(g,"DATETIME")&&
(f.fieldType="DATETIME");e.call(d,f);c.add(g.name)}}a.columnPartitioningOptions=b},$yk=class{get formGroup(){return this.parentFormGroupName.control}get partitioningControl(){return this.formGroup.controls.partitioning}get isHourlyPartitioningSupported(){return!!this.partitioningControl.value&&("TIMESTAMP"===this.partitioningControl.value.fieldType||"DATETIME"===this.partitioningControl.value.fieldType)}get isMultipleTimeGranularitiesSupported(){return this.isDatetimeMonthlyYearlyEnabled?!!this.partitioningControl.value&&
1===this.partitioningControl.value.type:!!this.partitioningControl.value&&"TIMESTAMP"===this.partitioningControl.value.fieldType}get isRangePartitioningSelected(){return!!this.partitioningControl.value&&2===this.partitioningControl.value.type}get isPartitioningSelected(){return!!this.partitioningControl.value&&0!==this.partitioningControl.value.type}constructor(a,b){this.parentFormGroupName=a;this.fb=b;this.dl={CONSOLE__BIGQUERY_DOCS_PARTITIONED_TABLES:_.PSf,CONSOLE__BIGQUERY_DOCS_QUERYING_PARTITIONED_TABLES:Gyk};
this.disablePartition=!1;this.regularPartitioningOptions=[Myk,Lyk];this.columnPartitioningOptions=[];this.isDatetimeMonthlyYearlyEnabled=_.Xc(Yyk);this.destroy$=new _.Yf}ngOnInit(){this.partitioningControl.valueChanges.pipe(_.F(this.destroy$)).subscribe(()=>{this.isRangePartitioningSelected?this.formGroup.addControl("rangePartition",iwk(this.fb)):this.formGroup.removeControl("rangePartition");this.formGroup.updateValueAndValidity()})}ngOnChanges(a){a.disablePartition&&(this.disablePartition?(this.partitioningControl.setValue(Myk),
this.partitioningControl.disable()):this.partitioningControl.enable());if(a.schema){const b=c=>!c||!c.fields||0===c.fields.length;b(a.schema.currentValue)&&b(a.schema.previousValue)||Zyk(this)}}ngOnDestroy(){this.destroy$.next()}};$yk.\u0275fac=function(a){return new (a||$yk)(_.D(_.hx,8),_.D(_.px))};
$yk.\u0275cmp=_.m({type:$yk,selectors:[["bq-partition-builder"]],inputs:{schema:"schema",disablePartition:"disablePartition"},features:[_.oh([_.GC],[_.GC]),_.Qd],decls:20,vars:7,consts:()=>[["paritioningFilterTooltipTemplate",""],["paritioningTypeTooltipTemplate",""]," Partitioning "," Partitioning divides your table into smaller segments. Partitioned tables can be queried using filters based on the partitioning column that reduce the amount of data to scan, which can control costs and improve query performance. \ufffd#11\ufffd Learn more \ufffd/#11\ufffd",
" If partitioning by field, you must select a TIMESTAMP, DATE, or INTEGER that is not REPEATED. "," Partitioning filter \ufffd#3\ufffd\ufffd*4:1\ufffd\ufffd/*4:1\ufffd\ufffd/#3\ufffd"," Require WHERE clause to query data "," Partitioning type \ufffd#3\ufffd\ufffd*4:1\ufffd\ufffd/*4:1\ufffd\ufffd/#3\ufffd"," By day "," By hour "," By month "," By year "," Start "," Start value for range partitioning. The start value is inclusive. "," End "," End value for range partitioning. The end value is exclusive. ",
" Interval "," Interval value for range partitioning. The interval value must be a positive integer. "," Range start is required "," Range start must be a valid integer "," Range end is required "," Range end must be a valid integer "," Range interval is required "," Range interval must be a valid positive integer "," Requiring a partition filter means users must include a WHERE clause that specifies the partitions to query. Using a partition filter may reduce cost and improve performance. "," Choose here between the day/hour/month/year option that will generate one partition per day/hour/month/year, respectively. ",
["id","partition-dropdown-label"],"formControlName;partitioning;aria-labelledby;partition-dropdown-label;optionsAriaLabel;Partitioning options;id;partitiong-dropdown".split(";"),["label","Options"],[3,"value",4,"ngFor","ngForOf"],["label","Partition by field",4,"ngIf"],["matSuffix","",1,"cfc-pre-wrap"],["cfcTrackedEvent","","aria-label","Learn more about clustered tables","track-type","navigateTo","track-name","bqCreateTablePartitionDocumentation","target","_blank",3,"cfcDocLink"],["matError","",
4,"cfcDebounceErrorFor"],[4,"ngIf"],["formGroupName","rangePartition",4,"ngIf"],[3,"value"],["label","Partition by field"],["matError",""],["labelId","paritioning-filter-heading"],[3,"ngTemplateOutlet"],["role","group","aria-labelledby","paritioning-filter-heading"],["formControlName","requirePartitionFilter"],["labelId","partition-type-label"],"formControlName type id partition-type aria-labelledby partition-type-label".split(" "),["value","DAY"],["value","HOUR"],["value","MONTH"],["value","YEAR"],
["formGroupName","rangePartition"],["align","end"],"type;text;formControlName;start;matInput;;placeholder;Starting integer value".split(";"),"type;text;formControlName;end;matInput;;placeholder;Ending integer value".split(";"),"type;text;formControlName;interval;matInput;;placeholder;Positive integer interval value".split(";"),["cfcTrackedEvent","","aria-label","Learn more about clustered tables","track-type","navigateTo","track-name","bqCreateTablePartitionFilterDocumentation","target","_blank",
3,"cfcDocLink"]],template:function(a,b){a&1&&(_.K(0,"div")(1,"mat-form-field")(2,"mat-label",26),_.P(3,2),_.L(),_.K(4,"cfc-select",27)(5,"mat-optgroup",28),_.H(6,Pvk,3,4,"mat-option",29),_.L(),_.M(7,"cfc-select-divider"),_.H(8,Rvk,2,1,"mat-optgroup",30),_.L(),_.K(9,"cfc-help-button",31),_.Pg(10,3),_.M(11,"a",32),_.Qg(),_.L(),_.H(12,Svk,2,0,"cm-error",33),_.L(),_.H(13,Uvk,8,1,"div",34),_.L(),_.H(14,Xvk,9,2,"div",34)(15,ewk,25,7,"div",35)(16,fwk,4,1,"ng-template",null,0,_.zh)(18,gwk,2,0,"ng-template",
null,1,_.zh));a&2&&(_.B(6),_.I("ngForOf",b.regularPartitioningOptions),_.B(2),_.I("ngIf",0<b.columnPartitioningOptions.length),_.B(3),_.I("cfcDocLink",b.dl.CONSOLE__BIGQUERY_DOCS_PARTITIONED_TABLES),_.B(),_.I("cfcDebounceErrorFor","required"),_.B(),_.I("ngIf",b.isPartitioningSelected),_.B(),_.I("ngIf",b.isMultipleTimeGranularitiesSupported),_.B(),_.I("ngIf",b.isRangePartitioningSelected))},dependencies:()=>[_.wk,_.Ww,_.Xw,_.Ox,_.hy,_.iy,_.fy,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Rv,_.Qv,_.Uv,_.Gx,_.Hx,_.Ex,
_.Zy,_.Yy,_.$y,_.Wy,_.Xy,_.mz,_.Jx,_.Mz,_.vC,_.fC,_.eC,_.iB,_.Br,_.Cr,_.Hr,_.ix,_.hx,_.lz,_.Wt,_.St,_.pz,_.UB,azk],encapsulation:2});var azk=class{transform(a){if(0!==a.type){const b=Hvk(a);if(void 0!==b&&!b.field)return"Partition by ingestion time";if(0!==a.type&&a.partition&&a.partition.field)return 0!==a.type&&a.partition.field?a.partition.field:"_PARTITIONTIME"}return"No partitioning"}};azk.\u0275fac=function(a){return new (a||azk)};azk.\u0275pipe=_.Gd({name:"partitionDisplayName",type:azk,pure:!0});
var bzk=class{};bzk.\u0275fac=function(a){return new (a||bzk)};bzk.\u0275mod=_.q({type:bzk});bzk.\u0275inj=_.k({imports:[_.qx,_.Dz,_.jy,_.Cx,_.Ix,_.az,_.Kx,_.Oz,_.wC,_.gC,_.kB,_.rx,_.XB]});var czk={AVRO:"AVRO",CSV:"CSV",DATASTORE_BACKUP:"DATASTORE_BACKUP",GOOGLE_SHEETS:"GOOGLE_SHEETS",ICEBERG:"ICEBERG",NEWLINE_DELIMITED_JSON:"NEWLINE_DELIMITED_JSON",PARQUET:"PARQUET",ORC:"ORC",DELTA_LAKE:"DELTA_LAKE"};var vyk={selectedSource:"EMPTY_TABLE",selectedFileFormat:"AVRO",gcsLocation:"",selectedTableType:"NATIVE",shouldAutoDetectSchema:!1,schema:{fields:[]},resourceTags:[],selectedHivePartitioning:!1,hivePartitioningOptions:{sourceUriPrefix:"",mode:"AUTO"},hivePartitioningSchema:{fields:[]},selectedWriteDisposition:"WRITE_EMPTY",selectedPartitioning:Myk,maxBadRecords:0,shouldIgnoreUnknownValues:!1,delimiter:",",quote:'"',skipLeadingRows:0,shouldAllowQuotedNewlines:!1,shouldAllowJaggedRows:!1,sheetRange:"",
selectedCloudResourceConnection:!1,selectedCreateBigLakeManagedTable:!1,bigLakeManagedTableFileFormat:"PARQUET",bigLakeManagedTableTableFormat:"ICEBERG"},dzk=["PARQUET"],ezk=["ICEBERG"],cyk=[{displayName:"CSV",format:"CSV",forbiddenSources:new Set,suffix:".csv"},{displayName:"JSONL (Newline delimited JSON)",format:"NEWLINE_DELIMITED_JSON",forbiddenSources:new Set,suffix:".json"},{displayName:"Avro",format:"AVRO",forbiddenSources:new Set,suffix:".avro"},{displayName:"Parquet",format:"PARQUET",forbiddenSources:new Set(["DRIVE"]),
suffix:".parquet"},{displayName:"ORC",format:"ORC",forbiddenSources:new Set(["DRIVE"]),suffix:".orc"},{displayName:"Cloud Datastore Backup",format:"DATASTORE_BACKUP",forbiddenSources:new Set(["UPLOAD","DRIVE","ABS","S3"])},{displayName:"Google Sheet",format:"GOOGLE_SHEETS",forbiddenSources:new Set(["EMPTY_TABLE","GCS","UPLOAD","ABS","S3"])},{displayName:"Iceberg",format:"ICEBERG",forbiddenSources:new Set(["DRIVE","UPLOAD","ABS"]),suffix:".metadata.json"},{displayName:"Delta Lake",format:"DELTA_LAKE",
forbiddenSources:new Set(["DRIVE","UPLOAD","GCS"])}];var fzk=function(a){rwk(a.config,a.model);return a},gzk=function(a){swk(a.config,a.model);return a},hzk=function(a){twk(a.config,a.model);return a},izk=function(a){if(lwk(a.model.selectedSource,a.model.selectedFileFormat)){var b=a.config,c=a.model;qwk(b,c);b.skipLeadingRows=c.skipLeadingRows||0;c.shouldAutoDetectSchema&&(b.allowJaggedRows||delete b.allowJaggedRows,b.allowQuotedNewlines||delete b.allowQuotedNewlines,Number(c.skipLeadingRows)||delete b.skipLeadingRows)}return a},jzk=function(a){mwk(a.model.selectedSource,
a.model.selectedFileFormat)&&a.model.selectedJsonExtensionGeoJson&&(a.config.jsonExtension="GEOJSON");return a},kzk=class{constructor(a){this.model=a;this.config={};this.model=a;this.config.autodetect=jwk(this.model.selectedSource,this.model.selectedFileFormat)||this.model.shouldAutoDetectSchema;this.config.autodetect||(this.config.schema=this.model.schema);this.config.destinationTable=this.model.tableLocation;this.config.writeDisposition=this.model.selectedWriteDisposition;this.config.destinationEncryptionConfiguration=
this.model.encryptionConfiguration}build(){return this.config}};var ywk=()=>["maxlength","required"],Swk=new Set(Object.values({COMMA:",",TAB:"\t",PIPE:"|"})),lzk=class{get formGroup(){let a;return null==(a=this.parentFormGroupName)?void 0:a.control}get delimiter(){let a;return null==(a=this.formGroup)?void 0:a.controls.delimiter}get customDelimiter(){let a;return null==(a=this.formGroup)?void 0:a.controls.customDelimiter}get isCustom(){return"custom"===this.delimiter.value}constructor(a){this.parentFormGroupName=a;this.delimiterOptions=[{displayName:"Comma",
format:","},{displayName:"Tab",format:"\t"},{displayName:"Pipe",format:"|"},{displayName:"Custom",format:"custom"}];this.destroy$=new _.Yf}ngOnInit(){this.delimiter.valueChanges.pipe(_.F(this.destroy$)).subscribe(a=>{"custom"===a?this.customDelimiter.enable():this.customDelimiter.disable();let b;null==(b=this.formGroup)||b.updateValueAndValidity()})}ngOnDestroy(){this.destroy$.next()}};lzk.\u0275fac=function(a){return new (a||lzk)(_.D(_.hx,8))};
lzk.\u0275cmp=_.m({type:lzk,selectors:[["bq-delimiter-selector"]],features:[_.oh([_.GC],[_.GC])],decls:8,vars:2,consts:()=>[" Field delimiter "," A field delimiter is a character that separates cells in a CSV table. "," Custom field delimiter "," Enter the character of the delimiter used to separate columns in your input file. "," Custom delimiters must be one character long. ",["aria-labelledby","delimiter-label","formControlName","delimiter"],[3,"value",4,"ngFor","ngForOf"],["id","delimiter-label"],
["matSuffix","","ariaLabel","Help with field delimiter",1,"cfc-pre-wrap"],[4,"ngIf"],[3,"value"],"type text formControlName customDelimiter maxlength 1 matInput ".split(" "),["matError","",4,"cfcDebounceErrorFor"],["matError",""]],template:function(a,b){a&1&&(_.K(0,"mat-form-field")(1,"cfc-select",5),_.H(2,wwk,2,2,"mat-option",6),_.L(),_.K(3,"mat-label",7),_.P(4,0),_.L(),_.K(5,"cfc-help-button",8),_.P(6,1),_.L()(),_.H(7,zwk,7,2,"mat-form-field",9));a&2&&(_.B(2),_.I("ngForOf",b.delimiterOptions),_.B(5),
_.I("ngIf",b.isCustom))},dependencies:()=>[_.Ox,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Rv,_.Qv,_.Uv,_.Gx,_.Hx,_.Ex,_.mz,_.Jx,_.iB,_.Br,_.Cr,_.wk,_.Ww,_.lx,_.ix,_.lz,_.Jk,_.pz],encapsulation:2});var mzk=class{};mzk.\u0275fac=function(a){return new (a||mzk)};mzk.\u0275mod=_.q({type:mzk});mzk.\u0275inj=_.k({imports:[_.Oz,_.Dz,_.Cx,_.Ix,_.Kx,_.kB,_.rx,_.kC]});var Cwk=()=>["maxlength","required"],Twk=new Set(Object.values({DOUBLE_QUOTE:'"',SINGLE_QUOTE:"'",NONE:""})),nzk=class{get formGroup(){let a;return null==(a=this.parentFormGroupName)?void 0:a.control}get quote(){let a;return null==(a=this.formGroup)?void 0:a.controls.quote}get customQuote(){let a;return null==(a=this.formGroup)?void 0:a.controls.customQuote}get isCustom(){return"custom"===this.quote.value}constructor(a){this.parentFormGroupName=a;this.quoteOptions=[{displayName:"Double quote",format:'"'},
{displayName:"Single quote",format:"'"},{displayName:"None",format:""},{displayName:"Custom",format:"custom"}];this.destroy$=new _.Yf}ngOnInit(){this.quote.valueChanges.pipe(_.F(this.destroy$)).subscribe(a=>{"custom"===a?this.customQuote.enable():this.customQuote.disable();let b;null==(b=this.formGroup)||b.updateValueAndValidity()})}ngOnDestroy(){this.destroy$.next()}};nzk.\u0275fac=function(a){return new (a||nzk)(_.D(_.hx,8))};
nzk.\u0275cmp=_.m({type:nzk,selectors:[["bq-quote-selector"]],features:[_.oh([_.GC],[_.GC])],decls:8,vars:2,consts:()=>[" Quote character "," A quote character is used to quote data sections in a CSV file. "," Custom quote character "," Enter the character used to quote data sections in your input file. "," Custom quotes must be one character long. ",["aria-labelledby","quote-label","formControlName","quote"],[3,"value",4,"ngFor","ngForOf"],["id","quote-label"],["matSuffix","","ariaLabel","Help with quote character",
1,"cfc-pre-wrap"],[4,"ngIf"],[3,"value"],"type text formControlName customQuote maxlength 1 matInput ".split(" "),["matError","",4,"cfcDebounceErrorFor"],["matError",""]],template:function(a,b){a&1&&(_.K(0,"mat-form-field")(1,"cfc-select",5),_.H(2,Awk,2,2,"mat-option",6),_.L(),_.K(3,"mat-label",7),_.P(4,0),_.L(),_.K(5,"cfc-help-button",8),_.P(6,1),_.L()(),_.H(7,Dwk,7,2,"mat-form-field",9));a&2&&(_.B(2),_.I("ngForOf",b.quoteOptions),_.B(5),_.I("ngIf",b.isCustom))},dependencies:()=>[_.Ox,_.Ax,_.xx,
_.Bx,_.Xv,_.Sv,_.Rv,_.Qv,_.Uv,_.Gx,_.Hx,_.Ex,_.mz,_.Jx,_.iB,_.Br,_.Cr,_.wk,_.Ww,_.lx,_.ix,_.lz,_.Jk,_.pz],encapsulation:2});var ozk=class{};ozk.\u0275fac=function(a){return new (a||ozk)};ozk.\u0275mod=_.q({type:ozk});ozk.\u0275inj=_.k({imports:[_.Oz,_.Dz,_.Cx,_.Ix,_.Kx,_.kB,_.rx,_.kC]});var pzk=class{set tableLocation(a){this.tableLocation$.next(a)}set disableCmekEncryption(a){if(this.cmekEncryptionDisabled!==a){this.cmekEncryptionDisabled=a;var b=this.parentFormGroupName.control.get("kmsPicker");a?(a=b.get("bqKmsKey.encryptionPlan"),null!==a&&(a.setValue("google-managed"),b.disable())):b.enable({onlySelf:!0})}}set disableDefaultCollation(a){const b=this.parentFormGroupName.control.get("defaultCollation");a?(a=b.get("hasDefaultCollation"),null!==a&&(a.setValue(!1),b.disable())):
b.enable({onlySelf:!0})}get createTableFormArray(){return this.parentFormGroupName.control}get isGoogleSheets(){return nwk(this.sourceFormat,this.source)}get isEmptyTable(){return pwk(this.source)}get isNativeTable(){return"NATIVE"===this.tableType}get canSetWritePreference(){return pwk(this.source)?!1:"NATIVE"===this.tableType}get fileFormatAllowsErrors(){return owk(this.sourceFormat,this.source)}get isCsv(){return lwk(this.source,this.sourceFormat)}get isNewlineDelimitedJson(){return mwk(this.source,
this.sourceFormat)}get canSkipHeadersAndTrailingColumns(){var a=this.source,b=this.sourceFormat;return lwk(a,b)||nwk(b,a)}constructor(a,b,c,d){this.parentFormGroupName=a;this.projectParamService=b;this.datasetsFacadeService=c;this.locationsFacade=d;this.i18n={MSG_BQ_ADVANCED_OPTIONS:"Advanced options"};this.BQ_TABLE_RESOURCE_TYPE="bigquery.googleapis.com/Table";this.source="EMPTY_TABLE";this.cmekEncryptionDisabled=!1;this.SOURCE=Nyk;this.tableLocation$=new _.Vf(1);this.kmsLocation$=this.tableLocation$.pipe(_.E(e=>
e&&e.datasetId&&e.projectId?_.dL(this.datasetsFacadeService,{datasetId:e.datasetId,projectId:e.projectId}).pipe(_.wf(()=>_.y(void 0))):_.y(void 0)),_.E(e=>{const f=null==e?void 0:e.location;return f?_.NA(this.locationsFacade,_.pv(this.projectParamService),"FEATURE_COMMON").pipe(_.A(g=>(g=_.cQa(f,new Set(g)))?_.bQa(g):void 0),_.wf(()=>_.y(void 0))):_.y(void 0)}));this.writeDispositionOptions=_.Sxj;this.currentProjectIdObs$=this.projectParamService.getCurrentProjectId()}};
pzk.\u0275fac=function(a){return new (a||pzk)(_.D(_.hx,8),_.D(_.qv),_.D(_.eL),_.D(_.OA))};
pzk.\u0275cmp=_.m({type:pzk,selectors:[["bq-create-table-form-advanced"]],inputs:{source:"source",sourceFormat:"sourceFormat",tableType:"tableType",tableLocation:"tableLocation",disableCmekEncryption:"disableCmekEncryption",disableDefaultCollation:"disableDefaultCollation"},features:[_.oh([_.GC],[_.GC])],decls:15,vars:13,consts:()=>[" Write preference "," Number of errors allowed "," Enter the maximum number of rows containing errors that can be ignored. If the number of rows with errors exceeds this value, the job will result in an 'invalid' message and fail. "," Number of errors allowed must be greater than 0 ",
" Value must be a number. "," Unknown values "," When enabled, rows with extra column values that do not match the schema will be ignored and will not be imported into BigQuery. \ufffd#5\ufffdLearn more\ufffd/#5\ufffd"," Header rows to skip "," Enter the number of rows to skip from the top of the CSV file. "," Quoted newlines "," Enable to include newlines contained in quoted data sections in the cell\u2019s value. When disabled, newlines will signal a new row. "," Jagged rows "," Enable to accept rows that are missing trailing optional columns. Missing values will be treated as nulls. \ufffd#19\ufffdLearn more\ufffd/#19\ufffd",
" Number of rows to skip must be greater than 0 "," Value must be a number. "," Newline delimited GeoJSON "," When enabled, file will be parsed as newline-delimited GeoJSON instead of regular newline-delimited JSON. ",[3,"unfolded"],[3,"headingLevel"],[4,"ngIf"],["class","cfc-form-control-wrapper",4,"ngIf"],["formGroupName","delimiter",4,"ngIf"],["formGroupName","quote",4,"ngIf"],["formGroupName","kmsPicker",4,"ngIf"],["formGroupName","defaultCollation",3,"isTable",4,"ngIf"],["formGroupName","defaultRoundingMode",
3,"isTable","isUpdate"],["aria-labelledby","write-preference-label","formControlName","selectedWriteDisposition"],[3,"value",4,"ngFor","ngForOf"],["id","write-preference-label"],[3,"value"],"cfcNumberInput  min 0 formControlName maxBadRecords matInput ".split(" "),["matSuffix","",1,"cfc-pre-wrap"],["matError","",4,"cfcDebounceErrorFor"],["matError",""],[1,"cfc-form-control-wrapper"],["formControlName","shouldIgnoreUnknownValues"],[1,"cfc-form-control-suffix","cfc-button-small"],"cfcDocHref;CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_STORAGE_CSV_LOADING_CSV_DATA_INTO_A_TABLE;cfcTrackedEvent;;aria-label;Learn more about ignore unknown values option;track-type;navigateTo;track-name;bqCreateTableAllowJaggedRowsDocumentation;target;_blank".split(";"),
["formGroupName","delimiter"],["formGroupName","quote"],"cfcNumberInput  min 0 formControlName skipLeadingRows matInput ".split(" "),["formControlName","shouldAllowQuotedNewlines"],["formControlName","shouldAllowJaggedRows"],["ariaLabel","Help with learning more about jagged rows.",1,"cfc-form-control-suffix","cfc-button-small"],"cfcDocHref;CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_STORAGE_CSV_LOADING_CSV_DATA_INTO_A_TABLE;cfcTrackedEvent;;aria-label;Learn more about jagged rows.;track-type;navigateTo;track-name;bqCreateTableAllowJaggedRowsDocumentation;target;_blank".split(";"),
["formControlName","selectedJsonExtensionGeoJson"],["formGroupName","kmsPicker"],["serviceName","bigquery.googleapis.com",3,"projectId","locationId","resourceType"],["formGroupName","defaultCollation",3,"isTable"]],template:function(a,b){a&1&&(_.K(0,"cfc-unfold",17)(1,"cfc-unfold-header",18)(2,"h2"),_.U(3),_.L()(),_.K(4,"cfc-unfold-hidden-content"),_.H(5,Fwk,6,3,"mat-form-field",19)(6,Iwk,8,2,"mat-form-field",19)(7,Jwk,6,0,"div",20)(8,Kwk,1,0,"bq-delimiter-selector",21)(9,Lwk,1,0,"bq-quote-selector",
22)(10,Pwk,21,3,"div",19)(11,Qwk,4,7,"div",23)(12,Rwk,1,1,"bq-collation-picker",24),_.K(13,"div"),_.M(14,"bq-default-rounding-mode-picker",25),_.L()()());a&2&&(_.I("unfolded",!1),_.B(),_.I("headingLevel",2),_.B(2),_.jh(b.i18n.MSG_BQ_ADVANCED_OPTIONS),_.B(2),_.I("ngIf",b.canSetWritePreference),_.B(),_.I("ngIf",b.fileFormatAllowsErrors),_.B(),_.I("ngIf",!b.isEmptyTable),_.B(),_.I("ngIf",b.isCsv),_.B(),_.I("ngIf",b.isCsv),_.B(),_.I("ngIf",b.canSkipHeadersAndTrailingColumns),_.B(),_.I("ngIf",b.isNativeTable),
_.B(),_.I("ngIf",b.isNativeTable),_.B(2),_.I("isTable",!0)("isUpdate",!1))},dependencies:[_.Ox,_.hy,_.iy,_.fy,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Qv,_.Uv,_.Gx,_.Hx,_.Ex,_.mz,_.JOf,_.Jx,_.LOf,lzk,_.Tx,_.vC,_.VE,_.iB,_.AM,_.Br,_.Cr,_.RE,nzk,_.wk,_.Ww,_.Xw,_.ix,_.hx,_.lz,_.Jk,_.pz,_.fF,_.gF,_.hF,_.Ir,_.Mr],encapsulation:2});var qzk=class{transform(a){switch(a){case "EMPTY_TABLE":return"Empty table";case "GCS":return"Google Cloud Storage";case "UPLOAD":return"Upload";case "DRIVE":return"Drive";case "BIGTABLE":return"Google Bigtable";case "S3":return"Amazon S3";case "ABS":return"Azure Blob Storage";default:return""}}};qzk.\u0275fac=function(a){return new (a||qzk)};qzk.\u0275pipe=_.Gd({name:"sourceDisplayName",type:qzk,pure:!0});
var rzk=class{transform(a){switch(a){case "EXTERNAL":return"External table";case "NATIVE":return"Native table";default:return""}}};rzk.\u0275fac=function(a){return new (a||rzk)};rzk.\u0275pipe=_.Gd({name:"tableTypeDisplayName",type:rzk,pure:!0});var szk=class{transform(a){const {locationId:b,connectionId:c}=_.Gl(null==a?void 0:a.name);return`${b}.${c}`}};szk.\u0275fac=function(a){return new (a||szk)};szk.\u0275pipe=_.Gd({name:"s3ConnectionDisplayName",type:szk,pure:!0});
var tzk=class{transform(a){const {locationId:b,connectionId:c}=_.Gl(null==a?void 0:a.name);return`${b}.${c}`}};tzk.\u0275fac=function(a){return new (a||tzk)};tzk.\u0275pipe=_.Gd({name:"absConnectionDisplayName",type:tzk,pure:!0});var uzk=class{transform(a){const {locationId:b,connectionId:c}=_.Gl(null==a?void 0:a.name);return`${b}.${c}`}};uzk.\u0275fac=function(a){return new (a||uzk)};uzk.\u0275pipe=_.Gd({name:"cloudResourceConnectionDisplayName",type:uzk,pure:!0});var axk=()=>["bigquery.connections.list"],$wk=function(a,b){const c={};switch(b){case "AWS":c.aws={};break;case "AZURE":c.azure={};break;case "CLOUD_RESOURCE":c.cloudResource={}}a.getSelectedTableRef().pipe(_.Gf(1),_.A(d=>_.xej(c,null==d?void 0:d.projectId)),_.E(d=>a.subtaskService.open(_.yej,d))).subscribe(d=>{d.onAccept.subscribe(()=>{a.refreshConnections$.next()})})},vzk=function(a,b){b?a.setValidators(_.Mo):_.Zw(a);a.updateValueAndValidity()},wzk=class{set selectedSource(a){this.selectedSource$.next(a)}get createTableFormArray(){return this.parentFormGroupName.control}get selectedTableType(){return this.createTableFormArray.get("selectedTableType")}get location(){return this.createTableFormArray.get("location")}get isExternalTable(){return"EXTERNAL"===
this.selectedTableType.value}get selectedCloudResourceConnection(){return this.createTableFormArray.get("selectedCloudResourceConnection")}get awsConnection(){if(this.bigqueryBigLakeManagedTablesUiEnabled){let a,b;return null==(a=this.createTableFormArray)?void 0:null==(b=a.get("awsConnection"))?void 0:b.get("connection")}return this.createTableFormArray.get("awsConnection")}get azureConnection(){if(this.bigqueryBigLakeManagedTablesUiEnabled){let a,b;return null==(a=this.createTableFormArray)?void 0:
null==(b=a.get("azureConnection"))?void 0:b.get("connection")}return this.createTableFormArray.get("azureConnection")}get cloudResourceConnection(){if(this.bigqueryBigLakeManagedTablesUiEnabled){let a,b;return null==(a=this.createTableFormArray)?void 0:null==(b=a.get("cloudResourceConnection"))?void 0:b.get("connection")}return this.createTableFormArray.get("cloudResourceConnection")}get isNativeTableSupported(){return this.tableTypeOptions.includes("NATIVE")}get isExternalTableSupported(){return this.tableTypeOptions.includes("EXTERNAL")}get selectedCreateBigLakeManagedTable(){return this.createTableFormArray.get("selectedCreateBigLakeManagedTable")}get bigLakeManagedTableCloudResourceConnection(){let a,
b;return null==(a=this.createTableFormArray)?void 0:null==(b=a.get("bigLakeManagedTableCloudResourceConnection"))?void 0:b.get("connection")}get bigLakeManagedTableStorageUri(){return this.createTableFormArray.get("bigLakeManagedTableStorageUri")}constructor(a,b,c,d,e,f,g){this.parentFormGroupName=a;this.datasetsFacadeService=b;this.connectionsFacadeService=c;this.errorService=d;this.subtaskService=e;this.locationsFacade=f;this.ve={BigqyeryCreateBigLakeManagedTableToggle:210622};this.bigqueryBigLakeManagedTablesUiEnabled=
_.Xc(_.eKi);this.dl={CONSOLE__BIGQUERY_DOCS_TABLES_INTRO:Hyk,CONSOLE__BIGQUERY_EXTERNAL_DATA_CLOUD_STORAGE_WILDCARD_SUPPORT:Jyk};this.tableTypeOptions=[];this.cloudResourceConnectionPreset={cloudResource:{}};this.awsConnectionPreset={aws:{}};this.azureConnectionPreset={azure:{}};this.selectedSource$=new _.Vf(1);this.isS3Source$=this.selectedSource$.pipe(_.A(n=>"S3"===n));this.isAbsSource$=this.selectedSource$.pipe(_.A(n=>"ABS"===n));this.isGcsSource$=this.selectedSource$.pipe(_.A(n=>"GCS"===n));this.isEmptyTableSource$=
this.selectedSource$.pipe(_.A(n=>"EMPTY_TABLE"===n));this.refreshConnections$=new _.Vf;this.destroy$=new _.Yf;this.SOURCE=Nyk;this.ADD_DATA_GUIDE_DESTINATION_SECTION_STEP="bq-add-data-guide-destination-section";this.canGetConnections$=_.Ie([this.isS3Source$,this.isAbsSource$,this.isGcsSource$,this.isEmptyTableSource$]).pipe(_.E(()=>_.y(!0)),_.ag(1),_.F(this.destroy$));this.bigLakeManagedTableFileFormatOptions$=_.y(dzk);this.bigLakeManagedTableTableFormatOptions$=_.y(ezk);this.connections$=_.y([]);
this.getSelectedTableRef=()=>this.location.valueChanges.pipe(_.dg({}),_.F(this.destroy$),_.A(()=>_.RGi(this.location)));this.getLocationForTableRef=n=>_.dL(this.datasetsFacadeService,n).pipe(_.A(p=>(null==p?void 0:p.location)||"US"),_.wf(()=>_.y("US")));this.fetchConnections=(n,p)=>this.connectionsFacadeService.listConnections({projectId:n,locationId:p}).pipe(_.E(r=>_.Ie([_.y(r),this.isS3Source$,this.isAbsSource$,this.isGcsSource$,this.isEmptyTableSource$])),_.A(([r,u,w,z,C])=>{r=r.filter(G=>_.Gl(null==
G?void 0:G.name).locationId.toLowerCase()===p.toLowerCase());if(u)r=r.filter(G=>!!G.aws);else if(w)r=r.filter(G=>!!G.azure);else if(z||C)r=r.filter(G=>!!G.cloudResource);return r}));this.gcsBucketFilterPredicate=_.N4(g)}ngOnInit(){this.refreshConnections$.next();this.projectId$=this.getSelectedTableRef().pipe(_.A(a=>null==a?void 0:a.projectId));this.connectionsLocation$=this.getSelectedTableRef().pipe(_.E(a=>this.getLocationForTableRef(a)));this.awsLocations$=this.getSelectedTableRef().pipe(_.E(a=>
this.locationsFacade.listLocations(null==a?void 0:a.projectId,"OMNI_AWS")));this.azureLocations$=this.getSelectedTableRef().pipe(_.E(a=>this.locationsFacade.listLocations(null==a?void 0:a.projectId,"OMNI_AZURE")));this.incorrectDatasetLocation$=_.Ie([this.connectionsLocation$,this.selectedSource$,this.awsLocations$,this.azureLocations$]).pipe(_.A(([a,b,c,d])=>{{let e=[];switch(b){case "ABS":e=d;break;case "S3":e=c}a=e.length&&!e.includes(a)?e:void 0}return a}));this.connections$=this.canGetConnections$.pipe(_.We(a=>
!!a),_.E(()=>this.getSelectedTableRef()),_.E(a=>_.Ie([_.y(null==a?void 0:a.projectId),this.connectionsLocation$,this.refreshConnections$])),_.E(([a,b])=>this.fetchConnections(a,b)),_.fg(a=>{1>(null==a?void 0:a.length)||(a=null==a?void 0:a[0],(null==a?0:a.aws)?this.awsConnection.setValue(a):(null==a?0:a.azure)?this.azureConnection.setValue(a):(null==a?0:a.cloudResource)&&this.cloudResourceConnection.setValue(a))}),_.wf(a=>{this.errorService.handleError(a,"Unexpected error",_.ym({error:a}));return _.y([])}),
_.ag(1),_.F(this.destroy$));_.Ie([this.selectedSource$,this.createTableFormArray.valueChanges]).pipe(_.A(([a,{selectedCreateBigLakeManagedTable:b,selectedTableType:c,selectedCloudResourceConnection:d}])=>({source:a,selectedCreateBigLakeManagedTable:b,selectedTableType:c,selectedCloudResourceConnection:d})),_.Ff((a,b)=>a.source===b.source&&a.selectedCreateBigLakeManagedTable===b.selectedCreateBigLakeManagedTable&&a.selectedTableType===b.selectedTableType&&a.selectedCloudResourceConnection===b.selectedCloudResourceConnection),
_.F(this.destroy$)).subscribe(({source:a,selectedCreateBigLakeManagedTable:b,selectedTableType:c,selectedCloudResourceConnection:d})=>{b=b&&"EMPTY_TABLE"===a&&"NATIVE"===c;vzk(this.bigLakeManagedTableCloudResourceConnection,b);vzk(this.bigLakeManagedTableStorageUri,b);vzk(this.cloudResourceConnection,"GCS"===a&&"EXTERNAL"===c&&d);this.bigqueryBigLakeManagedTablesUiEnabled&&(vzk(this.awsConnection,"S3"===a),vzk(this.azureConnection,"ABS"===a))})}ngOnDestroy(){this.destroy$.next()}};
wzk.\u0275fac=function(a){return new (a||wzk)(_.D(_.hx,8),_.D(_.eL),_.D(_.cL),_.D(_.tA),_.D(_.$L),_.D(_.OA),_.D(_.O4))};
wzk.\u0275cmp=_.m({type:wzk,selectors:[["bq-create-table-form-destination"]],inputs:{tableTypeOptions:"tableTypeOptions",selectedSource:"selectedSource"},features:[_.oh([_.GC],[_.GC])],decls:25,vars:24,consts:()=>[" Destination\n"," Table type "," Native tables are tables backed by native BigQuery storage. "," External tables are tables backed by storage external to BigQuery. "," Connection ID "," Connection ID "," Regional / dual region GCS buckets are recommended for External table. "," Create a BigLake table using a Cloud Resource connection ",
" Connection ID ","\ufffd#3\ufffdCreate a BigLake managed table\ufffd/#3\ufffd","\ufffd#13\ufffdType the location for your data in Google Cloud Storage, for example: \ufffd#14\ufffdgs://mybucket/path/to/location/\ufffd/#14\ufffd\ufffd/#13\ufffd"," You do not have the necessary permissions to get the connections for the selected project.\n",["type","warning",4,"ngIf"],["formGroupName","location",3,"requireNewTable","cfcCalloutStepTarget"],["aria-labelledby","table-type-label","formControlName","selectedTableType"],
[3,"value",4,"ngFor","ngForOf"],["id","table-type-label"],["matSuffix","","ariaLabel","Help icon for table type dropdown",1,"cfc-pre-wrap"],[4,"ngIf"],["aria-label","Learn more about tables intro","cfcTrackedEvent","","target","_blank","track-type","navigateTo","track-name","bqTablesIntroDocumentation",3,"cfcDocLink"],["type","warning"],[3,"value"],["formGroupName","awsConnection","label","Connection ID","newConnectionPrimary","Create a new S3 connection","newConnectionSecondary","Launches a form to create a new AWS S3 connection before continuing",
"fieldRequiredErrorText","Connection ID is required",3,"projectId","locationId","connectionPreset",4,"ngIf"],["aria-labelledby","s3-connection-label","formControlName","awsConnection","cfcDisable","","required","",3,"cfcIamCheck"],[3,"click","value"],["primary","Create a new S3 connection","secondary","Launches a form to create a new AWS S3 connection before continuing"],["id","s3-connection-label"],["formGroupName","awsConnection","label","Connection ID","newConnectionPrimary","Create a new S3 connection",
"newConnectionSecondary","Launches a form to create a new AWS S3 connection before continuing","fieldRequiredErrorText","Connection ID is required",3,"projectId","locationId","connectionPreset"],["formGroupName","azureConnection","label","Connection ID","newConnectionPrimary","Create a new ABS connection","newConnectionSecondary","Launches a form to create a new Azure Blob Storage connection before\n  continuing","fieldRequiredErrorText","Connection ID is required",3,"projectId","locationId","connectionPreset",
4,"ngIf"],["aria-labelledby","abs-connection-label","formControlName","azureConnection","cfcDisable","","required","",3,"cfcIamCheck"],["primary","Create a new ABS connection","secondary","Launches a form to create a new Azure Blob Storage connection before\n          continuing"],["id","abs-connection-label"],["formGroupName","azureConnection","label","Connection ID","newConnectionPrimary","Create a new ABS connection","newConnectionSecondary","Launches a form to create a new Azure Blob Storage connection before\n  continuing",
"fieldRequiredErrorText","Connection ID is required",3,"projectId","locationId","connectionPreset"],["type","informational"],["formControlName","selectedCloudResourceConnection"],["formGroupName","cloudResourceConnection","label","Connection ID","newConnectionPrimary","Create a new Cloud Resource connection","newConnectionSecondary","Launches a form to create a new CLOUD_RESOURCE connection before\n      continuing","fieldRequiredErrorText","Connection ID is required",3,"projectId","locationId","connectionPreset",
4,"ngIf"],["aria-labelledby","gcs-connection-label","formControlName","cloudResourceConnection","cfcDisable","",3,"cfcIamCheck"],["primary","Create a new Cloud Resource connection","secondary","Launches a form to create a new CLOUD_RESOURCE connection before\n          continuing"],["id","gcs-connection-label"],["formGroupName","cloudResourceConnection","label","Connection ID","newConnectionPrimary","Create a new Cloud Resource connection","newConnectionSecondary","Launches a form to create a new CLOUD_RESOURCE connection before\n      continuing",
"fieldRequiredErrorText","Connection ID is required",3,"projectId","locationId","connectionPreset"],["formControlName","selectedCreateBigLakeManagedTable",3,"ve","veClick"],["type","preview"],["formGroupName","bigLakeManagedTableCloudResourceConnection","label","Connection ID","newConnectionPrimary","Create a new Cloud Resource connection","newConnectionSecondary","Launches a form to create a new CLOUD_RESOURCE connection before\n      continuing","fieldRequiredErrorText","Connection ID is required",
3,"projectId","locationId","connectionPreset"],["storageLocationPicker","","uriType","folder"],["matTextPrefix",""],"matInput  formControlName bigLakeManagedTableStorageUri storageLocationPickerInput ".split(" "),["matSuffix",""],["matSuffix","","ariaLabel","Help button for Storage URI field",1,"cfc-pre-wrap"],["matError","",4,"cfcDebounceErrorFor"],["formControlName","bigLakeManagedTableFileFormat"],["formControlName","bigLakeManagedTableTableFormat"],["matError",""]],template:function(a,b){a&1&&
(_.K(0,"h2"),_.P(1,0),_.L(),_.H(2,Vwk,3,1,"cfc-message",12),_.W(3,"async"),_.M(4,"bq-table-picker",13),_.K(5,"mat-form-field")(6,"cfc-select",14),_.H(7,Wwk,3,4,"mat-option",15),_.L(),_.K(8,"mat-label",16),_.P(9,1),_.L(),_.K(10,"cfc-help-button",17),_.H(11,Xwk,2,0,"ng-container",18)(12,Ywk,2,0,"ng-container",18),_.K(13,"a",19),_.U(14," Learn more "),_.L()()(),_.H(15,dxk,3,2,"ng-container",18),_.W(16,"async"),_.H(17,hxk,3,2,"ng-container",18),_.W(18,"async"),_.H(19,lxk,8,2,"ng-container",18),_.W(20,
"async"),_.H(21,rxk,5,3,"ng-container",18),_.W(22,"async"),_.H(23,sxk,2,0,"p",18),_.W(24,"async"));a&2&&(_.B(2),_.I("ngIf",_.X(3,12,b.incorrectDatasetLocation$)),_.B(2),_.I("requireNewTable",!1)("cfcCalloutStepTarget",b.ADD_DATA_GUIDE_DESTINATION_SECTION_STEP),_.B(3),_.I("ngForOf",b.tableTypeOptions),_.B(4),_.I("ngIf",b.isNativeTableSupported),_.B(),_.I("ngIf",b.isExternalTableSupported),_.B(),_.I("cfcDocLink",b.dl.CONSOLE__BIGQUERY_DOCS_TABLES_INTRO),_.B(2),_.I("ngIf",!0===_.X(16,14,b.isS3Source$)),
_.B(2),_.I("ngIf",!0===_.X(18,16,b.isAbsSource$)),_.B(2),_.I("ngIf",b.isExternalTable&&!0===_.X(20,18,b.isGcsSource$)),_.B(2),_.I("ngIf",b.bigqueryBigLakeManagedTablesUiEnabled&&!0===_.X(22,20,b.isEmptyTableSource$)),_.B(2),_.I("ngIf",!1===_.X(24,22,b.canGetConnections$)))},dependencies:[_.Ox,_.Ny,_.Fy,_.JB,_.hy,_.iy,_.fy,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Qv,_.Tv,_.Uv,_.Gx,_.Hx,_.Ex,_.mz,Uyk,_.Jx,_.qz,_.Mz,_.vC,_.iB,_.OC,_.oX,_.nX,_.pX,_.uu,_.vu,_.Br,_.Cr,_.wk,_.Ww,_.Xw,_.kx,_.ix,_.hx,_.lz,_.Jk,_.pz,_.VB,
_.S1,_.Ir,tzk,uzk,szk,rzk],encapsulation:2});var xzk=class{get createTableFormArray(){return this.parentFormGroupName.control}constructor(a){this.parentFormGroupName=a;this.schema={};this.disablePartition=!1}};xzk.\u0275fac=function(a){return new (a||xzk)(_.D(_.hx,8))};
xzk.\u0275cmp=_.m({type:xzk,selectors:[["bq-create-table-form-partition"]],inputs:{schema:"schema",disablePartition:"disablePartition"},features:[_.oh([_.GC],[_.GC])],decls:4,vars:2,consts:()=>[" Partition and cluster settings\n",["formGroupName","partitioning",3,"schema","disablePartition"],["formGroupName","clustering"]],template:function(a,b){a&1&&(_.K(0,"h2"),_.P(1,0),_.L(),_.M(2,"bq-partition-builder",1)(3,"bq-clustering-picker",2));a&2&&(_.B(2),_.I("schema",b.schema)("disablePartition",b.disablePartition))},
dependencies:[Oyk,$yk,_.Xw,_.hx],encapsulation:2});var yzk=class{get createTableFormArray(){return this.parentFormGroupName.control}get shouldAutoDetectSchema(){return this.createTableFormArray.get("shouldAutoDetectSchema")}get allowUserSchema(){return kwk(this.selectedSource,this.sourceFormat,this.selectedTableType)}get isEmptyTable(){return pwk(this.selectedSource)}constructor(a){this.parentFormGroupName=a;this.selectedSource="EMPTY_TABLE";this.allowTypeParameters=!1;this.selectedTableType="NATIVE"}};
yzk.\u0275fac=function(a){return new (a||yzk)(_.D(_.hx,8))};
yzk.\u0275cmp=_.m({type:yzk,selectors:[["bq-create-table-form-schema"]],inputs:{selectedSource:"selectedSource",sourceFormat:"sourceFormat",allowTypeParameters:"allowTypeParameters",selectedTableType:"selectedTableType"},features:[_.oh([_.GC],[_.GC])],decls:4,vars:2,consts:()=>["Schema"," Source file defines the schema. "," Auto detect"," Schema will be automatically generated. ",[4,"ngIf"],["type","informational"],["formGroupName","schema",4,"ngIf"],["instrumentationId","bq-create-table-form-auto-detect"],
["formControlName","shouldAutoDetectSchema","spotlightId","bq-create-table-form-auto-detect"],["type","informational",4,"ngIf"],["formGroupName","schema"],[3,"allowTypeParameters","fieldNameMaxLength"]],template:function(a,b){a&1&&(_.K(0,"h2"),_.P(1,0),_.L(),_.H(2,vxk,4,0,"div",4)(3,zxk,3,2,"div",4));a&2&&(_.B(2),_.I("ngIf",!b.allowUserSchema),_.B(),_.I("ngIf",b.allowUserSchema))},dependencies:[_.Ox,_.hy,_.iy,_.fy,_.zP,_.uu,_.vu,_.Cr,_.Ww,_.Xw,_.ix,_.hx,_.Unk,_.$T],encapsulation:2});var byk=new _.kr("45462796");var zzk=new _.kr("45406360");var gyk=/^s3:\/\/.+$/,hyk=/^azure:\/\/.+\.blob\.core\.windows\.net\/.+$/,fyk=/^https:\/\/drive\.google\.com\/open\?id=.+$|^https:\/\/docs\.google\.com\/spreadsheets\/d\/.+$/,Azk=class{get createTableFormArray(){return this.parentFormGroupName.control}get selectedSource(){return this.createTableFormArray.get("selectedSource")}get selectedFile(){return this.createTableFormArray.get("selectedFile")}get selectedFileFormat(){return this.createTableFormArray.get("selectedFileFormat")}get gcsLocation(){return this.createTableFormArray.get("gcsLocation")}get selectedHivePartitioning(){return this.createTableFormArray.get("selectedHivePartitioning")}get isS3Source(){return"S3"===
this.selectedSource.value}get isABSSource(){return"ABS"===this.selectedSource.value}get canSelectFileFormat(){return!this.isEmptyTable&&"BIGTABLE"!==this.selectedSource.value}get canHivePartition(){var a=this.selectedSource.value;return"GCS"===a||"S3"===a||"ABS"===a}get isGoogleSheets(){return nwk(this.selectedFileFormat.value,this.selectedSource.value)}get isEmptyTable(){return pwk(this.selectedSource.value)}constructor(a,b,c){this.parentFormGroupName=a;this.dl={CONSOLE__BIGQUERY_DOCS_CREATE_BIGTABLE_EXTERNAL_TABLE:Dyk,
CONSOLE__BIGQUERY_DOCS_LOADING_DATA_CLOUD_DATASTORE_LOADING_CLOUD_DATASTORE_BACKUP_DATA:Eyk,CONSOLE__BIGQUERY_DOCS_LOADING_DATA_LOCAL:Fyk,CONSOLE__BIGQUERY_EXTERNAL_DATA_BIGTABLE:Iyk,CONSOLE__BIGQUERY_EXTERNAL_DATA_CLOUD_STORAGE_WILDCARD_SUPPORT:Jyk};this.tableType="NATIVE";this.MSG_GCS_PICKER_TITLE_FORM="Choose a file";this.ADD_DATA_GUIDE_SOURCE_SECTION_STEP="bq-add-data-guide-source-section";this.SOURCE=Nyk;this.SOURCE_FORMAT=czk;this.bigtableToBigqueryEnabled=_.Xc(zzk);this.fileFormatOptions$=
_.y(dyk());this.destroy$=new _.Yf;this.sourceOptions=_.Ie(["IMPORT_FILE","IMPORT_FROM_DRIVE","CONNECTIONS","BIGTABLE"].map(d=>_.fB(b,d))).pipe(_.A(([d,e,f,g])=>ayk([["EMPTY_TABLE",!0],["GCS",!0],["UPLOAD",d],["DRIVE",e],["BIGTABLE",g],["S3",f],["ABS",f]])));this.gcsBucketFilterPredicate=_.N4(c)}ngOnInit(){var a=this.selectedSource.valueChanges.pipe(_.dg(this.selectedSource.value),_.ag(1),_.F(this.destroy$));a.subscribe(e=>{eyk(this.createTableFormArray,e)});this.fileFormatOptions$=a.pipe(_.A(e=>({newSource:e,
fileFormatOptions:dyk().filter(f=>!f.forbiddenSources.has(e))})),_.fg(({newSource:e,fileFormatOptions:f})=>{const g=dyk().find(n=>n.format===this.selectedFileFormat.value);g&&g.forbiddenSources.has(e)&&this.selectedFileFormat.setValue(f[0].format)}),_.A(({fileFormatOptions:e})=>e));a=this.gcsLocation.valueChanges.pipe(_.F(this.destroy$));const b=this.createTableFormArray.get("s3Path").valueChanges.pipe(_.F(this.destroy$)),c=this.createTableFormArray.get("absPath").valueChanges.pipe(_.F(this.destroy$)),
d=this.selectedFile.valueChanges.pipe(_.F(this.destroy$),_.We(e=>!!e),_.A(e=>{let f;return e instanceof Array?null==(f=e[0])?void 0:f.name:e.name}));_.Ue(a,d,b,c).pipe(_.We(e=>!!e),_.jg(this.fileFormatOptions$)).subscribe(([e,f])=>{for(const g of f)g.suffix&&e.toLowerCase().endsWith(g.suffix)&&this.selectedFileFormat.setValue(g.format)})}ngOnDestroy(){this.destroy$.next()}};Azk.\u0275fac=function(a){return new (a||Azk)(_.D(_.hx,8),_.D(_.gB),_.D(_.O4))};
Azk.\u0275cmp=_.m({type:Azk,selectors:[["bq-create-table-form-source"]],inputs:{tableType:"tableType"},features:[_.oh([_.GC],[_.GC])],decls:21,vars:16,consts:()=>{let a;a=_.Ug("[\ufffd#9\ufffd|\ufffd#10\ufffd]Select the location of your file in Google Cloud Storage.[\ufffd/#9\ufffd|\ufffd/#10\ufffd][\ufffd#9\ufffd|\ufffd#10\ufffd] You can use a wildcard to load multiple files, for example \ufffd#11\ufffdmybucket/path/to/my*\ufffd/#11\ufffd[\ufffd/#9\ufffd|\ufffd/#10\ufffd]");let b;b=_.Ug(" Upload a local file of up to 100 MB. For larger files, first upload data into \ufffd#8\ufffd Google Cloud Storage [\ufffd/#8\ufffd|\ufffd/#9\ufffd], and then create a table from GCS. \ufffd#9\ufffd Learn more [\ufffd/#8\ufffd|\ufffd/#9\ufffd]");
let c;c=_.Ug(" Local uploads are limited to 100 MB. Please use \ufffd#2\ufffd Google Cloud Storage [\ufffd/#2\ufffd|\ufffd/#3\ufffd] for larger files. \ufffd#3\ufffd Learn more [\ufffd/#2\ufffd|\ufffd/#3\ufffd]");let d;d=_.Ug("[\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]Specify a Drive file URI in one of the following forms:[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]https://drive.google.com/open?id=[file_id][\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]https://docs.google.com/spreadsheets/d/[file_id] (for Google Sheets)[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#8\ufffd|\ufffd#9\ufffd]To access a Google Drive file URI:[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#8\ufffd|\ufffd/#9\ufffd]\ufffd#10\ufffd[\ufffd#11\ufffd|\ufffd#13\ufffd]Go to \ufffd#12\ufffdGoogle Drive\ufffd/#12\ufffd.[\ufffd/#11\ufffd|\ufffd/#13\ufffd][\ufffd#11\ufffd|\ufffd#13\ufffd]Right-click on the file and select \ufffd#14\ufffdShare > Copy Link\ufffd/#14\ufffd.[\ufffd/#11\ufffd|\ufffd/#13\ufffd]\ufffd/#10\ufffd");
let e;e=_.Ug(" Drive URI must take one of the following forms: 'https://drive.google.com/open?id=[\ufffd#2\ufffd|\ufffd#3\ufffd][file id][\ufffd/#2\ufffd|\ufffd/#3\ufffd]', 'https://docs.google.com/spreadsheets/d/[\ufffd#2\ufffd|\ufffd#3\ufffd][file id][\ufffd/#2\ufffd|\ufffd/#3\ufffd]' (for Google Sheets). ");let f;f=_.Ug("\ufffd*3:1\ufffd\ufffd#1:1\ufffd You can now use the Google Cloud console to \ufffd#2:1\ufffd create an external table[\ufffd/#2:1\ufffd|\ufffd/#1:2\ufffd] to use with BigQuery. This feature simplifies the external table creation process by letting BigQuery automatically infer the schema of your Bigtable table and then use it to generate the schema of the external table. You can then use BigQuery to query your Bigtable data. \ufffd/#1:1\ufffd\ufffd/*3:1\ufffd\ufffd*4:2\ufffd Bigtable is now an approved external data source available to BigQuery through the CLI. Check out the \ufffd#1:2\ufffd Querying Bigtable data[\ufffd/#2:1\ufffd|\ufffd/#1:2\ufffd] guide to learn how to create this connection. \ufffd/*4:2\ufffd");
let g;g=_.Ug('[\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd] Optionally indicate which sheet and cell range in the Google Sheets spreadsheet to create a table from. You can specify: [\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd][\ufffd#8\ufffd|\ufffd#10\ufffd][sheet_title][\ufffd/#8\ufffd|\ufffd/#10\ufffd] for the whole sheet, or[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd][\ufffd#8\ufffd|\ufffd#10\ufffd][sheet_title]![top_left_cell_id]:[bottom_right_cell_id][\ufffd/#8\ufffd|\ufffd/#10\ufffd] for a rectangular cell range in a sheet, such as "Sheet1!A1:B20". [\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd][\ufffd#6\ufffd|\ufffd#7\ufffd|\ufffd#9\ufffd|\ufffd#11\ufffd]When this is not specified, the first sheet in the spreadsheet is used.[\ufffd/#6\ufffd|\ufffd/#7\ufffd|\ufffd/#9\ufffd|\ufffd/#11\ufffd]');
return[["picker",""],["bigtableToBigqueryDisabled",""]," Source\n"," Create table from "," Select file from GCS bucket or \ufffd#6\ufffd use a URI pattern \ufffd/#6\ufffd",a," Invalid GCS location selected "," Select file ",b,c," Invalid file selected "," Select Drive URI ",d,e," Drive URI missing "," Select S3 path ","\ufffd#6\ufffdSpecify an Amazon S3 path using the S3 format. For example: s3://mybucket/*\ufffd/#6\ufffd",' Path should start with "s3://". Please see the help tooltip for the correct format. ',
" S3 path missing "," Select Azure Blob Storage path ","\ufffd#6\ufffd Specify an Azure Blob Storage path using the Azure Blob Storage format. For example: azure://mystorageaccount.blob.core.windows.net/mycontainer/* \ufffd/#6\ufffd"," Invalid path format. Please see the help tooltip for the correct format. "," Azure Blob Storage path missing "," File format ",f," Source Data Partitioning "," Sheet range ",g," To load a table from Cloud Datastore or a backup refer to the steps in the documention. \ufffd#3\ufffdLearn more\ufffd/#3\ufffd",
[1,"cfc-space-above-minus-6"],["spotlightId","bq-create-table-form-create-table-from"],["aria-labelledby","source-label","formControlName","selectedSource"],[3,"value",4,"ngFor","ngForOf"],["id","source-label"],[3,"cfcCalloutStepTarget"],[3,"ngSwitch"],["storageLocationPicker","","uriType","object","rwMode","createOrUpdate","spotlightId","bq-create-table-form-select-gcs-bucket",3,"bucketFilterPredicate",4,"ngSwitchCase"],[4,"ngSwitchCase"],["spotlightId","bq-create-table-form-file-format",4,"ngIf"],
["type","informational",4,"ngIf"],[4,"ngIf"],["formGroupName","partition",4,"ngIf"],[3,"value"],["storageLocationPicker","","uriType","object","rwMode","createOrUpdate","spotlightId","bq-create-table-form-select-gcs-bucket",3,"bucketFilterPredicate"],["matPrefix",""],"formControlName gcsLocation storageLocationPickerInput  matInput  required ".split(" "),["matSuffix","",3,"titleOverride"],["target","_blank","rel","noopener",3,"cfcDocLink"],["matSuffix","","ariaLabel","Help button for GCS file selection",
1,"cfc-pre-wrap"],["matError","",4,"cfcDebounceErrorFor"],["matError",""],["formControlName","selectedFile","required",""],["matSuffix","",3,"filePicker"],["matSuffix","","ariaLabel","Help button for file selection"],["cfcRouterLink","/storage/browser","target","_blank"],["aria-label","Learn more about loading local data in BigQuery","cfcTrackedEvent","","track-type","navigateTo","track-name","bqCreateTableLoadingLocalDataDocumentation","target","_blank",3,"cfcDocLink"],["cfcRouterLink","/browser",
"target","_blank"],["aria-label","Learn more about loading local data in BigQuery","cfcTrackedEvent","","track-type","navigateTo","track-name","bqCreateTableLoadingLocalDataDocumentation","target","_blank",3,"cfcDocLink"],"formControlName driveUri matInput  required ".split(" "),["matSuffix","","ariaLabel","Help button for providing Drive URIs"],["target","_blank","href","https://drive.google.com/"],"formControlName s3Path matInput  required ".split(" "),["matSuffix","","ariaLabel","Help button for providing S3 path"],
["formControlName","absPath","matInput",""],["matSuffix","","ariaLabel","Help button for providing Azure Blob Storage path"],["spotlightId","bq-create-table-form-file-format"],["aria-labelledby","file-format-label","formControlName","selectedFileFormat"],["id","file-format-label"],["type","informational"],[4,"ngIf","ngIfElse"],["cfcTrackedEvent","","track-type","navigateTo","track-name","bqExternalTableBigtable","target","_blank",3,"cfcDocLink"],["cfcTrackedEvent","","track-type","navigateTo","track-name",
"bqExternalDataBigtable","target","_blank",3,"cfcDocLink"],["formControlName","selectedHivePartitioning"],["formGroupName","partition"],[3,"tableType"],["formControlName","sheetRange","matInput",""],["matSuffix","","ariaLabel","Help button for providing sheet and cell range"],["aria-label","Learn more about loading table from a Cloud Datastore","cfcTrackedEvent","","track-type","navigateTo","track-name","bqCreateTableAllowJaggedRowsDocumentation","target","_blank",3,"cfcDocLink"]]},template:function(a,
b){a&1&&(_.K(0,"h2",29),_.P(1,2),_.L(),_.K(2,"mat-form-field",30)(3,"cfc-select",31),_.H(4,Cxk,3,4,"mat-option",32),_.W(5,"async"),_.L(),_.K(6,"mat-label",33),_.P(7,3),_.L()(),_.K(8,"div",34),_.N(9,35),_.H(10,Fxk,14,5,"mat-form-field",36)(11,Ixk,12,4,"mat-form-field",37)(12,Lxk,17,2,"mat-form-field",37)(13,Oxk,9,2,"mat-form-field",37)(14,Rxk,9,2,"mat-form-field",37),_.O(),_.H(15,Txk,6,3,"mat-form-field",38),_.L(),_.H(16,Wxk,6,2,"cfc-message",39)(17,Xxk,3,0,"div",40)(18,Yxk,2,1,"div",41)(19,Zxk,12,
0,"mat-form-field",40)(20,$xk,4,1,"cfc-message",39));a&2&&(_.B(4),_.I("ngForOf",_.X(5,14,b.sourceOptions)),_.B(4),_.I("cfcCalloutStepTarget",b.ADD_DATA_GUIDE_SOURCE_SECTION_STEP),_.B(),_.I("ngSwitch",b.selectedSource.value),_.B(),_.I("ngSwitchCase",b.SOURCE.GCS),_.B(),_.I("ngSwitchCase",b.SOURCE.UPLOAD),_.B(),_.I("ngSwitchCase",b.SOURCE.DRIVE),_.B(),_.I("ngSwitchCase",b.SOURCE.S3),_.B(),_.I("ngSwitchCase",b.SOURCE.ABS),_.B(),_.I("ngIf",b.canSelectFileFormat),_.B(),_.I("ngIf",b.selectedSource.value===
b.SOURCE.BIGTABLE),_.B(),_.I("ngIf",b.canHivePartition),_.B(),_.I("ngIf",b.canHivePartition&&!0===b.selectedHivePartitioning.value),_.B(),_.I("ngIf",b.isGoogleSheets),_.B(),_.I("ngIf",b.selectedFileFormat.value===b.SOURCE_FORMAT.DATASTORE_BACKUP))},dependencies:[_.Ox,_.JB,_.hy,_.iy,_.fy,_.Ax,_.xx,_.Bx,_.Xv,_.Sv,_.Qv,_.Tv,_.Uv,_.Gx,_.Hx,_.Ex,_.mz,_.Jx,_.Mz,_.vC,_.rY,_.sY,_.iB,Wyk,_.oX,_.mX,_.nX,_.pX,_.uu,_.vu,_.Br,_.Cr,_.Dr,_.Er,_.wk,_.Ww,_.Xw,_.kx,_.ix,_.hx,_.Jy,_.lz,_.Jk,_.pz,_.$T,_.Ir,qzk],encapsulation:2});var Bzk=class{constructor(){this.dl={CONSOLE__RESOURCE_MANAGER_DOCS_TAGS_TAGS_OVERVIEW:_.IRf};this.disallowDuplicateKeyReason=new _.QSf;this.tagsEditorKeysFilter=a=>"PURPOSE_UNSPECIFIED"===a.purpose}};Bzk.\u0275fac=function(a){return new (a||Bzk)};
Bzk.\u0275cmp=_.m({type:Bzk,selectors:[["bq-create-table-form-tags"]],features:[_.oh([_.GC],[_.GC])],decls:8,vars:6,consts:()=>[["message",""]," Tags "," Tags help you manage and enforce policies on your resources. Tags consist of a unique tag key and a set of tag values. \ufffd#2\ufffd Learn more \ufffd/#2\ufffd",[3,"unfolded"],[3,"headingLevel"],[1,"cfc-space-first"],["formControlName","tags",3,"disallowDuplicateKeyReason","addDisabledReason","tagKeyOptionsFilterPredicate"],["class","cfc-text-caption cfc-space-last",
4,"tagsEditorFormStackDescription"],["type","warning",4,"ngIf"],[1,"cfc-text-caption","cfc-space-last"],["aria-label","Learn more about tags",3,"cfcDocLink"],["type","warning"],["mat-button","","type","button","color","primary",3,"click"]],template:function(a,b){a&1&&(_.K(0,"cfc-unfold",3)(1,"cfc-unfold-header",4)(2,"h2",5),_.P(3,1),_.L()(),_.K(4,"cfc-unfold-hidden-content")(5,"tags-editor-v2",6),_.H(6,jyk,3,1,"p",7),_.L(),_.H(7,kyk,7,1,"cfc-message",8),_.L()());a&2&&(_.I("unfolded",!0),_.B(),_.I("headingLevel",
2),_.B(4),_.I("disallowDuplicateKeyReason",b.disallowDuplicateKeyReason)("addDisabledReason",b.disableTagsEditorReason)("tagKeyOptionsFilterPredicate",b.tagsEditorKeysFilter),_.B(2),_.I("ngIf",b.tagsErrorMessage))},dependencies:[_.oW,_.qW,_.Ox,_.vx,_.Su,_.sx,_.Mz,_.uu,_.wu,_.vu,_.Cr,_.Ww,_.ix,_.fF,_.gF,_.hF],encapsulation:2});var qyk=a=>({schema:a}),Czk=class{get billingProjectId(){return _.pv(this.projectParamService)}get createTableFormArray(){return this.parentFormGroupName.control}get sourceGroup(){return this.createTableFormArray.controls.source}get destinationGroup(){return this.createTableFormArray.controls.destination}get selectedSource(){return this.sourceGroup.get("selectedSource")}get selectedTableType(){return this.destinationGroup.get("selectedTableType")}get selectedFileFormat(){return this.sourceGroup.get("selectedFileFormat")}get isS3Source(){return"S3"===
this.selectedSource.value}get isABSSource(){return"ABS"===this.selectedSource.value}get canSourceHaveDestination(){return"BIGTABLE"!==this.selectedSource.value}get sourceHasAdvancedOptions(){return"BIGTABLE"!==this.selectedSource.value&&!this.isS3Source&&!this.isABSSource}get isBigLakeManagedTable(){const a=this.destinationGroup.get("selectedCreateBigLakeManagedTable").value,b="EMPTY_TABLE"===this.selectedSource.value;return a&&b}get isNativeTable(){return"NATIVE"===this.selectedTableType.value}get allowTypeParameters(){return _.LVf&&
this.isNativeTable}constructor(a,b,c){this.parentFormGroupName=a;this.panTrustedTesterService=b;this.projectParamService=c;this.SOURCE=Nyk;this.tableTypeOptions$=_.y(["NATIVE"]);this.destroy$=new _.Yf}ngOnInit(){this.panTrustedTesterService.isTrustedTester(this.billingProjectId,260).pipe(_.Gf(1),_.fg(()=>{})).subscribe();const a=this.destinationGroup.get("location");this.tableLocation$=_.Ue(_.y(a.value),a.valueChanges).pipe(_.A(b=>{var c=null==b?void 0:b.dataset;return{projectId:(null==b?void 0:b.projectId)||
"",datasetId:(c?c.datasetId||"":"")||"",tableId:(null==b?void 0:b.tableId)||""}}),_.wf(()=>_.y(void 0)));this.tableTypeOptions$=this.selectedSource.valueChanges.pipe(_.dg(this.selectedSource.value),_.F(this.destroy$),_.A(b=>{switch(b){case "EMPTY_TABLE":case "UPLOAD":return["NATIVE"];case "DRIVE":case "BIGTABLE":case "S3":case "ABS":return["EXTERNAL"];default:return["NATIVE","EXTERNAL"]}}),_.fg(b=>{this.selectedTableType.setValue(b[0]||"NATIVE")}));this.schemaDebounced$=this.createTableFormArray.controls.schema.valueChanges.pipe(_.Bf(500),
_.A(()=>Bxk(this.createTableFormArray.controls.schema).schema))}ngOnDestroy(){this.destroy$.next()}};Czk.\u0275fac=function(a){return new (a||Czk)(_.D(_.hx,8),_.D(_.ZA),_.D(_.qv))};
Czk.\u0275cmp=_.m({type:Czk,selectors:[["bq-create-table-form"]],viewQuery:function(a,b){a&1&&_.ch(pzk,5);if(a&2){let c;_.fh(c=_.gh())&&(b.advancedFormInstance=c.first)}},features:[_.oh([_.GC],[_.GC])],decls:4,vars:4,consts:[["formGroupName","source",3,"tableType"],[4,"ngIf"],["formGroupName","tags"],["formGroupName","destination",3,"selectedSource","tableTypeOptions"],["formGroupName","schema",3,"selectedSource","sourceFormat","allowTypeParameters","selectedTableType"],["formGroupName","partition",
3,"schema","disablePartition"],["formGroupName","advanced",3,"source","sourceFormat","tableType","tableLocation","disableCmekEncryption","disableDefaultCollation"]],template:function(a,b){a&1&&(_.K(0,"section"),_.M(1,"bq-create-table-form-source",0),_.L(),_.H(2,tyk,8,4,"ng-container",1),_.W(3,"async"));a&2&&(_.B(),_.I("tableType",b.selectedTableType.value),_.B(),_.I("ngIf",_.X(3,2,b.tableTypeOptions$)))},dependencies:[_.Cr,_.Xw,_.hx,pzk,wzk,xzk,yzk,Azk,Bzk,_.Ir],encapsulation:2});var Dzk=class{};Dzk.\u0275fac=function(a){return new (a||Dzk)};Dzk.\u0275mod=_.q({type:Dzk});Dzk.\u0275inj=_.k({imports:[_.az,_.pW,_.rW,_.Dz,_.Ez,_.SB,Qyk,_.wx,_.jy,_.Cx,_.Ix,_.KOf,Vyk,_.Kx,_.MOf,mzk,_.Zz,_.Oz,_.wC,_.tY,_.WE,_.kB,Xyk,_.PC,_.AP,_.BM,_.uX,_.Du,_.SE,bzk,ozk,_.rx,_.Lz,_.B6,_.kC,_.aU,_.vX,_.T1,_.BF]});var Gzk=function(a,b){const c={configuration:{load:izk(hzk(gzk(jzk(fzk(new kzk(b)))))).build()}};return _.Pe([Ezk(a,c),!b.shouldAutoDetectSchema&&"WRITE_APPEND"===b.selectedWriteDisposition&&b.tableLocation?a.bqTablesFacadeService.getTable(b.tableLocation):_.y(void 0)]).pipe(_.E(([d,e])=>{c.jobReference=d;const f=null==d?void 0:d.projectId;let g;const n=b.selectedFile instanceof Array?null==(g=b.selectedFile)?void 0:g[0]:b.selectedFile;let p;e&&(null==c?0:null==(p=c.configuration)?0:p.load)&&(c.configuration.load.schema=
e.schema);return n?a.jobsFacadePerJobPollingService.insertMediaUpload(n,f,c):a.jobsFacadePerJobPollingService.insertJob(f,{jobReference:d,serverModel:c})}),_.We(d=>0!==d.uiStatus),_.fg(d=>{Fzk(a,d)}),_.Jf(d=>a.jobsFacadePerJobPollingService.clientJobIsComplete(d)),_.fg(d=>{if(5===d.uiStatus){let e;Byk(a.analyticsService,b.selectedSource,b.selectedFileFormat,b.selectedTableType,null!=(e=b.selectedCreateBigLakeManagedTable)?e:!1);a.subtaskRef.accept(d.job)}}),_.A(d=>d.job))},Hzk=function(a,b){let c;
null==(c=a.calloutStepTargetService.get(b))||c.nativeElement.scrollIntoView({block:"end"})},Izk=function(a,b){const {info:c,subtaskConfig:d}=_.Fvk({data:{job:b}});a.subtaskService.open(c,d).subscribe()},Fzk=function(a,b){switch(b.uiStatus){case 2:a.messageWithAction("Load job created.","Go to job",()=>{Izk(a,b.job)});break;case 5:var c;let d,e,f;const g=null==(c=b.job)?void 0:null==(d=c.serverModel)?void 0:null==(e=d.configuration)?void 0:null==(f=e.load)?void 0:f.destinationTable;c=_.nk('"{TABLE_NAME}" created.',
{TABLE_NAME:(null==g?void 0:g.tableId)||""});a.messageWithAction(c,"Go to table",()=>{_.lo(g)||a.snackBarService.open("Unexpected error");a.tabService.openTableDetailsTab(g)});break;case 4:let n;if(null==(n=b.job)?0:n.serverModel){let p,r,u,w;a.messageWithAction(_.nk("Failed to create table: {ERROR_MESSAGE}",{ERROR_MESSAGE:(null==(p=b.job)?void 0:null==(r=p.serverModel)?void 0:null==(u=r.status)?void 0:null==(w=u.errorResult)?void 0:w.message)||"Unexpected error"}),"Go to job",()=>{Izk(a,b.job)})}}},
Ezk=function(a,b){var c;if(null==(c=b.jobReference)?0:c.location)return _.y(b.jobReference);let d;c=null==(d=(null==b?void 0:b.configuration).load)?void 0:d.destinationTable;return _.dL(a.datasetsFacadeService,{datasetId:(null==c?void 0:c.datasetId)||"",projectId:(null==c?void 0:c.projectId)||""}).pipe(_.A(e=>({projectId:_.pv(a.projectParamService),location:e.location,jobId:b.id})))},Jzk=class{constructor(a,b,c,d,e,f,g,n,p,r,u,w,z,C,G){this.data=a;this.subtaskRef=b;this.errorService=c;this.snackBarService=
d;this.bqTablesFacadeService=e;this.datasetsFacadeService=f;this.jobsFacadePerJobPollingService=g;this.projectParamService=n;this.subtaskService=p;this.tabService=r;this.fb=u;this.ref=w;this.guidesService=z;this.calloutStepTargetService=C;this.analyticsService=G;this.title="Create table";this.ADD_DATA_GUIDE_SUBMIT_BUTTON_STEP="bq-add-data-guide-submit-button";this.isAddDataGuideActive=this.isLoadingJob=!1;this.destroyed$=new _.Vf(1);this.submit=()=>_.y(void 0).pipe(_.E(()=>{var J;null==(J=this.form)||
J.markAllAsTouched();var Q;if(null==(Q=this.form)||!Q.valid)return _.y(void 0);J=wyk(this.form.get("table"));let ba;Q=this.analyticsService;var Y=J.selectedSource,da=J.selectedFileFormat,ia=J.selectedTableType,xa=null!=(ba=J.selectedCreateBigLakeManagedTable)?ba:!1;Q.sendEvent({type:"bqTableCreate",name:"trackCreateTableSubmit",metadata:{source:Y,fileFormat:da,tableType:ia,isBigLakeManagedTable:xa}});return"EMPTY_TABLE"===J.selectedSource||"EXTERNAL"===J.selectedTableType?this.createTable(J):Gzk(this,
J)}),_.wf(J=>{const Q=_.nk("Failed to create table: {ERROR_MESSAGE}",{ERROR_MESSAGE:_.xm(J)});J.message=Q;this.errorService.handleError(J,Q,_.ym({error:J,configuration:{presentationFormat:2}}));return _.y(void 0)}));this.ve={BqSubtaskCreateTablePanelBody:154790,BqSubtaskCreateTablePanelFooter:154791,BqSubtaskCreateTableActionBar:154789};_.y(this.data).pipe(_.E(J=>{if(J){if(!J.jobId)return _.y(Ayk({data:J}));const Q=_.dvb(J.jobId);if(!Q)throw Error("Ku");this.isLoadingJob=!0;return this.jobsFacadePerJobPollingService.getJob(Q).pipe(_.A(ba=>
{let Y,da;ba=null==ba?void 0:null==(Y=ba.serverModel)?void 0:null==(da=Y.configuration)?void 0:da.load;return Ayk({data:J,loadJobConfig:ba})}))}return _.y()}),_.Jf(),_.A(J=>{this.isLoadingJob=!1;try{this.form=this.createForm(J),this.ref.markForCheck()}catch(Q){}}),_.wf(J=>{this.isLoadingJob=!1;this.errorService.handleError(J,"Unexpected error",_.ym({error:J,configuration:{presentationFormat:2}}));return _.y(void 0)})).subscribe();this.guidesService.activeGuide$.pipe(_.Gf(1)).subscribe(J=>{(this.isAddDataGuideActive=
"bq-add-data-guide-id"===(null==J?void 0:J.id))&&this.prepareSubtaskForAddDataGuide()})}ngOnDestroy(){this.destroyed$.next();this.destroyed$.complete()}prepareSubtaskForAddDataGuide(){_.IW(this.guidesService,"bq-add-data-guide-source-section",!1);_.IW(this.guidesService,"bq-add-data-guide-destination-section",!1);_.g4(this.guidesService,["bq-add-data-guide-data-source"]).pipe(_.F(this.destroyed$),_.Gf(1)).subscribe(()=>{_.iSc(this.subtaskRef)});_.g4(this.guidesService,["bq-add-data-guide-source-section",
"bq-add-data-guide-destination-section"]).pipe(_.F(this.destroyed$)).subscribe(a=>{Hzk(this,a)});this.subtaskRef.afterOpen.pipe(_.Gf(1)).subscribe(()=>{Hzk(this,"bq-add-data-guide-source-section");_.IW(this.guidesService,"bq-add-data-guide-source-section",!0);_.IW(this.guidesService,"bq-add-data-guide-destination-section",!0);_.IW(this.guidesService,"bq-add-data-guide-data-source",!1)});this.subtaskRef.afterClosed.pipe(_.Gf(1)).subscribe(()=>{_.IW(this.guidesService,"bq-add-data-guide-data-source",
!0)})}get buttonDisabled(){return this.form?"BIGTABLE"===wyk(this.form.get("table")).selectedSource:!0}cancel(){this.subtaskRef.cancel()}createTable(a){const b=vwk(a);return _.y(b.tableReference).pipe(_.E(c=>_.lo(c)?this.bqTablesFacadeService.createTable(b):_.ye("Something went wrong. A valid table reference could not be found.")),_.Jf(),_.fg(c=>{let d;const e=_.nk('"{TABLE_NAME}" created.',{TABLE_NAME:(null==c?void 0:null==(d=c.tableReference)?void 0:d.tableId)||""});this.snackBarService.openWithMultipleActions(e,
{actions:[{label:"Go to table",dismissOnPress:!0,action:()=>{var g=null==c?void 0:c.tableReference;_.lo(g)||this.snackBarService.open("Unexpected error");this.tabService.openTableDetailsTab(g)}}]});let f;Byk(this.analyticsService,a.selectedSource,a.selectedFileFormat,a.selectedTableType,null!=(f=a.selectedCreateBigLakeManagedTable)?f:!1);this.subtaskRef.accept(c)}),_.wf(c=>{const d=_.nk("Failed to create table: {ERROR_MESSAGE}",{ERROR_MESSAGE:_.xm(c)});c.message=d;this.errorService.handleError(c,
d,_.ym({error:c,configuration:{presentationFormat:2}}));return _.y(void 0)}))}messageWithAction(a,b,c){this.snackBarService.openWithMultipleActions(a,{actions:[{label:b,dismissOnPress:!0,action:()=>{c()}}]})}createForm(a){a=uyk({fb:this.fb,model:a});return this.fb.group({table:a})}};Jzk.\u0275fac=function(a){return new (a||Jzk)(_.D(_.MD,8),_.D(_.LD),_.D(_.tA),_.D(_.UA),_.D(_.gL),_.D(_.eL),_.D(_.O2),_.D(_.qv),_.D(_.$L),_.D(_.GW),_.D(_.px),_.D(_.vr),_.D(_.JW),_.D(_.IB),_.D(_.lL))};
Jzk.\u0275cmp=_.m({type:Jzk,selectors:[["bq-create-table-subtask"]],hostAttrs:[1,"cfc-flex-layout-column"],decls:13,vars:10,consts:()=>[["createTableForm",""]," Create table "," Cancel ",[3,"cfcTitle","ve"],[1,"cfc-action-bar-content-right"],["navType","close",3,"onClose"],[3,"ve","veImpression"],["class","pcc-loading-overlay\n             cfc-flex-layout-column\n             cfc-flex-center-aligned\n             cfc-flex-justify-center",4,"ngIf","ngIfElse"],[3,"ve"],["mat-raised-button","","color",
"primary","type","submit","cfcFormSubmit","create-table-form",3,"cmDisabled","cfcProgressButtonClick","cfcCalloutStepTarget"],["mat-button","","type","button",3,"click"],[1,"pcc-loading-overlay","cfc-flex-layout-column","cfc-flex-center-aligned","cfc-flex-justify-center"],["aria-label","Loading Job",3,"diameter"],["id","create-table-form",1,"cfc-max-width-full",3,"formGroup"],["formGroupName","table"]],template:function(a,b){if(a&1){const c=_.t();_.K(0,"cfc-action-bar",3)(1,"div",4)(2,"cfc-navigation-button",
5);_.R("onClose",function(){_.v(c);return _.x(b.cancel())});_.L()()();_.K(3,"cfc-panel-body",6);_.H(4,xyk,2,1,"div",7)(5,yyk,3,1,"ng-template",null,0,_.zh);_.L();_.K(7,"cfc-panel-footer",8)(8,"cfc-progress-button")(9,"button",9);_.P(10,1);_.L()();_.K(11,"button",10);_.R("click",function(){_.v(c);return _.x(b.cancel())});_.P(12,2);_.L()()}a&2&&(a=_.hh(6),_.I("cfcTitle",b.title)("ve",b.ve.BqSubtaskCreateTableActionBar),_.B(3),_.I("ve",b.ve.BqSubtaskCreateTablePanelBody)("veImpression",!b.isAddDataGuideActive),
_.B(),_.I("ngIf",b.isLoadingJob)("ngIfElse",a),_.B(3),_.I("ve",b.ve.BqSubtaskCreateTablePanelFooter),_.B(2),_.I("cmDisabled",b.buttonDisabled)("cfcProgressButtonClick",b.submit)("cfcCalloutStepTarget",b.ADD_DATA_GUIDE_SUBMIT_BUTTON_STEP))},dependencies:()=>[_.xu,_.FD,_.aE,_.Ox,_.Ny,_.JB,_.vx,_.Su,_.sx,_.pu,_.nu,_.ju,Czk,_.OD,_.uL,_.eE,_.Cr,_.fz,_.cz,_.bx,_.Xw,_.zk,_.hx],encapsulation:2});var Kzk={SubtaskService:_.ND,CreateTableSubtaskComponent:Jzk},Lzk=class{};
Lzk.\u0275fac=function(a){return new (a||Lzk)};Lzk.\u0275mod=_.q({type:Lzk,id:"pm_bigquery_create_table_subtask"});Lzk.\u0275inj=_.k({providers:[{provide:_.gs,useValue:Kzk}],imports:[_.mE,_.dE,_.Dz,_.SB,_.wx,_.zu,Dzk,_.xE,_.vL,_.fE,_.GD,_.TB,_.rx]});_.kg(Lzk,"pm_bigquery_create_table_subtask");
_.ai();
}catch(e){_._DumpException(e)}
}).call(this,this.default_r_tvffkgi);
// Google Inc.
